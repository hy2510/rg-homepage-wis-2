import{r as c,j as e}from"./react-7d242ef7.js";import{A as _e,g as pe,l as Fs,s as ge,d as ks,a as Ti,b as Hs,c as Jt,e as Me,f as Ai,h as co}from"./index-1fbc5d9d.js";import{l as ue}from"./lodash-966e37b7.js";import{_ as ao}from"./react-lottie-d0c604de.js";import{r as vn}from"./react-string-replace-0c479100.js";import"./babel-runtime-6c3dde2a.js";import"./core-js-8607efe6.js";import"./react-dom-d712bff1.js";import"./scheduler-765c72db.js";import"./axios-a342f982.js";/* empty css                    */import"./prop-types-387d7a00.js";import"./lottie-web-1d3b9245.js";const Ot=()=>{const{bookInfo:t}=c.useContext(_e),i=t.BookLevel;let n="baro";switch(i){case"6C":case"6B":case"6A":case"5C":case"5B":case"5A":n="dodo";break;case"4C":case"4B":case"4A":n="gino";break;case"3C":n="goma";break;case"3B":n="leoni";break;case"3A":n="edmond";break;case"2C":n="roro";break;case"2B":n="tori";break;case"2A":n="greenthumb";break;case"1C":n="blanc";break;case"1B":n="sheila";break;case"1A":n="jack";break;case"KC":n="millo";break;case"KB":n="chello";break;default:n="baro"}return n};async function uo(t){const{bookType:i,studyId:n,studentHistoryId:s}=t,l=`study/quiz/cloze-test-1?studentHistoryId=${s}&studyId=${n}&bookType=${i}`;return pe(l,async r=>({ContentsId:Number(r.ContentsId),IsQuizTimeoutIncorrect:!!r.isQuizTimeoutIncorrect,QuizAnswerCount:Number(r.QuizAnswerCount),QuizTime:Number(r.QuizTime),Quiz:r.Quiz.map(x=>({QuizId:x.QuizId.toString(),QuizNo:Number(x.QuizNo),Question:{Text:x.Question.Text,Sound:x.Question.Sound},Examples:x.Examples.map(y=>({Text:y.Text}))}))}))}async function lo(t){const{bookType:i,studyId:n,studentHistoryId:s}=t,l=`study/quiz/cloze-test-2?studentHistoryId=${s}&studyId=${n}&bookType=${i}`;return pe(l,async r=>({ContentsId:Number(r.ContentsId),IsQuizTimeoutIncorrect:!!r.isQuizTimeoutIncorrect,QuizAnswerCount:Number(r.QuizAnswerCount),QuizTime:Number(r.QuizTime),IsEnablePenaltyReview:!!r.IsEnablePenaltyReview,Quiz:r.Quiz.map(x=>({QuizId:x.QuizId.toString(),QuizNo:Number(x.QuizNo),Question:{Text:x.Question.Text,Sound:x.Question.Sound},Examples:x.Examples.map(y=>({Text:y.Text}))}))}))}const _o="_comment_o3k2d_1",mo="_wordPlayButton_o3k2d_20",xo="_txtL_o3k2d_35",ho="_cardNumber_o3k2d_46",yo="_testReview_o3k2d_61",fo="_title_o3k2d_64",go="_container_o3k2d_69",po="_sentence_o3k2d_78",bo="_nextButton_o3k2d_87",jo="_deactNextButton_o3k2d_109",So="_reviewAnswer_o3k2d_130",zo="_currentOrder_o3k2d_139",wo="_blink_o3k2d_1",Qo="_currentInput_o3k2d_159",Co="_otherInput_o3k2d_160",vo="_enterButton_o3k2d_167",$o="_hintText_o3k2d_193",No="_clozeTest1_o3k2d_202",To="_textCard_o3k2d_206",Ao="_correct_o3k2d_241",ko="_incorrect_o3k2d_246",Io="_awnserText_o3k2d_251",Bo="_answers_o3k2d_256",Eo="_questionBox_o3k2d_269",Po="_answerBox_o3k2d_294",Mo="_correctAnswer_o3k2d_311",Lo="_incorrectAnswer_o3k2d_315",qo="_clozeTest2_o3k2d_326",ut={comment:_o,wordPlayButton:mo,txtL:xo,cardNumber:ho,testReview:yo,title:fo,container:go,sentence:po,nextButton:bo,deactNextButton:jo,reviewAnswer:So,currentOrder:zo,blink:wo,currentInput:Qo,otherInput:Co,enterButton:vo,hintText:$o,clozeTest1:No,textCard:To,correct:Ao,incorrect:ko,awnserText:Io,answers:Bo,questionBox:Eo,answerBox:Po,correctAnswer:Mo,incorrectAnswer:Lo,clozeTest2:qo},Ro="_comment_1xujz_1",Oo="_wordPlayButton_1xujz_15",Fo="_txtL_1xujz_30",Ho="_cardNumber_1xujz_41",Do="_testReview_1xujz_56",Wo="_title_1xujz_56",Vo="_container_1xujz_61",Uo="_sentence_1xujz_70",Jo="_nextButton_1xujz_78",Ko="_deactNextButton_1xujz_100",Yo="_reviewAnswer_1xujz_121",Go="_currentOrder_1xujz_130",Xo="_blink_1xujz_1",Zo="_currentInput_1xujz_150",er="_otherInput_1xujz_151",tr="_hintText_1xujz_159",nr="_clozeTest2_1xujz_168",sr="_questionBox_1xujz_175",ir="_answerBox_1xujz_187",or="_correctAnswer_1xujz_207",rr="_incorrectAnswer_1xujz_212",cr="_enterButton_1xujz_231",ar="_clozeTest1_1xujz_258",ur="_textCard_1xujz_262",lr="_correct_1xujz_207",dr="_incorrect_1xujz_212",_r="_awnserText_1xujz_307",mr="_answers_1xujz_312",dt={comment:Ro,wordPlayButton:Oo,txtL:Fo,cardNumber:Ho,testReview:Do,title:Wo,container:Vo,sentence:Uo,nextButton:Jo,deactNextButton:Ko,reviewAnswer:Yo,currentOrder:Go,blink:Xo,currentInput:Zo,otherInput:er,hintText:tr,clozeTest2:nr,questionBox:sr,answerBox:ir,correctAnswer:or,incorrectAnswer:rr,enterButton:cr,clozeTest1:ar,textCard:ur,correct:lr,incorrect:dr,awnserText:_r,answers:mr},be=()=>{const[t,i]=c.useState(!0);return{isStepIntro:t,closeStepIntro:s=>{i(!1),s&&s()}}},Ae=()=>{const[t,i]=c.useState("loading");return{quizState:t,changeQuizState:s=>{if(t==="checking"&&s!=="studying")return!1;i(s)}}};function xr(t,i){const n=c.useRef();c.useEffect(()=>{n.current=t},[t]),c.useEffect(()=>{function s(){n.current&&n.current()}s();const a=setInterval(s,i);return()=>{clearInterval(a)}},[i])}function je(t){const i=c.useRef(),[n,s]=c.useState(-1),[a,l]=c.useState(-1),[u,r]=c.useState(0),[x,y]=c.useState(!0),[f,p]=c.useState({timeMin:0,timeSec:0}),h=()=>{r(Date.now()),y(!1)},g=()=>{s(a),y(!0)},m=(o,_)=>{const d=o%60,j=(o-d)/60;p({timeMin:j,timeSec:d}),s(o),_?h():y(!0)};return c.useEffect(()=>{i.current=t},[t]),xr(()=>{if(!x){const o=Math.floor((Date.now()-u)/1e3),_=n-o,d=_>=0?_%60:0,j=_>=0?(_-d)/60:0;_<=0&&(g(),i.current&&i.current()),p({timeMin:j,timeSec:d}),l(_)}},1e3),{time:f,setup:m,start:h,stop:g,isFinish:f.timeMin+f.timeSec<=0}}const Ds=["animate__animated"],Ye=()=>({isContain:(i,n)=>i.classList.contains(n),play:(i,n,s)=>{i.classList.add(...Ds,...n),s&&s()},remove:(i,n)=>{i.classList.remove(...n,...Ds)},removeAndPlay:(i,n,s)=>{i.classList.remove(...n),i.classList.add(...s)}}),Se=(t,i,n,s)=>{const[a,l]=c.useState(),[u,r]=c.useState([]);return c.useEffect(()=>{(async()=>{const y=await t(i);if(!y)throw new Error("No StudyData Error");let f;s?f=await Fs("R",i):f=await Fs(n,i),l(y),r(f)})()},[t]),[a,u]},Ue=(t,i)=>{let n=1,s=0;if(t&&t.length>0){const a=t[t.length-1];a.AnswerCount===i||a.OX==="1"?n=a.CurrentQuizNo+1:(n=a.CurrentQuizNo,s=a.AnswerCount)}return console.log(t),[n,s]},hr=(t,i,n)=>{let s=1,a=1,l=0;if(t&&t.length>0){const u=t[t.length-1],r=u.StudentAnswer.split(","),x=r[r.length-1].slice(-1),y=r[r.length-1].length;y===n||x==="1"?(r.length===i?a=u.QuizNo+1:a=u.QuizNo,s=u.CurrentQuizNo+1):(s=u.CurrentQuizNo,a=u.QuizNo,l=y)}return[s,a,l]},yr=(t,i)=>{let n=1,s=0;if(t&&t.length>0){const a=t[t.length-1];a.AnswerCount===i?n=a.CurrentQuizNo+1:(n=a.CurrentQuizNo,s=a.AnswerCount)}return[n,s]},ze=()=>{const[t,i]=c.useState([]),n=(y,f)=>{const p=ki(y,f);i(p)},s=(y,f)=>{const p=Ii(y,f);i(p)},a=y=>{let f=[];t.length>0&&(f=[...t]),y.maxCount>1&&t.find(h=>h.quizNo===y.quizNo)?f=ue.map(t,h=>h.quizNo===y.quizNo&&h.answerCount<y.maxCount?{...h,quizNo:y.quizNo,maxCount:y.maxCount,answerCount:y.answerCount,ox:y.ox}:h):f.push(y),i(f)},l=(y,f,p)=>{const h=[...t,y],g=100/f;let m=0;return h.map(o=>{if(o.ox)switch(o.answerCount){case 1:m+=1*g;break;case 2:m+=.5*g;break;case 3:m+=.25*g;break}else o.answerCount}),m};return{scoreBoardData:t,setStudentAnswers:n,setStudentAnswersPartial:s,addStudentAnswers:a,getScore:l,makeUserAnswerData:(y,f,p,h,g,m,o,_,d,j,S,b,N,L,C,B,E)=>{let w;if(_+1>N)if(L){const k=l(C,N,b);w={mobile:y,studyId:f,studentHistoryId:p,bookType:h,step:`${g}`,quizId:m,quizNo:o,currentQuizNo:_,correct:d,studentAnswer:j,answerCount:S,isLastQuiz:!0,score:k,isFinishStudy:E}}else if(S>=b){const k=l(C,N,b);w={mobile:y,studyId:f,studentHistoryId:p,bookType:h,step:`${g}`,quizId:m,quizNo:o,currentQuizNo:_,correct:d,studentAnswer:j,answerCount:S,isLastQuiz:!0,score:k,isEnabledPenalty:B,isFinishStudy:E}}else w={mobile:y,studyId:f,studentHistoryId:p,bookType:h,step:`${g}`,quizId:m,quizNo:o,currentQuizNo:_,correct:d,studentAnswer:j,answerCount:S};else B?w={mobile:y,studyId:f,studentHistoryId:p,bookType:h,step:`${g}`,quizId:m,quizNo:o,currentQuizNo:_,correct:d,studentAnswer:j,answerCount:S,isEnabledPenalty:S>=b?!0:void 0}:w={mobile:y,studyId:f,studentHistoryId:p,bookType:h,step:`${g}`,quizId:m,quizNo:o,currentQuizNo:_,correct:d,studentAnswer:j,answerCount:S};return w},makeUserPartialAnswerData:(y,f,p,h,g,m,o,_,d,j,S,b,N,L,C,B,E,w)=>{let k;if(_+1>L)if(C){const A=l(B,L,N);k={mobile:y,studyId:f,studentHistoryId:p,bookType:h,step:`${g}`,quizId:m,quizNo:o,currentQuizNo:_,correct:d,studentAnswer:j,partialRecord:S,answerCount:b,isLastQuiz:!0,score:A,isFinishStudy:w}}else if(b>=N){const A=l(B,L,N);k={mobile:y,studyId:f,studentHistoryId:p,bookType:h,step:`${g}`,quizId:m,quizNo:o,currentQuizNo:_,correct:d,studentAnswer:j,partialRecord:S,answerCount:b,isLastQuiz:!0,score:A,isEnabledPenalty:E,isFinishStudy:w}}else k={mobile:y,studyId:f,studentHistoryId:p,bookType:h,step:`${g}`,quizId:m,quizNo:o,currentQuizNo:_,correct:d,studentAnswer:j,partialRecord:S,answerCount:b};else k={mobile:y,studyId:f,studentHistoryId:p,bookType:h,step:`${g}`,quizId:m,quizNo:o,currentQuizNo:_,correct:d,studentAnswer:j,partialRecord:S,answerCount:b};return k},resetStudentAnswer:()=>{i([])}}},ki=(t,i)=>{let n=[];return t.map(s=>{n.push({quizNo:s.CurrentQuizNo,maxCount:i,answerCount:s.AnswerCount,ox:s.OX==="1"})}),n},Ii=(t,i)=>{let n=[],s=1;return t.map(a=>{a.StudentAnswer.split(",").map(l=>{const u=l.charAt(l.length-1);n.push({quizNo:s++,maxCount:i,answerCount:l.split("").length,ox:u==="1"})})}),n};function ke(){const[t,i]=c.useState(""),n=c.useRef(new Audio);n.current.autoplay=!0;const s=n.current,a=c.useRef();c.useEffect(()=>{if(t==="playing"||t==="endFn"){const x=()=>{console.log("audio canplaythrough"),s.play()};s.addEventListener("canplaythrough",x);const y=()=>{t==="endFn"?a.current&&a.current():i("")};return s.addEventListener("ended",y),()=>{console.log("return handler"),s.removeEventListener("canplaythrough",x),s.removeEventListener("ended",y),i(""),u()}}},[t]);const l=(x,y)=>{s.src=x,y?(a.current=y,i("endFn")):i("playing")},u=()=>{s.pause(),s.src="",s.currentTime=0,i("")};return{playState:t,changePlayState:x=>{i(x)},playAudio:l,stopAudio:u}}let Ws;const fr=t=>{Ws=new Audio(t),(()=>{Ws.play()})()},gr="/public/assets/correct_sound-9efbca1b.mp3",pr="/public/assets/incorrect_sound-3ea1a3ca.mp3";function We(){const[t,i]=c.useState({isActive:!1,isCorrect:!1});return c.useEffect(()=>{t.isActive&&fr(t.isCorrect?gr:pr)},[t]),{bottomPopupState:t,changeBottomPopupState:s=>{i(s)}}}const Fe=()=>{const[t,i]=c.useState(!1);return{isResultShow:t,changeResultShow:s=>{i(s)}}},Q=()=>/Android|iPhone|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),br="_stepIntro_19s00_1",jr="_container_19s00_8",Sr="_stepOrder_19s00_16",zr="_quizType_19s00_24",wr="_comment_19s00_33",Qr="_readingUnit_19s00_43",Cr="_startButton_19s00_50",vr="_revisionIntro_19s00_73",$r="_revisionBoard_19s00_115",Nr="_txtLabel_19s00_128",Tr="_txtCount_19s00_140",Ar="_revisionFreeIntro_19s00_175",kr="_selectBox_19s00_254",Ir="_passButton_19s00_259",Br="_goButton_19s00_281",Is={stepIntro:br,container:jr,stepOrder:Sr,quizType:zr,comment:wr,readingUnit:Qr,startButton:Cr,revisionIntro:vr,revisionBoard:$r,txtLabel:Nr,txtCount:Tr,revisionFreeIntro:Ar,selectBox:kr,passButton:Ir,goButton:Br},Er="_stepIntro_3r5qb_1",Pr="_container_3r5qb_8",Mr="_stepOrder_3r5qb_16",Lr="_quizType_3r5qb_24",qr="_comment_3r5qb_36",Rr="_readingUnit_3r5qb_47",Or="_startButton_3r5qb_54",Fr="_revisionIntro_3r5qb_77",Hr="_revisionBoard_3r5qb_122",Dr="_txtLabel_3r5qb_135",Wr="_txtCount_3r5qb_147",Vr="_revisionFreeIntro_3r5qb_182",Ur="_selectBox_3r5qb_264",Jr="_passButton_3r5qb_270",Kr="_goButton_3r5qb_292",Bs={stepIntro:Er,container:Pr,stepOrder:Mr,quizType:Lr,comment:qr,readingUnit:Rr,startButton:Or,revisionIntro:Fr,revisionBoard:Hr,txtLabel:Dr,txtCount:Wr,revisionFreeIntro:Vr,selectBox:Ur,passButton:Jr,goButton:Kr},Yr=Q(),bt=Yr?Bs:Is;function ve({step:t,quizType:i,comment:n,onStepIntroClozeHandler:s}){const a=Ot();return e.jsx("div",{className:bt.stepIntro,children:e.jsxs("div",{className:`${bt.container} animate__animated animate__bounceInRight`,children:[e.jsx("div",{className:bt.stepOrder,children:t==="R"?"Re Test":`Step${t}`}),e.jsx("div",{className:bt.quizType,children:i}),e.jsx("div",{className:bt.comment,children:n}),e.jsx("div",{className:bt.readingUnit,children:e.jsx("img",{src:`https://wcfresource.a1edu.com/newsystem/image/character/subcharacter/${a}_13.png`,alt:""})}),e.jsx("div",{className:bt.startButton,onClick:s,children:"Start"})]})})}const Gr="/public/assets/icon_play_red-63042177.svg",Xr="/public/assets/icon_stop_gray-683765e6.svg",Zr="/public/assets/icon_heart-248c237d.svg",ec="/public/assets/icon_return-9e97dd23.svg",tc="/public/assets/arrow-right_white-10eaa94b.svg",Ie=({width:t,height:i,isColor:n})=>e.jsx(e.Fragment,{children:n&&e.jsx("img",{src:Gr,width:t,height:i})}),Be=({width:t,height:i,isColor:n})=>e.jsx(e.Fragment,{children:n&&e.jsx("img",{src:Xr,width:t,height:i})}),nc=({width:t,height:i,isColor:n})=>e.jsx(e.Fragment,{children:n&&e.jsx("img",{src:Zr,width:t,height:i})}),$n=({width:t,height:i})=>e.jsx(e.Fragment,{children:e.jsx("img",{src:ec,width:t,height:i})}),sc=({width:t,height:i})=>e.jsx(e.Fragment,{children:e.jsx("img",{src:tc,width:t,height:i})}),ic="_quizTemplate_1fv6z_1",oc="_quizHeader_1fv6z_9",rc="_quizHeaderCol1_1fv6z_23",cc="_quizNumber_1fv6z_27",ac="_attempts_1fv6z_37",uc="_txtL_1fv6z_46",lc="_qMark_1fv6z_51",dc="_quizHeaderCol2_1fv6z_63",_c="_quizTimer_1fv6z_68",mc="_iconTimer_1fv6z_75",xc="_quizHeaderCol3_1fv6z_91",hc="_openMenuButton_1fv6z_96",yc="_quizBody_1fv6z_114",fc="_container_1fv6z_125",gc="_btnDelete_1fv6z_151",Es={quizTemplate:ic,quizHeader:oc,quizHeaderCol1:rc,quizNumber:cc,attempts:ac,txtL:uc,qMark:lc,quizHeaderCol2:dc,quizTimer:_c,iconTimer:mc,quizHeaderCol3:xc,openMenuButton:hc,quizBody:yc,container:fc,btnDelete:gc},pc="_quizTemplate_1oz7u_2",bc="_quizHeader_1oz7u_33",jc="_quizHeaderCol1_1oz7u_47",Sc="_quizNumber_1oz7u_51",zc="_attempts_1oz7u_61",wc="_txtL_1oz7u_70",Qc="_qMark_1oz7u_75",Cc="_quizHeaderCol2_1oz7u_87",vc="_quizTimer_1oz7u_92",$c="_iconTimer_1oz7u_100",Nc="_quizHeaderCol3_1oz7u_113",Tc="_openMenuButton_1oz7u_118",Ac="_quizBody_1oz7u_136",kc="_container_1oz7u_147",Ic="_btnDelete_1oz7u_173",Bi={quizTemplate:pc,quizHeader:bc,quizHeaderCol1:jc,quizNumber:Sc,attempts:zc,txtL:wc,qMark:Qc,quizHeaderCol2:Cc,quizTimer:vc,iconTimer:$c,quizHeaderCol3:Nc,openMenuButton:Tc,quizBody:Ac,container:kc,btnDelete:Ic},Bc=Q(),lt=Bc?Bi:Es;function we({quizNumber:t,totalQuizCnt:i,life:n,timeMin:s,timeSec:a,changeSideMenu:l}){const u=`${s<=9?"0"+s:s}:${a<=9?"0"+a:a}`;return e.jsxs("div",{className:`${lt.quizHeader} animate__animated animate__slideInDown`,children:[e.jsxs("div",{className:lt.quizHeaderCol1,children:[e.jsxs("div",{className:lt.quizNumber,children:[t,e.jsx("span",{style:{fontSize:"16px"},children:"/"}),i,e.jsxs("div",{className:lt.attempts,children:[e.jsx(nc,{isColor:!0,width:18,height:18}),e.jsx("div",{className:lt.txtL,children:n})]})]}),e.jsx("div",{className:lt.qMark})]}),e.jsx("div",{className:lt.quizHeaderCol2,children:e.jsxs("div",{className:lt.quizTimer,children:[e.jsx("div",{className:lt.iconTimer}),u]})}),e.jsx("div",{className:lt.quizHeaderCol3,children:e.jsx("div",{className:lt.openMenuButton,onClick:()=>l(!0)})})]})}const Ec="_study_side_menu_17l6c_1",Pc="_study_side_menu_container_17l6c_9",Mc="_study_side_menu_area_top_17l6c_33",Lc="_close_side_menu_17l6c_38",qc="_btn_delete_17l6c_43",Rc="_book_info_17l6c_52",Oc="_book_code_17l6c_52",Fc="_book_title_17l6c_56",Hc="_label_17l6c_61",Dc="_study_side_menu_area_bottom_17l6c_68",Wc="_btn_exit_17l6c_73",Vc="_txt_17l6c_77",Uc="_screen_block_17l6c_81",Jc="_select_study_menu_17l6c_90",Kc="_select_study_menu_item_17l6c_97",Yc="_on_17l6c_116",Gc="_go_on_17l6c_122",Xc="_completed_17l6c_128",Zc="_ebook_more_activity_17l6c_142",ea="_ebook_more_activity_item_17l6c_146",ta="_study_side_menu_quiz_scoreboard_17l6c_163",na="_step_info_17l6c_163",sa="_step_17l6c_163",ia="_score_info_17l6c_177",oa="_quiz_type_17l6c_177",ra="_score_row_17l6c_181",ca="_header_17l6c_184",aa="_score_col_17l6c_188",se={study_side_menu:Ec,study_side_menu_container:Pc,study_side_menu_area_top:Mc,close_side_menu:Lc,btn_delete:qc,book_info:Rc,book_code:Oc,book_title:Fc,label:Hc,study_side_menu_area_bottom:Dc,btn_exit:Wc,txt:Vc,screen_block:Uc,select_study_menu:Jc,select_study_menu_item:Kc,on:Yc,"move-it":"_move-it_17l6c_1",go_on:Gc,completed:Xc,ebook_more_activity:Zc,ebook_more_activity_item:ea,study_side_menu_quiz_scoreboard:ta,step_info:na,step:sa,score_info:ia,quiz_type:oa,score_row:ra,header:ca,score_col:aa},ua="/public/assets/repeat-627ef06f.svg",Ei="/public/assets/delete-351e7fec.svg",Pi="/public/assets/exite-6d407d36.svg";function la({currentStep:t}){const{studyInfo:i}=c.useContext(_e);return e.jsx(e.Fragment,{children:i.allSteps.map((n,s)=>e.jsxs("div",{className:`${se.step} ${t===n?se.on:""}`,children:[t===n?"Step":"",n]},`step-header-${s}`))})}function da({maxAnswerCount:t}){const i=["1st","2nd","3rd","th"];let n=[];for(let s=0;s<t;s++)n.push(e.jsx("div",{className:`${se.score_col}`,children:i[s]},`col-header-side-menu-${s}`));return e.jsxs("div",{className:`${se.score_row} ${se.header}`,children:[e.jsx("div",{className:`${se.score_col}`,children:"Q"}),n]})}const _a="/public/assets/icon_score_item_correct-30152e7d.svg",Vs="/public/assets/icon_score_item_incorrect-c4ad3860.svg",ma=({maxAnswerCount:t,scoreBoardData:i})=>{let n=[];if(i){for(let s=1;s<=t;s++)s<i.answerCount?n.push(e.jsx("div",{className:`${se.score_col}`,children:e.jsx("img",{src:Vs,alt:""})})):s===i.answerCount?i.ox?n.push(e.jsx("div",{className:`${se.score_col}`,children:e.jsx("img",{src:_a,alt:""})})):n.push(e.jsx("div",{className:`${se.score_col}`,children:e.jsx("img",{src:Vs,alt:""})})):n.push(e.jsx("div",{className:`${se.score_col}`}));return n}else{for(let s=0;s<t;s++)n.push(e.jsx("div",{className:`${se.score_col}`}));return n}};function xa({quizLength:t,maxAnswerCount:i,scoreBoardData:n}){let s=[];for(let a=0;a<t;a++)s.push(e.jsxs("div",{className:`${se.score_row}`,children:[e.jsx("div",{className:`${se.score_col}`,children:a+1}),e.jsx(ma,{maxAnswerCount:i,scoreBoardData:n[a]})]},`smsbr-${a}`));return e.jsx(e.Fragment,{children:s})}function ha({currentStep:t,currentStepType:i,quizLength:n,maxAnswerCount:s,scoreBoardData:a}){return e.jsxs("div",{className:se.study_side_menu_quiz_scoreboard,children:[e.jsx("div",{className:se.step_info,children:e.jsx(la,{currentStep:t})}),e.jsxs("div",{className:se.score_info,children:[e.jsx("div",{className:se.quiz_type,children:i}),i!=="Vocabulary Practice"&&e.jsxs(e.Fragment,{children:[e.jsx(da,{maxAnswerCount:s}),e.jsx("div",{children:e.jsx(xa,{quizLength:n,maxAnswerCount:s,scoreBoardData:a})})]})]})]})}function Qe({isSideOpen:t,currentStep:i,currentStepType:n,quizLength:s,maxAnswerCount:a,scoreBoardData:l,changeSideMenu:u}){const{bookInfo:r,handler:x}=c.useContext(_e),[y,f]=c.useState("animate__fadeIn"),[p,h]=c.useState();c.useEffect(()=>{f("animate__fadeIn"),h("animate__slideInRight")},[t]);const g=()=>{f("animate__fadeOut"),h("animate__slideOutRight"),setTimeout(()=>{u(!1)},300)};return e.jsx(e.Fragment,{children:t&&e.jsxs("div",{id:"study-side-menu",className:`${se.study_side_menu} ${y}`,children:[e.jsxs("div",{id:"study-side-menu-container",className:`${se.study_side_menu_container} ${p}`,children:[e.jsxs("div",{className:se.study_side_menu_area_top,children:[e.jsx("div",{className:se.close_side_menu,children:e.jsx("div",{className:se.btn_delete,onClick:()=>{g()},children:e.jsx("img",{src:Ei,alt:""})})}),e.jsxs("div",{className:se.book_info,children:[e.jsx("div",{className:se.book_code,children:r.BookCode}),e.jsx("div",{className:se.book_title,children:r.Title})]}),r.BookCode.includes("EB")&&e.jsx("div",{className:se.select_study_menu,children:e.jsxs("div",{className:`${se.select_study_menu_item}`,onClick:()=>{x.changeView("story")},children:[e.jsx("img",{src:ua,alt:""}),"다시 읽기",e.jsxs("div",{className:"pyro",children:[e.jsx("div",{className:"before"}),e.jsx("div",{className:"after"})]})]})}),e.jsx(ha,{currentStep:i,currentStepType:n,quizLength:s,maxAnswerCount:a,scoreBoardData:l})]}),e.jsx("div",{className:se.study_side_menu_area_bottom,children:e.jsxs("div",{className:se.btn_exit,onClick:()=>{try{window.onExitStudy()}catch{location.replace("/")}},children:[e.jsx("img",{src:Pi,alt:""}),e.jsx("div",{className:"txt",children:"나가기"})]})})]}),e.jsx("div",{className:se.screen_block,onClick:()=>g()})]})})}const ya=Q(),Us=ya?Bi:Es;function Ce({children:t}){return e.jsx("div",{className:`${Us.quizBody} animate__animated animate__fadeIn`,children:e.jsx("div",{className:Us.container,children:t})})}function $e({typeCSS:t,containerCSS:i,children:n}){return e.jsx("div",{className:`${t}`,children:e.jsx("div",{className:`${i}`,children:n})})}const fa="_correctPopup_10dqy_1",ga="_readingUnitArea_10dqy_16",pa="_txtL_10dqy_26",ba="_incorrectPopup_10dqy_38",ja="_screenBlock_10dqy_75",Sa={correctPopup:fa,readingUnitArea:ga,txtL:pa,incorrectPopup:ba,screenBlock:ja},za="_correctPopup_4ircx_1",wa="_readingUnitArea_4ircx_15",Qa="_txtL_4ircx_25",Ca="_incorrectPopup_4ircx_38",va="_screenBlock_4ircx_75",$a={correctPopup:za,readingUnitArea:wa,txtL:Qa,incorrectPopup:Ca,screenBlock:va},Na=Q(),Ht=Na?$a:Sa;function Ve({bottomPopupState:t}){const i=Ot();return e.jsx(e.Fragment,{children:t.isActive&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`${t.isCorrect?Ht.correctPopup:Ht.incorrectPopup}  animate__animated animate__slideInUp`,children:e.jsxs("div",{className:Ht.readingUnitArea,children:[e.jsx("div",{className:Ht.txtL,children:t.isCorrect?"Correct!":"Oops..."}),e.jsx("img",{src:`https://wcfresource.a1edu.com/newsystem/image/character/subcharacter/${i}_${t.isCorrect?"08":"09"}.png`,alt:"",className:`animate__animated ${t.isCorrect?"animate__tada":"animate__pulse"}`})]})}),e.jsx("div",{className:Ht.screenBlock})]})})}const Ta="_testResult_1k9sn_1",Aa="_scoreBoard_1k9sn_9",ka="_score_1k9sn_9",Ia="_count1_1k9sn_26",Ba="_count3_1k9sn_29",Ea="_wrongAnswers_1k9sn_44",Pa="_title_1k9sn_51",Ma="_quizQuestion_1k9sn_62",La="_questionSentence_1k9sn_69",qa="_answers_1k9sn_72",Ra="_correctAnswer_1k9sn_79",Oa="_txtL_1k9sn_86",Fa="_correctAnswerNum_1k9sn_89",Ha="_quizAnswer_1k9sn_99",Da="_label_1k9sn_110",Wa="_correctIcon_1k9sn_115",Va="_incorrectIcon_1k9sn_123",Ua="_wrongAnswer_1k9sn_44",Ja="_quizType_1k9sn_142",Ka="_totalScoreContainer_1k9sn_151",Ya="_totalScore_1k9sn_151",Ga="_container_1k9sn_172",Xa="_readingUnit_1k9sn_193",Za="_passmark_1k9sn_199",eu="_board1_1k9sn_208",tu="_correctScore_1k9sn_214",nu="_number_1k9sn_228",su="_incorrectScore_1k9sn_232",iu="_board2_1k9sn_250",ou="_row_1k9sn_256",ru="_nextButton_1k9sn_268",cu="_shadow_1k9sn_1",au="_submitRevision_1k9sn_300",uu="_stepOrder_1k9sn_315",lu="_comment_1k9sn_337",du="_revisionBoard_1k9sn_347",_u="_txtLabel_1k9sn_360",mu="_txtCount_1k9sn_372",xu="_selectBox_1k9sn_384",hu="_revisionDone_1k9sn_389",yu="_noButton_1k9sn_392",fu="_yesButton_1k9sn_414",gu="_heartbeat_1k9sn_437",pu="_btnDelete_1k9sn_510",bu="_quizEndingPass_1k9sn_525",ju="_groupGoodJob_1k9sn_551",Su="_imgUnit_1k9sn_560",zu="_imgPointCoin_1k9sn_568",wu="_txtAchivePoint_1k9sn_581",Qu="_imgGoodJobRibbon_1k9sn_587",Cu="_imgConfetti_1k9sn_595",vu="_groupScore_1k9sn_606",$u="_txtMessage_1k9sn_626",Nu="_quizEndingFail_1k9sn_631",Tu="_groupTryAgin_1k9sn_657",Au="_imgTryAgainRibbon_1k9sn_674",_t={testResult:Ta,scoreBoard:Aa,score:ka,count1:Ia,count3:Ba,wrongAnswers:Ea,title:Pa,quizQuestion:Ma,questionSentence:La,answers:qa,correctAnswer:Ra,txtL:Oa,correctAnswerNum:Fa,quizAnswer:Ha,label:Da,correctIcon:Wa,incorrectIcon:Va,wrongAnswer:Ua,quizType:Ja,totalScoreContainer:Ka,totalScore:Ya,container:Ga,readingUnit:Xa,passmark:Za,board1:eu,correctScore:tu,number:nu,incorrectScore:su,board2:iu,row:ou,nextButton:ru,shadow:cu,submitRevision:au,stepOrder:uu,comment:lu,revisionBoard:du,txtLabel:_u,txtCount:mu,selectBox:xu,revisionDone:hu,noButton:yu,yesButton:fu,heartbeat:gu,btnDelete:pu,quizEndingPass:bu,groupGoodJob:ju,imgUnit:Su,imgPointCoin:zu,txtAchivePoint:wu,imgGoodJobRibbon:Qu,imgConfetti:Cu,groupScore:vu,txtMessage:$u,quizEndingFail:Nu,groupTryAgin:Tu,imgTryAgainRibbon:Au},ku="_testResult_g0si4_1",Iu="_scoreBoard_g0si4_10",Bu="_score_g0si4_10",Eu="_count1_g0si4_27",Pu="_count3_g0si4_30",Mu="_wrongAnswers_g0si4_45",Lu="_title_g0si4_52",qu="_quizQuestion_g0si4_64",Ru="_questionSentence_g0si4_71",Ou="_answers_g0si4_74",Fu="_correctAnswer_g0si4_81",Hu="_txtL_g0si4_88",Du="_correctAnswerNum_g0si4_91",Wu="_quizAnswer_g0si4_101",Vu="_label_g0si4_112",Uu="_correctIcon_g0si4_117",Ju="_incorrectIcon_g0si4_125",Ku="_wrongAnswer_g0si4_45",Yu="_quizType_g0si4_144",Gu="_totalScoreContainer_g0si4_153",Xu="_totalScore_g0si4_153",Zu="_container_g0si4_174",el="_readingUnit_g0si4_195",tl="_passmark_g0si4_201",nl="_board1_g0si4_210",sl="_correctScore_g0si4_216",il="_number_g0si4_230",ol="_incorrectScore_g0si4_234",rl="_board2_g0si4_252",cl="_row_g0si4_258",al="_nextButton_g0si4_270",ul="_shadow_g0si4_1",ll="_submitRevision_g0si4_302",dl="_stepOrder_g0si4_316",_l="_comment_g0si4_338",ml="_revisionBoard_g0si4_348",xl="_txtLabel_g0si4_361",hl="_txtCount_g0si4_373",yl="_selectBox_g0si4_385",fl="_revisionDone_g0si4_391",gl="_noButton_g0si4_394",pl="_yesButton_g0si4_416",bl="_heartbeat_g0si4_439",jl="_btnDelete_g0si4_512",Sl="_quizEndingPass_g0si4_527",zl="_groupGoodJob_g0si4_553",wl="_imgUnit_g0si4_562",Ql="_imgPointCoin_g0si4_570",Cl="_txtAchivePoint_g0si4_583",vl="_imgGoodJobRibbon_g0si4_589",$l="_imgConfetti_g0si4_597",Nl="_groupScore_g0si4_608",Tl="_txtMessage_g0si4_628",Al="_quizEndingFail_g0si4_633",kl="_groupTryAgin_g0si4_659",Il="_imgTryAgainRibbon_g0si4_676",mt={testResult:ku,scoreBoard:Iu,score:Bu,count1:Eu,count3:Pu,wrongAnswers:Mu,title:Lu,quizQuestion:qu,questionSentence:Ru,answers:Ou,correctAnswer:Fu,txtL:Hu,correctAnswerNum:Du,quizAnswer:Wu,label:Vu,correctIcon:Uu,incorrectIcon:Ju,wrongAnswer:Ku,quizType:Yu,totalScoreContainer:Gu,totalScore:Xu,container:Zu,readingUnit:el,passmark:tl,board1:nl,correctScore:sl,number:il,incorrectScore:ol,board2:rl,row:cl,nextButton:al,shadow:ul,submitRevision:ll,stepOrder:dl,comment:_l,revisionBoard:ml,txtLabel:xl,txtCount:hl,selectBox:yl,revisionDone:fl,noButton:gl,yesButton:pl,heartbeat:bl,btnDelete:jl,quizEndingPass:Sl,groupGoodJob:zl,imgUnit:wl,imgPointCoin:Ql,txtAchivePoint:Cl,imgGoodJobRibbon:vl,imgConfetti:$l,groupScore:Nl,txtMessage:Tl,quizEndingFail:Al,groupTryAgin:kl,imgTryAgainRibbon:Il},Bl="5.7.11",El=25,Pl=0,Ml=51,Ll=200,ql=200,Rl="Composition 1",Ol=0,Fl=[],Hl=[{ddd:0,ind:1,ty:4,nm:"Calque de forme 3",parent:2,sr:1,ks:{o:{a:1,k:[{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:6,s:[0]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:15,s:[100]},{i:{x:[.833],y:[.833]},o:{x:[.167],y:[.167]},t:35,s:[100]},{t:44,s:[0]}],ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[-1.157,-86.663,0],ix:2,l:2},a:{a:0,k:[-.062,56.562,0],ix:1,l:2},s:{a:0,k:[66.667,66.667,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[-7,52.375],[-.125,60.75],[6.875,52.5]],c:!1},ix:2},nm:"TracÃÂ© 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[1,.96862745098,.921568627451,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Contour 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.180392156863,.117647058824,.03137254902,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fond 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transformer "}],nm:"Forme 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:251,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Calque de forme 2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:0,y:1},o:{x:.333,y:0},t:0,s:[100,75.954,0],to:[0,0,0],ti:[0,0,0]},{i:{x:.667,y:1},o:{x:1,y:0},t:25,s:[100,122.354,0],to:[0,0,0],ti:[0,0,0]},{t:50,s:[100,75.954,0]}],ix:2,l:2},a:{a:0,k:[-1.115,-87.115,0],ix:1,l:2},s:{a:1,k:[{i:{x:[0,0,.667],y:[1,1,1]},o:{x:[.333,.333,.333],y:[0,0,0]},t:0,s:[28,28,100]},{i:{x:[.667,.667,.667],y:[1,1,1]},o:{x:[.912,.912,.333],y:[0,0,0]},t:25,s:[60,60,100]},{t:50,s:[28,28,100]}],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{d:1,ty:"el",s:{a:0,k:[17.77,17.77],ix:2},p:{a:0,k:[0,0],ix:3},nm:"TracÃÂ© d'ellipse 1",mn:"ADBE Vector Shape - Ellipse",hd:!1},{ty:"st",c:{a:0,k:[.180392156863,.117647058824,.03137254902,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:0,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Contour 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.180392156863,.117647058824,.03137254902,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fond 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[-1.115,-87.115],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transformer "}],nm:"Ellipse 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:251,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Calque de forme 1",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[100,100,0],ix:2,l:2},a:{a:0,k:[-2,-7.5,0],ix:1,l:2},s:{a:0,k:[40,24.4,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-2,-102],[-2,87]],c:!1},ix:2},nm:"TracÃÂ© 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[.180392156863,.117647058824,.03137254902,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:2,lj:1,ml:4,bm:0,nm:"Contour 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[.914909991096,.9407260072,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fond 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transformer "}],nm:"Forme 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:0,op:251,st:0,bm:0}],Dl=[],Wl={v:Bl,fr:El,ip:Pl,op:Ml,w:Ll,h:ql,nm:Rl,ddd:Ol,assets:Fl,layers:Hl,markers:Dl};function Mi(){const t={loop:!0,autoplay:!0,animationData:Wl,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}};return e.jsx(e.Fragment,{children:e.jsx(ao,{options:t,height:300,width:300})})}function W({height:t}){return e.jsx("div",{style:{height:`${t}px`}})}const Vl=Q(),Tn=Vl?mt:_t;function Ul({studentAnswer:t,quizAnswerCount:i}){let n=0,s=[],a=[];return t.map(l=>{n!==l.quizNo&&(n=l.quizNo,a.push(e.jsx("div",{children:n})));for(let u=1;u<=i;u++)u<l.answerCount?a.push(e.jsx("div",{children:"X"})):u===l.answerCount?l.ox?a.push(e.jsx("div",{children:"O"})):a.push(e.jsx("div",{children:"X"})):a.push(e.jsx("div",{}));s.push(e.jsx("div",{className:`${Tn.score} ${i===3?Tn.count3:i===1?Tn.count1:""}`,children:a},`rows-result-${n}`)),a=[]}),e.jsx(e.Fragment,{children:s})}const Jl=Q(),An=Jl?mt:_t;function Kl({quizAnswerCount:t}){const i=["1st","2nd","3rd","th"];let n=[];for(let s=0;s<t;s++)n.push(e.jsx("div",{children:i[s]},`col-header-test-result-${s}`));return e.jsxs("div",{className:`${An.row} ${t===3?An.count3:t===1?An.count1:""}`,children:[e.jsx("div",{children:"Q"}),n]})}const Yl=Q(),Gl=Yl?mt:_t;function Li({quizAnswerCount:t,studentAnswer:i}){return e.jsxs("div",{className:Gl.scoreBoard,children:[e.jsx(Kl,{quizAnswerCount:t}),e.jsx(Ul,{studentAnswer:i,quizAnswerCount:t})]})}const qi=Q(),De=qi?mt:_t;function Je({step:t,quizType:i,quizAnswerCount:n,studentAnswer:s,passMark:a,onFinishActivity:l}){const u=Ot();let r=0,x=0,y=0;const f=100/s.length;return s.map(p=>{if(p.ox)switch(x++,p.answerCount){case 1:r+=1*f;break;case 2:r+=.5*f;break;case 3:r+=.25*f;break}else p.answerCount>=n&&y++}),e.jsxs("div",{className:De.testResult,children:[e.jsxs("div",{className:De.quizType,children:["Step",t,". ",i]}),e.jsxs("div",{className:De.totalScoreContainer,children:[e.jsx("div",{className:De.txtL,children:"SCORE: "}),e.jsx("div",{className:`${De.totalScore} ${De.heartbeat}`,children:Math.round(r)})]}),e.jsxs("div",{className:De.container,children:[e.jsxs("div",{className:`${De.readingUnit} animate__animated animate__jackInTheBox`,children:[e.jsx("img",{src:`https://wcfresource.a1edu.com/newsystem/image/character/subcharacter/${u}_10.png`,alt:""}),e.jsx("div",{style:{position:"relative"},children:e.jsx("div",{style:{position:"absolute",right:qi?"-180px":"-220px",bottom:"-50px"},children:e.jsx(Mi,{})})})]}),a&&e.jsxs("div",{className:De.passmark,children:["Passmark: ",a]}),e.jsxs("div",{className:`${De.board1} animate__animated animate__fadeIn`,children:[e.jsxs("div",{className:De.correctScore,children:[e.jsx("div",{className:De.title,children:"correct"}),e.jsx("div",{className:De.number,children:x})]}),e.jsxs("div",{className:De.incorrectScore,children:[e.jsx("div",{className:De.title,children:"incorrect"}),e.jsx("div",{className:De.number,children:y})]})]}),e.jsx("div",{className:De.board2,children:e.jsx(Li,{quizAnswerCount:n,studentAnswer:s})}),e.jsx(W,{height:50})]}),e.jsx("div",{className:De.nextButton,onClick:()=>l(),children:"Next"})]})}const Xl=Q(),kn=Xl?dt:ut;function Zl({index:t,example:i,checkAnswer:n}){return e.jsxs("div",{className:`${kn.textCard}`,onClick:s=>n(s.currentTarget,i.Text),children:[e.jsx("div",{className:kn.cardNumber,children:Number(t+1)}),e.jsx("div",{className:kn.awnserText,children:i.Text})]})}const ed=Q(),Js=ed?dt:ut;function td({exampleData:t,checkAnswer:i}){return e.jsx("div",{className:Js.answers,children:e.jsx("div",{className:Js.container,children:t.map((n,s)=>e.jsx(Zl,{index:s,example:n,checkAnswer:i}))})})}const nd=Q(),Ks=nd?dt:ut;function sd({playState:t,playSentence:i}){return e.jsxs("div",{className:Ks.wordPlayButton,onClick:()=>i(),children:[t==="playing"?e.jsx(Be,{isColor:!0,width:34,height:34}):e.jsx(Ie,{isColor:!0,width:34,height:34}),e.jsx("div",{className:Ks.txtL,children:"Playback"})]})}const id=Q(),od=id?dt:ut;function rd({blankRef:t,correctAnswer:i}){return e.jsx("span",{ref:t,className:`${od.answerBox}`,children:t.current&&t.current.classList.length>1&&i})}const cd=Q(),ad=cd?dt:ut;function ud({blankRef:t,question:i,correctAnswer:n}){return e.jsx("div",{className:ad.questionBox,children:i.split(" ").map((s,a)=>s.includes("┒")?vn(s,"┒",()=>e.jsx(rd,{blankRef:t,correctAnswer:n})):e.jsx("span",{children:s}))})}const ld="_wordPlayButton_167cv_1",dd="_txtL_167cv_16",_d="_trueSentencePopup_167cv_28",md="_title_167cv_31",xd="_container_167cv_36",hd="_sentence_167cv_50",yd="_nextButton_167cv_56",fd={wordPlayButton:ld,txtL:dd,trueSentencePopup:_d,title:md,container:xd,sentence:hd,nextButton:yd},gd="_wordPlayButton_csjet_1",pd="_txtL_csjet_16",bd="_trueSentencePopup_csjet_28",jd="_title_csjet_31",Sd="_container_csjet_36",zd="_sentence_csjet_50",wd="_nextButton_csjet_57",Qd={wordPlayButton:gd,txtL:pd,trueSentencePopup:bd,title:jd,container:Sd,sentence:zd,nextButton:wd},Cd=Q(),jt=Cd?Qd:fd;function vd({playState:t,sentence:i,changeCorrectSentenceState:n,playSentence:s}){return e.jsxs("div",{className:jt.trueSentencePopup,children:[e.jsx("div",{className:jt.title,children:"Correct Sentence"}),e.jsxs("div",{className:jt.container,children:[e.jsxs("div",{className:jt.wordPlayButton,onClick:()=>s(),children:[t==="playing"?e.jsx(Be,{isColor:!0,width:24,height:24}):e.jsx(Ie,{isColor:!0,width:24,height:24}),e.jsx("div",{className:jt.txtL,children:"Playback"})]}),e.jsx("div",{className:jt.sentence,children:i})]}),e.jsx("div",{className:jt.nextButton,onClick:()=>n(!1),children:"Next"})]})}const Kt="Cloze Test",ms=Q(),yt=ms?dt:ut;function $d(t){const{bookInfo:i,handler:n}=c.useContext(_e),s=t.currentStep,a=je(()=>{z()}),l=Ye(),[u,r]=c.useState("animate__bounceInRight"),{isStepIntro:x,closeStepIntro:y}=be(),{isResultShow:f,changeResultShow:p}=Fe(),[h,g]=c.useState(!1),m=c.useRef(null),{quizState:o,changeQuizState:_}=Ae(),[d,j]=Se(uo,t,s),[S,b]=c.useState(1),{scoreBoardData:N,setStudentAnswers:L,addStudentAnswers:C,makeUserAnswerData:B}=ze(),[E,w]=c.useState([]),[k,A]=c.useState(0),[V,F]=c.useState(0),[q,H]=c.useState(!1),{bottomPopupState:$,changeBottomPopupState:R}=We(),{playState:ee,playAudio:Z,stopAudio:U}=ke();if(c.useEffect(()=>{!x&&d&&(a.setup(d.QuizTime,!0),_("studying"))},[x]),c.useEffect(()=>{if(d){const[O,G]=Ue(j,d.QuizAnswerCount);A(G),F(G),w(ue.shuffle(d.Quiz[O-1].Examples)),L(j,d.QuizAnswerCount),b(O)}},[d]),c.useEffect(()=>{d&&(U(),q?Z(d.Quiz[S-1].Question.Sound):S+1>d.Quiz.length?p(!0):b(S+1))},[q]),c.useEffect(()=>{!x&&!f&&d&&(a.setup(d.QuizTime,!0),F(0),A(0),w(ue.shuffle(d.Quiz[S-1].Examples)),_("studying"))},[S]),c.useEffect(()=>{o==="studying"&&d&&!x&&!f&&Z(d.Quiz[S-1].Question.Sound)},[o]),!d)return e.jsx(e.Fragment,{children:"Loading..."});const D=async(O,G="")=>{var le,ce;try{_("checking"),a.stop();const de=d.Quiz[S-1].Examples[0].Text,X=de===G,Y={quizNo:S,maxCount:d.QuizAnswerCount,answerCount:k+1,ox:X},xe=B("",t.studyId,t.studentHistoryId,t.bookType,s,d.Quiz[S-1].QuizId,d.Quiz[S-1].QuizNo,S,de,G,k+1,d.QuizAnswerCount,d.Quiz.length,X,Y,void 0,t.lastStep===s);if(o==="studying"){const J=await ge(xe);Number(J.result)===0&&(J.resultMessage&&(n.finishStudy={id:Number(J.result),cause:JSON.stringify(J.resultMessage)}),X?(l.play(O,[yt.correct,"animate__fadeIn"]),(le=m.current)==null||le.classList.add(yt.correctAnswer)):(l.play(O,[yt.incorrect,"animate__headShake"]),(ce=m.current)==null||ce.classList.add(yt.incorrectAnswer)),C(Y),X||F(V+1),A(k+1),v(X,O))}}catch(de){console.log(de)}},v=(O,G)=>{R({isActive:!0,isCorrect:O}),setTimeout(()=>{R({isActive:!1,isCorrect:!1}),i.BookLevel.includes("1")?S+1>d.Quiz.length?p(!0):b(S+1):M(!0),l.remove(G,[yt.correct,yt.incorrect,"animate__fadeIn","animate__headShake"])},2e3)},z=async()=>{},T=()=>{ee===""?Z(d.Quiz[S-1].Question.Sound):U()},M=O=>{H(O)},P=O=>{g(O)};return e.jsx(e.Fragment,{children:x?e.jsx("div",{className:`animate__animated ${u}`,onAnimationEnd:()=>{u==="animate__bounceOutLeft"&&y()},children:e.jsx(ve,{step:s,quizType:Kt,comment:"문장을 읽고 빈칸에 들어갈 알맞은 답을 고르세요.",onStepIntroClozeHandler:()=>{r("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:f?e.jsx(Je,{step:s,quizType:Kt,quizAnswerCount:d.QuizAnswerCount,studentAnswer:N,onFinishActivity:t.onFinishActivity}):e.jsxs(e.Fragment,{children:[e.jsx(we,{quizNumber:S,totalQuizCnt:Object.keys(d.Quiz).length,life:d.QuizAnswerCount-V,timeMin:a.time.timeMin,timeSec:a.time.timeSec,changeSideMenu:P}),e.jsx("div",{className:`${yt.comment} animate__animated animate__fadeInLeft`,children:Kt}),e.jsx(Ce,{children:q?e.jsx(vd,{playState:ee,sentence:d.Quiz[S-1].Question.Text.replace("┒",d.Quiz[S-1].Examples[0].Text),changeCorrectSentenceState:M,playSentence:T}):e.jsxs($e,{typeCSS:yt.clozeTest1,containerCSS:yt.container,children:[ms?e.jsx(e.Fragment,{}):e.jsx(W,{height:0}),e.jsx(sd,{playState:ee,playSentence:T}),e.jsx(ud,{blankRef:m,question:d.Quiz[S-1].Question.Text,correctAnswer:d.Quiz[S-1].Examples[0].Text}),ms?e.jsx(W,{height:20}):e.jsx(W,{height:30}),e.jsx(td,{exampleData:E,checkAnswer:D})]})}),e.jsx(Qe,{isSideOpen:h,currentStep:s,currentStepType:Kt,quizLength:d.Quiz.length,maxAnswerCount:d.QuizAnswerCount,scoreBoardData:N,changeSideMenu:P}),e.jsx(Ve,{bottomPopupState:$})]})})})}const Nd=Q(),Ys=Nd?dt:ut;function Td({playState:t,playSentence:i}){return e.jsxs("div",{className:Ys.wordPlayButton,onClick:()=>i(),children:[t==="playing"||t==="endFn"?e.jsx(Be,{isColor:!0,width:34,height:34}):e.jsx(Ie,{isColor:!0,width:34,height:34}),e.jsx("div",{className:Ys.txtL,children:"Playback"})]})}function Ad({correctText:t,changeInputWidth:i}){const n=c.useRef(null);return c.useEffect(()=>{n.current&&i(n.current.offsetWidth)},[]),e.jsx("span",{ref:n,style:{display:"block",color:"transparent",position:"absolute",top:0,left:0,zIndex:"-1"},children:t})}function kd({correctText:t,changeCurrentInputWidth:i}){const n=c.useRef(null);return c.useEffect(()=>{n.current&&i(n.current.offsetWidth)},[]),e.jsx("span",{ref:n,style:{display:"block",color:"transparent",position:"absolute",top:0,left:0,zIndex:"-1"},children:t})}const Id=Q(),Yt=Id?dt:ut;function Bd({inputRefs:t,quizState:i,inputIndex:n,currentIndex:s,inputValues:a,correctText:l,changeInputValue:u,checkAnswer:r,changeInputIndex:x}){const[y,f]=c.useState(0),[p,h]=c.useState(0),g=b=>{i!=="studying"&&b.preventDefault(),(b.key==="Tab"||b.altKey&&b.key==="Tab")&&(b.preventDefault(),t==null||t.current[s].focus())},m=b=>{b.preventDefault();const N=/^[a-zA-Z-' ]+(?:'){0,1}[a-zA-Z]?$/g;let L=b.currentTarget.value;N.test(L)||(L=L.slice(0,L.length-1)),u(s,L)},o=(b,N)=>{const L=b.currentTarget.value;if(b.key==="Enter"&&L!=="")if(d(t,N)===-1)r();else{const B=_(t,N);x(B)}else if(L===l)if(d(t,N)===-1)x(-1),r();else{const B=_(t,N);x(B)}},_=(b,N)=>b==null?void 0:b.current.findIndex((C,B)=>!a[B].isCorrected&&B>N),d=(b,N)=>b==null?void 0:b.current.findLastIndex((C,B)=>!a[B].isCorrected&&B>N),j=b=>{h(b)},S=b=>{f(b)};return e.jsx("span",{className:`${Yt.answerBox} ${s===n?Yt.currentOrder:""}`,children:s===n?e.jsx(e.Fragment,{children:e.jsxs("span",{className:Yt.currentInput,children:[e.jsx("input",{ref:b=>t.current[n]=b,id:"textFild",style:{width:`${y+4}px`},type:"text",value:a[s].text,onKeyDown:b=>g(b),onChange:b=>m(b),onKeyUp:b=>o(b,s),onCopy:b=>b.preventDefault(),onPaste:b=>b.preventDefault(),onCut:b=>b.preventDefault(),autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",inputMode:"search",autoFocus:!0,tabIndex:-1}),y<=0&&e.jsx(kd,{correctText:l,changeCurrentInputWidth:S})]})}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:Yt.otherInput,children:e.jsx("input",{ref:b=>t.current[n]=b,style:{width:`${p+4}px`},value:a[n].text,disabled:!0})}),p<=0&&e.jsx(Ad,{correctText:l,changeInputWidth:j})]})})}const Ed=Q(),Mt=Ed?dt:ut;function Pd({inputRefs:t,penaltyState:i,inputIndex:n,currentIndex:s,correctText:a,changeInputIndex:l,changePenaltyState:u}){const[r,x]=c.useState(""),[y,f]=c.useState(0),[p,h]=c.useState(0),g=c.useRef(null),m=c.useRef(null),o=b=>{i!=="penalty"&&b.preventDefault(),(b.key==="Tab"||b.altKey&&b.key==="Tab")&&(b.preventDefault(),t.current[s].focus())},_=b=>{b.preventDefault();const N=/^[a-zA-Z-' ]+(?:'){0,1}[a-zA-Z]?$/g;let L=b.currentTarget.value;N.test(L)||(L=L.slice(0,L.length-1)),x(L)},d=(b,N)=>{if(b.currentTarget.value===a)if(S(t,N)===-1)l(-1),u("success");else{const B=j(t,N);l(B)}},j=(b,N)=>b.current.findIndex((C,B)=>(C==null?void 0:C.value)===""||B>N),S=(b,N)=>b.current.findLastIndex((C,B)=>B>N);return c.useEffect(()=>{g.current&&g.current.offsetWidth>0&&f(g.current.offsetWidth),m.current&&m.current.offsetWidth>0&&h(m.current.offsetWidth)}),e.jsx("span",{className:`${Mt.reviewAnswer} ${s===n?Mt.currentOrder:""}`,children:s===n?e.jsxs("span",{children:[e.jsx("span",{className:Mt.currentInput,children:e.jsx("input",{ref:b=>t.current[n]=b,id:"textFild",style:{width:`${y+4}px`},type:"text",value:r,onKeyDown:b=>o(b),onChange:b=>_(b),onKeyUp:b=>d(b,s),onCopy:b=>b.preventDefault(),onPaste:b=>b.preventDefault(),onCut:b=>b.preventDefault(),autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",inputMode:"search",autoFocus:!0,tabIndex:-1})}),e.jsx("div",{ref:g,className:Mt.hintText,children:a})]}):e.jsx(e.Fragment,{children:r===a||i==="success"?e.jsx("span",{style:{color:"#289EE4"},children:a}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:Mt.otherInput,children:e.jsx("input",{ref:b=>t.current[n]=b,style:{width:`${p+4}px`},disabled:!0})}),e.jsx("div",{ref:m,className:Mt.hintText,children:a})]})})})}const Md=Q(),Ld=Md?dt:ut;function qd({inputRefs:t,quizState:i,exampleData:n,currentIndex:s,inputValues:a,penaltyState:l,changeInputValue:u,changeInputIndex:r,checkAnswer:x,changePenaltyState:y}){t.current=[];let f=-1;const p=n.Question.Text.split(" ").map(h=>({text:h,index:h.includes("┒")?++f:0}));return e.jsx("div",{className:Ld.questionBox,children:p.map((h,g)=>h.text.includes("┒")?e.jsx(e.Fragment,{children:l==="none"?vn(h.text,"┒",()=>e.jsx(Bd,{inputRefs:t,quizState:i,inputIndex:h.index,currentIndex:s,inputValues:a,correctText:n.Examples[h.index].Text,changeInputValue:u,checkAnswer:x,changeInputIndex:r},`text-input-${h.index}`)):vn(h.text,"┒",()=>e.jsx(Pd,{inputRefs:t,penaltyState:l,inputIndex:h.index,currentIndex:s,correctText:n.Examples[h.index].Text,changeInputIndex:r,changePenaltyState:y},`penalty-input-${h.index}`))}):e.jsx("span",{children:h.text},`word-${g}`))})}const Gt="Cloze Test",Ri=Q(),Xt=Ri?dt:ut;function Gs(t){const{handler:i}=c.useContext(_e),n=t.currentStep,s=je(()=>{M()}),[a,l]=c.useState("animate__bounceInRight"),{isStepIntro:u,closeStepIntro:r}=be(),{isResultShow:x,changeResultShow:y}=Fe(),[f,p]=c.useState(!1),{quizState:h,changeQuizState:g}=Ae(),[m,o]=Se(lo,t,n),[_,d]=c.useState(1),[j,S]=c.useState([]),{scoreBoardData:b,setStudentAnswers:N,addStudentAnswers:L,makeUserAnswerData:C}=ze(),[B,E]=c.useState(0),[w,k]=c.useState(0),A=c.useRef([]),[V,F]=c.useState([]),[q,H]=c.useState(0),[$,R]=c.useState("none"),{bottomPopupState:ee,changeBottomPopupState:Z}=We(),{playState:U,playAudio:D,stopAudio:v}=ke();if(c.useEffect(()=>{!u&&m&&($==="none"&&(s.setup(m.QuizTime,!0),Y()),g("studying"))},[u]),c.useEffect(()=>{if(m){const[J,oe]=Ue(o,m.QuizAnswerCount);if(o.length>0)if(m.IsEnablePenaltyReview&&o[o.length-1].PenaltyWord!=="")F(new Array(m.Quiz[J-2].Examples.length).fill({text:"",isCorrected:!1})),R("penalty"),E(m.QuizAnswerCount),k(m.QuizAnswerCount),d(o[o.length-1].CurrentQuizNo);else{if(o[J-1]&&o[J-1].CurrentQuizNo===J&&o[J-1].StudentAnswer!==""){const me=o[o.length-1].StudentAnswer.split("/"),te=X(me,J);if(S(o[o.length-1].StudentAnswer.split("/")),te){const he=te.findIndex(xt=>!xt.isCorrected);H(he)}F(te)}else F(new Array(m.Quiz[J-1].Examples.length).fill({text:"",isCorrected:!1}));E(oe),k(oe),d(J)}else E(oe),k(oe),d(J),S(new Array(m.Quiz[J-1].Examples.length).fill("")),F([...X(new Array(m.Quiz[J-1].Examples.length).fill(""),J)]);N(o,m.QuizAnswerCount)}},[m]),c.useEffect(()=>{!u&&!x&&m&&(s.setup(m.QuizTime,!0),Y(),H(0),le(),g("studying"))},[_]),c.useEffect(()=>{h==="studying"&&m&&!u&&!x&&$==="none"&&s.setup(m.QuizTime,!0)},[h]),c.useEffect(()=>{q>-1&&(A!=null&&A.current[q])&&(A==null||A.current[q].focus())},[q]),c.useEffect(()=>{m&&($==="penalty"&&!u?s.stop():$==="success"&&de())},[$]),!m)return e.jsx(e.Fragment,{children:"Loading..."});const z=()=>{let J=[],oe=[];const me=j;for(let te=0;te<(A==null?void 0:A.current.length);te++){const he={example:m.Quiz[_-1].Examples[te].Text,input:A==null?void 0:A.current[te].value,isEqual:m.Quiz[_-1].Examples[te].Text===(A==null?void 0:A.current[te].value)};me[te].length>0?me[te]=me[te].slice(-1)==="1"?me[te]:me[te]+=m.Quiz[_-1].Examples[te].Text===(A==null?void 0:A.current[te].value)?"1":"2":me[te]=m.Quiz[_-1].Examples[te].Text===(A==null?void 0:A.current[te].value)?"1":"2",oe.push(he.example),J.push(he)}return console.log(me),S(me),[J,oe.join("┒"),me.join("/")]},T=J=>!J.find(oe=>!oe.isEqual),M=async()=>{try{if(g("checking"),console.log("??????"),h==="studying"){const[J,oe,me]=z(),te=T(J),he={quizNo:_,maxCount:m.QuizAnswerCount,answerCount:B+1,ox:te},xt=C("",t.studyId,t.studentHistoryId,t.bookType,n,m.Quiz[_-1].QuizId,m.Quiz[_-1].QuizNo,_,oe,me,B+1,m.QuizAnswerCount,m.Quiz.length,te,he,m.IsEnablePenaltyReview,t.lastStep===n);s.stop();const Ze=await ge(xt);Number(Ze.result)===0&&(Ze.resultMessage&&(i.finishStudy={id:Number(Ze.result),cause:JSON.stringify(Ze.resultMessage)}),L(he),te||k(w+1),E(B+1),P(te,J))}}catch(J){console.log(J)}},P=(J,oe)=>{Z({isActive:!0,isCorrect:J}),setTimeout(()=>{if(J)_+1>Object.keys(m.Quiz).length?y(!0):(le(),E(0),k(0),ce("none"),S(new Array(m.Quiz[_+1].Examples.length).fill("")),d(_+1));else{let me=!0,te=0,he=[];A==null||A.current.forEach((xt,Ze)=>{oe[Ze].isEqual||me&&(me=!1,te=Ze),he.push({text:oe[Ze].input,isCorrected:oe[Ze].isEqual})}),F([...he]),B===m.QuizAnswerCount-1?(v(),H(0),ce("penalty")):(s.setup(m.QuizTime,!0),H(te),g("studying"))}Z({isActive:!1,isCorrect:!1})},1500)},O=J=>{H(J)},G=(J,oe)=>{const me=V.map((te,he)=>J===he?{text:oe,isCorrected:te.isCorrected}:{text:te.text,isCorrected:te.isCorrected});F([...me])},le=()=>{m.Quiz[_]&&F([...new Array(m.Quiz[_].Examples.length).fill({text:"",isCorrected:!1})])},ce=J=>{R(J)},de=async()=>{(async()=>{const oe=await ks({mobile:"",bookType:t.bookType,studyId:t.studyId,studentHistoryId:t.studentHistoryId,step:`${n}`,quizId:m.Quiz[_-1].QuizId,isLastQuiz:_+1>m.Quiz.length,isFinishStudy:t.lastStep===n});Number(oe.result)===0&&(v(),_+1>Object.keys(m.Quiz).length?y(!0):(le(),E(0),k(0),S(new Array(m.Quiz[_+1].Examples.length).fill("")),ce("none"),d(_+1)))})()},X=(J,oe)=>{let me=[];for(let te=0;te<J.length;te++){const he={text:J[te].slice(-1)==="1"?m.Quiz[oe-1].Examples[te].Text:"",isCorrected:J[te].slice(-1)==="1"};me.push(he)}return me},Y=J=>{$==="none"?U==="playing"?v():D(m.Quiz[_-1].Question.Sound):$==="success"&&U===""&&D(m.Quiz[_-1].Question.Sound,J)},xe=J=>{p(J)};return e.jsx(e.Fragment,{children:u?e.jsx("div",{className:`animate__animated ${a}`,onAnimationEnd:()=>{a==="animate__bounceOutLeft"&&r()},children:e.jsx(ve,{step:n,quizType:Gt,comment:"문장을 읽고 빈칸에 들어갈 답을 입력하세요.",onStepIntroClozeHandler:()=>{l("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:x?e.jsx(Je,{step:n,quizType:Gt,quizAnswerCount:m.QuizAnswerCount,studentAnswer:b,onFinishActivity:t.onFinishActivity}):e.jsxs(e.Fragment,{children:[e.jsx(we,{quizNumber:_,totalQuizCnt:Object.keys(m.Quiz).length,life:m.QuizAnswerCount-w,timeMin:s.time.timeMin,timeSec:s.time.timeSec,changeSideMenu:xe}),e.jsx("div",{className:`${ut.comment} animate__animated animate__fadeInLeft`,children:Gt}),e.jsx(Ce,{children:e.jsxs($e,{typeCSS:Xt.clozeTest2,containerCSS:Xt.container,children:[Ri?e.jsx(e.Fragment,{}):e.jsx(W,{height:0}),$==="none"?e.jsx(Td,{playState:U,playSentence:Y}):e.jsx("div",{className:Xt.testReview,children:e.jsx("div",{className:Xt.title,children:"Test Review"})}),e.jsx(qd,{inputRefs:A,quizState:h,exampleData:m.Quiz[_-1],currentIndex:q,inputValues:V,penaltyState:$,changeInputValue:G,changeInputIndex:O,checkAnswer:M,changePenaltyState:ce})]})}),e.jsx(Qe,{isSideOpen:f,currentStep:n,currentStepType:Gt,quizLength:m.Quiz.length,maxAnswerCount:m.QuizAnswerCount,scoreBoardData:b,changeSideMenu:xe}),e.jsx(Ve,{bottomPopupState:ee})]})})})}async function Rd(t){const{bookType:i,studyId:n,studentHistoryId:s}=t,l=`study/quiz/listening-activity-1?studentHistoryId=${s}&studyId=${n}&bookType=${i}`;return pe(l,async r=>({ContentsId:Number(r.ContentsId),IsQuizTimeoutIncorrect:!!r.isQuizTimeoutIncorrect,QuizAnswerCount:Number(r.QuizAnswerCount),QuizTime:Number(r.QuizTime),Quiz:r.Quiz.map(x=>({QuizId:x.QuizId.toString(),QuizNo:Number(x.QuizNo),Question:{Text:x.Question.Text,Sound:x.Question.Sound}})),Examples:r.Examples.map(x=>({Text:x.Text,Image:x.Image}))}))}async function Od(t){const{bookType:i,studyId:n,studentHistoryId:s}=t,l=`study/quiz/listening-activity-2?studentHistoryId=${s}&studyId=${n}&bookType=${i}`;return pe(l,async r=>({ContentsId:Number(r.ContentsId),IsQuizTimeoutIncorrect:!!r.isQuizTimeoutIncorrect,QuizAnswerCount:Number(r.QuizAnswerCount),QuizTime:Number(r.QuizTime),Quiz:r.Quiz.map(x=>({QuizId:x.QuizId.toString(),QuizNo:Number(x.QuizNo),Question:{Text:x.Question.Text,Sound:x.Question.Sound}})),Examples:r.Examples.map(x=>({Text:x.Text}))}))}async function Fd(t){const{bookType:i,studyId:n,studentHistoryId:s}=t,l=`study/quiz/listening-activity-3?studentHistoryId=${s}&studyId=${n}&bookType=${i}`;return pe(l,async r=>({ContentsId:Number(r.ContentsId),IsQuizTimeoutIncorrect:!!r.isQuizTimeoutIncorrect,QuizAnswerCount:Number(r.QuizAnswerCount),QuizTime:Number(r.QuizTime),Quiz:r.Quiz.map(x=>({QuizId:x.QuizId.toString(),QuizNo:Number(x.QuizNo),Question:{Text:x.Question.Text,Sound:x.Question.Sound},Examples:x.Examples.map(y=>({Text:y.Text,Image:y.Image}))}))}))}async function Hd(t){const{bookType:i,studyId:n,studentHistoryId:s}=t,l=`study/quiz/listening-activity-4?studentHistoryId=${s}&studyId=${n}&bookType=${i}`;return pe(l,async r=>({ContentsId:Number(r.ContentsId),IsQuizTimeoutIncorrect:!!r.isQuizTimeoutIncorrect,QuizAnswerCount:Number(r.QuizAnswerCount),QuizTime:Number(r.QuizTime),Quiz:r.Quiz.map(x=>({QuizId:x.QuizId.toString(),QuizNo:Number(x.QuizNo),Question:{Text:x.Question.Text,Image:x.Question.Image},Examples:x.Examples.map(y=>({Text:y.Text,Sound:y.Sound}))}))}))}const Dd="_comment_87n0i_1",Wd="_wordPlayButton_87n0i_20",Vd="_txtL_87n0i_35",Ud="_wordPlayButton2_87n0i_46",Jd="_cardNumber_87n0i_65",Kd="_listeningActivity1_87n0i_80",Yd="_container_87n0i_80",Gd="_wordCard_87n0i_87",Xd="_done_87n0i_118",Zd="_correct_87n0i_131",e_="_incorrect_87n0i_135",t_="_word_87n0i_20",n_="_wordBlock_87n0i_152",s_="_listeningActivity2_87n0i_164",i_="_listeningActivity3_87n0i_233",o_="_imageCard_87n0i_239",r_="_cardNumberPosition_87n0i_287",c_="_listeningActivity4_87n0i_293",a_="_questionBox_87n0i_298",u_="_soundCard_87n0i_315",l_="_playSoundPosition_87n0i_368",d_="_enterButton_87n0i_374",__="_answers_87n0i_401",et={comment:Dd,wordPlayButton:Wd,txtL:Vd,wordPlayButton2:Ud,cardNumber:Jd,listeningActivity1:Kd,container:Yd,wordCard:Gd,done:Xd,correct:Zd,incorrect:e_,word:t_,wordBlock:n_,listeningActivity2:s_,listeningActivity3:i_,imageCard:o_,cardNumberPosition:r_,listeningActivity4:c_,questionBox:a_,soundCard:u_,playSoundPosition:l_,enterButton:d_,answers:__},m_="_comment_1cesw_1",x_="_wordPlayButton_1cesw_20",h_="_txtL_1cesw_35",y_="_wordPlayButton2_1cesw_46",f_="_cardNumber_1cesw_65",g_="_listeningActivity1_1cesw_80",p_="_container_1cesw_80",b_="_wordCard_1cesw_87",j_="_done_1cesw_113",S_="_correct_1cesw_120",z_="_incorrect_1cesw_124",w_="_word_1cesw_20",Q_="_wordBlock_1cesw_141",C_="_listeningActivity2_1cesw_153",v_="_listeningActivity3_1cesw_215",$_="_imageCard_1cesw_221",N_="_cardNumberPosition_1cesw_261",T_="_listeningActivity4_1cesw_267",A_="_questionBox_1cesw_272",k_="_soundCard_1cesw_295",I_="_playSoundPosition_1cesw_343",B_="_enterButton_1cesw_349",E_="_answers_1cesw_376",tt={comment:m_,wordPlayButton:x_,txtL:h_,wordPlayButton2:y_,cardNumber:f_,listeningActivity1:g_,container:p_,wordCard:b_,done:j_,correct:S_,incorrect:z_,word:w_,wordBlock:Q_,listeningActivity2:C_,listeningActivity3:v_,imageCard:$_,cardNumberPosition:N_,listeningActivity4:T_,questionBox:A_,soundCard:k_,playSoundPosition:I_,enterButton:B_,answers:E_},P_=Q(),Xs=P_?tt:et;function M_({playState:t,onPlay:i}){return e.jsxs("div",{className:Xs.wordPlayButton,onClick:()=>i(),children:[t===""?e.jsx(Ie,{isColor:!0,width:34,height:34}):e.jsx(Be,{isColor:!0,width:34,height:34}),e.jsx("span",{className:Xs.txtL,children:"Playback"})]})}const L_=Q(),Zt=L_?tt:et;function q_({imgSrc:t,text:i,isCorrected:n=!1,onCardAnimationEndHandler:s,onWordAnimationEndHandler:a,checkAnswer:l}){const[u,r]=c.useState(!1),x=()=>{r(!0)};return e.jsxs("div",{className:`animate__animated ${Zt.wordCard} ${u||n?Zt.done:""}`,onClick:y=>{!n&&!u&&l(y.currentTarget,i)},onAnimationEnd:y=>{s(y,x)},children:[e.jsx("img",{src:t}),(n||u)&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`${Zt.word}`,children:i}),e.jsx("div",{className:`${Zt.wordBlock} animate__animated animate__fadeIn`,onAnimationEnd:y=>{a(y,n)}})]})]})}const en="Listening Activity",Oi=Q(),In=Oi?tt:et;function R_(t){const{handler:i}=c.useContext(_e),n=t.currentStep,s=je(()=>{}),a=Ye(),[l,u]=c.useState("animate__bounceInRight"),{isStepIntro:r,closeStepIntro:x}=be(),{isResultShow:y,changeResultShow:f}=Fe(),[p,h]=c.useState(!1),{quizState:g,changeQuizState:m}=Ae(),[o,_]=Se(Rd,t,n),[d,j]=c.useState(1),{scoreBoardData:S,setStudentAnswers:b,addStudentAnswers:N,makeUserAnswerData:L}=ze(),[C,B]=c.useState(""),[E,w]=c.useState([]),[k,A]=c.useState(0),[V,F]=c.useState(0),{bottomPopupState:q,changeBottomPopupState:H}=We(),{playState:$,playAudio:R,stopAudio:ee}=ke();if(c.useEffect(()=>{r||m("studying")},[r]),c.useEffect(()=>{if(o)try{const[M,P]=Ue(_,o.QuizAnswerCount),O=_.map(le=>{var ce;return(ce=o.Quiz.find(de=>le.OX==="1"&&le.QuizNo===de.QuizNo))==null?void 0:ce.Question.Text}),G=o.Examples.slice(0,5).map(le=>({...le,IsCorrected:!!O.find(ce=>ce===le.Text)}));A(P),F(P),B(o.Quiz[M-1].Question.Text),b(_,o.QuizAnswerCount),w(ue.shuffle(G)),j(M)}catch(M){console.log(M)}},[o]),c.useEffect(()=>{!r&&!y&&o&&(B(o.Quiz[d-1].Question.Text),m("studying"))},[d]),c.useEffect(()=>{g==="studying"&&o&&!r&&!y&&(s.setup(o==null?void 0:o.QuizTime,!0),R(o.Quiz[d-1].Question.Sound))},[g]),c.useEffect(()=>{y&&s.stop()},[y]),!o)return e.jsx(e.Fragment,{children:"Loading..."});const Z=async(M,P)=>{m("checking");const O=C===P,G={quizNo:d,maxCount:o.QuizAnswerCount,answerCount:k+1,ox:O},le=L("",t.studyId,t.studentHistoryId,t.bookType,n,o.Quiz[d-1].QuizId,o.Quiz[d-1].QuizNo,d,o.Quiz[d-1].Question.Text,P,k+1,o.QuizAnswerCount,o.Quiz.length,O,G,void 0,t.lastStep===n);if(g==="studying"){const ce=await ge(le);Number(ce.result)===0&&(ce.resultMessage&&(i.finishStudy={id:Number(ce.result),cause:JSON.stringify(ce.resultMessage)}),N(G),O||F(V+1),A(k+1),U(M,O))}},U=(M,P)=>{H({isActive:!0,isCorrect:P}),P?a.play(M,["animate__fadeIn"]):a.play(M,["animate__headShake"])},D=(M,P)=>{const O=M.currentTarget,G=!!a.isContain(O,"animate__fadeIn");setTimeout(()=>{G?P():(a.remove(O,["animate__headShake"]),H({isActive:!1,isCorrect:!1}),k>=o.QuizAnswerCount?(A(0),F(0),d+1>o.Quiz.length?f(!0):j(d+1)):m("studying"))},1500)},v=(M,P)=>{const O=M.currentTarget;a.remove(O,["selected"]),H({isActive:!1,isCorrect:!1}),(!P||P===void 0)&&setTimeout(()=>{A(0),F(0),d+1>o.Quiz.length?f(!0):j(d+1)},1e3)},z=()=>{$===""?R(o.Quiz[d-1].Question.Sound):ee()},T=M=>{h(M)};return e.jsx(e.Fragment,{children:r?e.jsx("div",{className:`animate__animated ${l}`,onAnimationEnd:()=>{l==="animate__bounceOutLeft"&&x()},children:e.jsx(ve,{step:n,quizType:en,comment:"소리를 듣고 알맞은 그림을 고르세요.",onStepIntroClozeHandler:()=>{u("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:y?e.jsx(Je,{step:n,quizType:en,quizAnswerCount:o.QuizAnswerCount,studentAnswer:S,onFinishActivity:t.onFinishActivity}):e.jsxs(e.Fragment,{children:[e.jsx(we,{quizNumber:d,totalQuizCnt:Object.keys(o.Quiz).length,life:o.QuizAnswerCount-V,timeMin:s.time.timeMin,timeSec:s.time.timeSec,changeSideMenu:T}),e.jsx("div",{className:`${In.comment} animate__animated animate__fadeInLeft`,children:en}),e.jsxs(Ce,{children:[e.jsx(M_,{playState:$,onPlay:z}),Oi?e.jsx(W,{height:10}):e.jsx(W,{height:15}),e.jsx($e,{typeCSS:In.listeningActivity1,containerCSS:In.container,children:E.map(M=>e.jsx(q_,{imgSrc:M.Image,text:M.Text,isCorrected:M.IsCorrected,onCardAnimationEndHandler:D,onWordAnimationEndHandler:v,checkAnswer:Z}))}),e.jsx(W,{height:15})]}),e.jsx(Qe,{isSideOpen:p,currentStep:n,currentStepType:en,quizLength:o.Quiz.length,maxAnswerCount:o.QuizAnswerCount,scoreBoardData:S,changeSideMenu:T}),e.jsx(Ve,{bottomPopupState:q})]})})})}const O_=Q(),Zs=O_?tt:et;function F_({playState:t,onPlay:i}){return e.jsxs("div",{className:Zs.wordPlayButton,onClick:()=>i(),children:[t===""?e.jsx(Ie,{isColor:!0,width:34,height:34}):e.jsx(Be,{isColor:!0,width:34,height:34}),e.jsx("span",{className:Zs.txtL,children:"Playback"})]})}const H_=Q(),Bn=H_?tt:et;function D_({text:t,isCorrected:i=!1,checkAnswer:n,onCardAnimationEndHandler:s}){const[a,l]=c.useState(!1),u=()=>{l(!0)};return e.jsx("div",{className:`${Bn.wordCard} animate__animated ${a||i?Bn.done:""}`,onClick:r=>{!a&&!i&&n(r.currentTarget,t)},onAnimationEnd:r=>s(r,u),children:e.jsx("div",{className:Bn.txtL,children:t})})}const tn="Listening Activity",xs=Q(),St=xs?tt:et;function W_(t){const{handler:i}=c.useContext(_e),n=t.currentStep,s=je(()=>{}),a=Ye(),[l,u]=c.useState("animate__bounceInRight"),{isStepIntro:r,closeStepIntro:x}=be(),{isResultShow:y,changeResultShow:f}=Fe(),[p,h]=c.useState(!1),{quizState:g,changeQuizState:m}=Ae(),[o,_]=Se(Od,t,n),{scoreBoardData:d,setStudentAnswers:j,addStudentAnswers:S,makeUserAnswerData:b}=ze(),[N,L]=c.useState([]),[C,B]=c.useState(1),[E,w]=c.useState(0),[k,A]=c.useState(0),{bottomPopupState:V,changeBottomPopupState:F}=We(),{playState:q,playAudio:H,stopAudio:$}=ke();if(c.useEffect(()=>{!r&&o&&(s.setup(o.QuizTime,!0),m("studying"))},[r]),c.useEffect(()=>{if(o)try{const[v,z]=Ue(_,o.QuizAnswerCount),T=_.map(P=>{var O;return(O=o.Quiz.slice(0,6).find(G=>P.OX==="1"&&P.QuizNo===G.QuizNo))==null?void 0:O.Question.Text}),M=o.Examples.slice(0,6).map(P=>({...P,IsCorrected:!!T.find(O=>O===P.Text)}));w(z),A(z),j(_,o.QuizAnswerCount),L(ue.shuffle(M)),B(v)}catch(v){console.log(v)}},[o]),c.useEffect(()=>{!r&&!y&&o&&(w(0),A(0),m("studying"))},[C]),c.useEffect(()=>{g==="studying"&&o&&!r&&!y&&(s.setup(o==null?void 0:o.QuizTime,!0),H(o.Quiz[C-1].Question.Sound))},[g]),!o)return e.jsx(e.Fragment,{children:"Loading..."});const R=async(v,z)=>{m("checking");const T=o.Quiz[C-1].Question.Text===z,M={quizNo:C,maxCount:o.QuizAnswerCount,answerCount:E+1,ox:T},P=b("",t.studyId,t.studentHistoryId,t.bookType,n,o.Quiz[C-1].QuizId,o.Quiz[C-1].QuizNo,C,o.Quiz[C-1].Question.Text,z,E+1,o.QuizAnswerCount,o.Quiz.length,T,M,void 0,t.lastStep===n);if(g==="studying"){const O=await ge(P);Number(O.result)===0&&(O.resultMessage&&(i.finishStudy={id:Number(O.result),cause:JSON.stringify(O.resultMessage)}),S(M),T||A(k+1),w(E+1),ee(v,T))}},ee=(v,z)=>{F({isActive:!0,isCorrect:z}),z?a.play(v,["animate__fadeIn",St.correct]):a.play(v,["animate__headShake",St.incorrect])},Z=(v,z)=>{const T=v.currentTarget,M=!!a.isContain(T,"animate__fadeIn");setTimeout(()=>{a.remove(T,["animate__fadeIn","animate__headShake",St.correct,St.incorrect]),F({isActive:!1,isCorrect:!1}),M?(z(),setTimeout(()=>{C+1>o.Quiz.length?f(!0):B(C+1)},300)):(a.remove(T,["animate__headShake"]),F({isActive:!1,isCorrect:!1}),E>=o.QuizAnswerCount?(w(0),A(0),C+1>o.Quiz.length?f(!0):B(C+1)):m("studying"))},1500)},U=()=>{q===""?H(o.Quiz[C-1].Question.Sound):$()},D=v=>{h(v)};return e.jsx(e.Fragment,{children:r?e.jsx("div",{className:`animate__animated ${l}`,onAnimationEnd:()=>{l==="animate__bounceOutLeft"&&x()},children:e.jsx(ve,{step:n,quizType:tn,comment:"소리를 듣고 알맞은 단어를 고르세요.",onStepIntroClozeHandler:()=>{u("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:y?e.jsx(Je,{step:n,quizType:tn,quizAnswerCount:o.QuizAnswerCount,studentAnswer:d,onFinishActivity:t.onFinishActivity}):e.jsxs(e.Fragment,{children:[e.jsx(we,{quizNumber:C,totalQuizCnt:Object.keys(o.Quiz).length,life:o.QuizAnswerCount-k,timeMin:s.time.timeMin,timeSec:s.time.timeSec,changeSideMenu:D}),e.jsx("div",{className:`${St.comment} animate__animated animate__fadeInLeft`,children:tn}),e.jsxs(Ce,{children:[e.jsx(F_,{playState:q,onPlay:U}),xs?e.jsx(W,{height:10}):e.jsx(W,{height:15}),e.jsx($e,{typeCSS:St.listeningActivity2,containerCSS:St.container,children:N.map((v,z)=>e.jsx(D_,{text:v.Text,isCorrected:v.IsCorrected,checkAnswer:R,onCardAnimationEndHandler:Z}))}),xs?e.jsx(W,{height:10}):e.jsx(W,{height:15})]}),e.jsx(Qe,{isSideOpen:p,currentStep:n,currentStepType:tn,quizLength:o.Quiz.length,maxAnswerCount:o.QuizAnswerCount,scoreBoardData:d,changeSideMenu:D}),e.jsx(Ve,{bottomPopupState:V})]})})})}const V_=Q(),ei=V_?tt:et;function U_({playState:t,onPlay:i}){return e.jsxs("div",{className:ei.wordPlayButton,onClick:()=>i(),children:[t===""?e.jsx(Ie,{isColor:!0,width:34,height:34}):e.jsx(Be,{isColor:!0,width:34,height:34}),e.jsx("span",{className:ei.txtL,children:"Playback"})]})}const hs=Q(),En=hs?tt:et;function J_({example:t,index:i,checkAnswer:n,onWrapperAnimationEndHandler:s}){return e.jsxs("div",{className:`${En.imageCard}`,onClick:a=>n(a.currentTarget,t.Text),onAnimationEnd:a=>{s(a)},children:[e.jsx("img",{src:t.Image,width:hs?"auto":"100%",height:hs?"100%":"auto"}),e.jsx("div",{className:En.cardNumberPosition,children:e.jsx("div",{className:En.cardNumber,children:Number(i+1)})})]})}const K_=Q(),ti=K_?tt:et;function Y_({exampleData:t,checkAnswer:i,onWrapperAnimationEndHandler:n}){return e.jsx("div",{className:ti.listeningActivity3,children:e.jsx("div",{className:ti.container,children:t.map((s,a)=>e.jsx(J_,{example:s,index:a,checkAnswer:i,onWrapperAnimationEndHandler:n},`example-0${a+1}`))})})}const nn="Listening Activity",ys=Q(),Dt=ys?tt:et;function G_(t){const{handler:i}=c.useContext(_e),n=t.currentStep,s=je(()=>{}),a=Ye(),[l,u]=c.useState("animate__bounceInRight"),{isStepIntro:r,closeStepIntro:x}=be(),{isResultShow:y,changeResultShow:f}=Fe(),[p,h]=c.useState(!1),{quizState:g,changeQuizState:m}=Ae(),[o,_]=Se(Fd,t,n),[d,j]=c.useState(1),{scoreBoardData:S,setStudentAnswers:b,addStudentAnswers:N,makeUserAnswerData:L}=ze(),[C,B]=c.useState([]),[E,w]=c.useState(0),[k,A]=c.useState(0),{bottomPopupState:V,changeBottomPopupState:F}=We(),{playState:q,playAudio:H,stopAudio:$}=ke();if(c.useEffect(()=>{!r&&o&&(s.setup(o.QuizTime,!0),m("studying"))},[r]),c.useEffect(()=>{if(o)try{const[v,z]=Ue(_,o.QuizAnswerCount);b(_,o.QuizAnswerCount),B(ue.shuffle(o.Quiz[v-1].Examples)),b(_,o.QuizAnswerCount),j(v)}catch(v){console.log(v)}},[o]),c.useEffect(()=>{!r&&!y&&o&&(B(ue.shuffle(o.Quiz[d-1].Examples)),w(0),A(0),s.setup(o.QuizTime,!0),m("studying"))},[d]),c.useEffect(()=>{g==="studying"&&o&&!r&&!y&&H(o.Quiz[d-1].Question.Sound)},[g]),!o)return e.jsx(e.Fragment,{children:"Loading..."});const R=async(v,z)=>{m("checking"),$();const T=o.Quiz[d-1].Question.Text===z,M={quizNo:d,maxCount:o.QuizAnswerCount,answerCount:E+1,ox:T},P=L("",t.studyId,t.studentHistoryId,t.bookType,n,o.Quiz[d-1].QuizId,o.Quiz[d-1].QuizNo,d,o.Quiz[d-1].Question.Text,z,E+1,o.QuizAnswerCount,o.Quiz.length,T,M,void 0,t.lastStep===n);if(g==="studying"){s.stop();const O=await ge(P);Number(O.result)===0&&(O.resultMessage&&(i.finishStudy={id:Number(O.result),cause:JSON.stringify(O.resultMessage)}),N(M),T||A(k+1),w(E+1),ee(v,T))}},ee=(v,z)=>{s.stop(),F({isActive:!0,isCorrect:z}),z?a.play(v,["animate__fadeIn",Dt.correct]):a.play(v,["animate__headShake",Dt.incorrect])},Z=v=>{const z=v.currentTarget;setTimeout(()=>{a.remove(z,["selected","animate__fadeIn","animate__headShake",Dt.correct,Dt.incorrect]),F({isActive:!1,isCorrect:!1}),d+1>o.Quiz.length?f(!0):j(d+1)},1e3)},U=()=>{q===""?H(o.Quiz[d-1].Question.Sound):$()},D=v=>{h(v)};return e.jsx(e.Fragment,{children:r?e.jsx("div",{className:`animate__animated ${l}`,onAnimationEnd:()=>{l==="animate__bounceOutLeft"&&x()},children:e.jsx(ve,{step:n,quizType:nn,comment:"소리를 듣고 알맞은 카드를 고르세요.",onStepIntroClozeHandler:()=>{u("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:y?e.jsx(Je,{step:n,quizType:nn,quizAnswerCount:o.QuizAnswerCount,studentAnswer:S,onFinishActivity:t.onFinishActivity}):e.jsxs(e.Fragment,{children:[e.jsx(we,{quizNumber:d,totalQuizCnt:Object.keys(o.Quiz).length,life:o.QuizAnswerCount-k,timeMin:s.time.timeMin,timeSec:s.time.timeSec,changeSideMenu:D}),e.jsx("div",{className:`${Dt.comment} animate__animated animate__fadeInLeft`,children:nn}),e.jsxs(Ce,{children:[e.jsx(U_,{playState:q,onPlay:U}),ys?e.jsx(W,{height:10}):e.jsx(W,{height:15}),e.jsx(Y_,{exampleData:C,checkAnswer:R,onWrapperAnimationEndHandler:Z}),ys?e.jsx(W,{height:0}):e.jsx(W,{height:15})]}),e.jsx(Qe,{isSideOpen:p,currentStep:n,currentStepType:nn,quizLength:o.Quiz.length,maxAnswerCount:o.QuizAnswerCount,scoreBoardData:S,changeSideMenu:D}),e.jsx(Ve,{bottomPopupState:V})]})})})}const fs=Q(),X_=fs?tt:et;function Z_({src:t}){return e.jsx("div",{className:X_.questionBox,children:e.jsx("img",{src:t,width:fs?"auto":"250px",height:fs?"100%":"auto"})})}const em=Q(),tm=em?tt:et;function nm({multiPlayState:t,index:i,playWord:n}){return e.jsx("div",{className:tm.wordPlayButton2,onClick:()=>n(i),children:t.playState==="playing"&&t.seq===i?e.jsx(Be,{isColor:!0,width:44,height:44}):e.jsx(Ie,{isColor:!0,width:44,height:44})})}const sm=Q(),Wt=sm?tt:et;function im({multiPlayState:t,exampleData:i,index:n,playWord:s,checkAnswer:a,onAnimationEndHandler:l}){const u=c.useRef(null),r=()=>{a(u,i.Text)};return e.jsxs("div",{ref:u,className:`${Wt.soundCard}`,onAnimationEnd:x=>l(x),children:[e.jsx("div",{className:Wt.cardNumberPosition,children:e.jsx("div",{className:Wt.cardNumber,children:Number(n+1)})}),e.jsx("div",{className:Wt.playSoundPosition,children:e.jsx(nm,{multiPlayState:t,index:n,playWord:s})}),e.jsx("span",{className:Wt.enterButton,onClick:()=>r(),children:e.jsx("span",{children:e.jsx($n,{width:15,height:15})})})]})}const om=Q(),rm=om?tt:et;function cm({multiPlayState:t,exampleData:i,playWord:n,checkAnswer:s,onAnimationEndHandler:a}){return e.jsx("div",{className:rm.answers,children:i.map((l,u)=>e.jsx(im,{multiPlayState:t,exampleData:l,index:u,playWord:n,checkAnswer:s,onAnimationEndHandler:a},`e-0${u}`))})}const sn="Listening Activity",gs=Q(),zt=gs?tt:et;function am(t){const{handler:i}=c.useContext(_e),n=t.currentStep,s=je(()=>{}),a=Ye(),[l,u]=c.useState("animate__bounceInRight"),{isStepIntro:r,closeStepIntro:x}=be(),{isResultShow:y,changeResultShow:f}=Fe(),[p,h]=c.useState(!1),{quizState:g,changeQuizState:m}=Ae(),[o,_]=Se(Hd,t,n),[d,j]=c.useState(1),{scoreBoardData:S,setStudentAnswers:b,addStudentAnswers:N,makeUserAnswerData:L}=ze(),[C,B]=c.useState([]),[E,w]=c.useState(0),[k,A]=c.useState(0),{bottomPopupState:V,changeBottomPopupState:F}=We(),{playAudio:q,stopAudio:H}=ke(),[$,R]=c.useState({playState:"",playType:"",seq:-1}),[ee,Z]=c.useState(!1);if(c.useEffect(()=>{!r&&o&&(s.setup(o.QuizTime,!0),m("studying"))},[r]),c.useEffect(()=>{if(o)try{const[P,O]=Ue(_,o.QuizAnswerCount);w(O),A(O),B(ue.shuffle(o.Quiz[P-1].Examples)),b(_,o.QuizAnswerCount),j(P)}catch(P){console.log(P)}},[o]),c.useEffect(()=>{!r&&!y&&o&&(s.setup(o.QuizTime,!0),w(0),A(0),B(ue.shuffle(o.Quiz[d-1].Examples)),Z(!1),m("studying"))},[d]),c.useEffect(()=>{!r&&!y&&o&&g==="studying"&&!ee&&(Z(!0),M())},[g]),c.useEffect(()=>{if(H(),o&&$.seq>-1){if($.playType==="sentence"){const P=()=>{R({playState:"",playType:"",seq:-1})};q(C[$.seq].Sound,P)}else if($.playType==="all"){const P=()=>{$.seq<o.Quiz[d-1].Examples.length-1?R({playState:"playing",playType:"all",seq:$.seq+1}):(H(),R({playState:"",playType:"",seq:-1}))};q(C[$.seq].Sound,P)}}},[$]),!o)return e.jsx(e.Fragment,{children:"Loading..."});const U=async(P,O)=>{try{m("checking"),H(),R({playState:"",playType:"",seq:-1});const G=o.Quiz[d-1].Question.Text===O,le={quizNo:d,maxCount:o.QuizAnswerCount,answerCount:E+1,ox:G},ce=L("",t.studyId,t.studentHistoryId,t.bookType,n,o.Quiz[d-1].QuizId,o.Quiz[d-1].QuizNo,d,o.Quiz[d-1].Question.Text,O,E+1,o.QuizAnswerCount,o.Quiz.length,G,le,void 0,t.lastStep===n);if(g==="studying"){s.stop();const de=await ge(ce);if(Number(de.result)===0){de.resultMessage&&(i.finishStudy={id:Number(de.result),cause:JSON.stringify(de.resultMessage)});const X={quizNo:d,maxCount:o.QuizAnswerCount,answerCount:E+1,ox:G};G||A(k+1),w(E+1),N(X),D(P,G)}}}catch(G){console.log(G)}},D=(P,O)=>{s.stop(),F({isActive:!0,isCorrect:O}),P.current&&(O?a.play(P.current,["animate__fadeIn",zt.correct]):a.play(P.current,["animate__headShake",zt.incorrect]))},v=P=>{const O=P.currentTarget,G=!!a.isContain(O,"animate__fadeIn");setTimeout(()=>{F({isActive:!1,isCorrect:!1}),a.remove(O,[zt.correct,zt.incorrect,"animate__fadeIn","animate__headShake"]),G||E>=o.QuizAnswerCount?d+1>o.Quiz.length?f(!0):j(d+1):(s.setup(o.QuizTime,!0),m("studying"))},1e3)},z=P=>{h(P)},T=P=>{$.playState===""&&P>-1?R({playState:"playing",playType:"sentence",seq:P}):$.playState==="playing"&&$.seq===P?R({playState:"",playType:"",seq:-1}):$.playState==="playing"&&$.seq!==P&&R({playState:"playing",playType:"sentence",seq:P})},M=()=>{H(),$.playState==="playing"?R({playState:"",playType:"",seq:-1}):R({playState:"playing",playType:"all",seq:0})};return e.jsx(e.Fragment,{children:r?e.jsx("div",{className:`animate__animated ${l}`,onAnimationEnd:()=>{l==="animate__bounceOutLeft"&&x()},children:e.jsx(ve,{step:n,quizType:sn,comment:"그림을 보고 알맞은 소리를 고르세요.",onStepIntroClozeHandler:()=>{u("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:y?e.jsx(Je,{step:n,quizType:sn,quizAnswerCount:o.QuizAnswerCount,studentAnswer:S,onFinishActivity:t.onFinishActivity}):e.jsxs(e.Fragment,{children:[e.jsx(we,{quizNumber:d,totalQuizCnt:Object.keys(o.Quiz).length,life:o.QuizAnswerCount-k,timeMin:s.time.timeMin,timeSec:s.time.timeSec,changeSideMenu:z}),e.jsx("div",{className:`${zt.comment} animate__animated animate__fadeInLeft`,children:sn}),e.jsxs(Ce,{children:[gs?e.jsx(W,{height:0}):e.jsx(W,{height:15}),e.jsxs($e,{typeCSS:zt.listeningActivity4,containerCSS:zt.container,children:[e.jsx(Z_,{src:o.Quiz[d-1].Question.Image}),e.jsx(W,{height:15}),e.jsx(cm,{multiPlayState:$,exampleData:C,playWord:T,checkAnswer:U,onAnimationEndHandler:v})]}),gs?e.jsx(W,{height:5}):e.jsx(W,{height:15})]}),e.jsx(Qe,{isSideOpen:p,currentStep:n,currentStepType:sn,quizLength:o.Quiz.length,maxAnswerCount:o.QuizAnswerCount,scoreBoardData:S,changeSideMenu:z}),e.jsx(Ve,{bottomPopupState:V})]})})})}async function um(t){const{bookType:i,studyId:n,studentHistoryId:s}=t,l=`study/quiz/reading-comprehension-1?studentHistoryId=${s}&studyId=${n}&bookType=${i}`;return pe(l,async r=>({ContentsId:Number(r.ContentsId),IsQuizTimeoutIncorrect:!!r.isQuizTimeoutIncorrect,QuizAnswerCount:Number(r.QuizAnswerCount),QuizTime:Number(r.QuizTime),Quiz:r.Quiz.map(x=>({QuizId:x.QuizId.toString(),QuizNo:Number(x.QuizNo),Question:{Text:x.Question.Text,Sound:x.Question.Sound},Examples:x.Examples.map(y=>({Text:y.Text,Image:y.Image}))}))}))}async function lm(t){const{bookType:i,studyId:n,studentHistoryId:s}=t,l=`study/quiz/reading-comprehension-2?studentHistoryId=${s}&studyId=${n}&bookType=${i}`;return pe(l,async r=>({ContentsId:Number(r.ContentsId),IsQuizTimeoutIncorrect:!!r.isQuizTimeoutIncorrect,QuizAnswerCount:Number(r.QuizAnswerCount),QuizTime:Number(r.QuizTime),Quiz:r.Quiz.map(x=>({QuizId:x.QuizId.toString(),QuizNo:Number(x.QuizNo),Question:{Text:x.Question.Text,Image:x.Question.Image},Examples:x.Examples.map(y=>({Text:y.Text,Sound:y.Sound}))}))}))}async function dm(t){const{bookType:i,studyId:n,studentHistoryId:s}=t,l=`study/quiz/reading-comprehension-3?studentHistoryId=${s}&studyId=${n}&bookType=${i}`;return pe(l,async r=>({ContentsId:Number(r.ContentsId),IsQuizTimeoutIncorrect:!!r.isQuizTimeoutIncorrect,QuizAnswerCount:Number(r.QuizAnswerCount),QuizTime:Number(r.QuizTime),Quiz:r.Quiz.map(x=>({QuizId:x.QuizId.toString(),QuizNo:Number(x.QuizNo),Question:{Text:x.Question.Text,Image:x.Question.Image,Sound:x.Question.Sound},Examples:x.Examples.map(y=>({Text:y.Text,Sound:y.Sound}))}))}))}async function _m(t){const{bookType:i,studyId:n,studentHistoryId:s}=t,l=`study/quiz/reading-comprehension-4?studentHistoryId=${s}&studyId=${n}&bookType=${i}`;return pe(l,async r=>({ContentsId:Number(r.ContentsId),IsQuizTimeoutIncorrect:!!r.isQuizTimeoutIncorrect,QuizAnswerCount:Number(r.QuizAnswerCount),QuizTime:Number(r.QuizTime),IsModeRetest:!!r.IsModeRetest,PassMark:Number(r.PassMark),IsHideQuestionText:!!r.IsHideQuestionText,Quiz:r.Quiz.map(x=>({QuizId:x.QuizId.toString(),QuizNo:Number(x.QuizNo),Question:{Text:x.Question.Text,Sound:x.Question.Sound},Examples:x.Examples.map(y=>({Text:y.Text}))}))}))}const mm="_comment_1s1kv_1",xm="_wordPlayButton_1s1kv_20",hm="_txtL_1s1kv_35",ym="_wordPlayButton2_1s1kv_40",fm="_cardNumber_1s1kv_61",gm="_readingComprehension1_1s1kv_76",pm="_container_1s1kv_76",bm="_imageCard_1s1kv_82",jm="_correct_1s1kv_116",Sm="_incorrect_1s1kv_121",zm="_cardNumberPosition_1s1kv_130",wm="_readingComprehension2_1s1kv_136",Qm="_questionBox_1s1kv_141",Cm="_wordImage_1s1kv_156",vm="_wordText_1s1kv_165",$m="_textCard_1s1kv_171",Nm="_awnserText_1s1kv_214",Tm="_enterButton_1s1kv_218",Am="_answers_1s1kv_242",km="_readingComprehension3_1s1kv_250",Im="_questionImage_1s1kv_259",Bm="_questionText_1s1kv_270",Em="_readingComprehension4_1s1kv_352",Ke={comment:mm,wordPlayButton:xm,txtL:hm,wordPlayButton2:ym,cardNumber:fm,readingComprehension1:gm,container:pm,imageCard:bm,correct:jm,incorrect:Sm,cardNumberPosition:zm,readingComprehension2:wm,questionBox:Qm,wordImage:Cm,wordText:vm,textCard:$m,awnserText:Nm,enterButton:Tm,answers:Am,readingComprehension3:km,questionImage:Im,questionText:Bm,readingComprehension4:Em},Pm="_comment_8s2bt_1",Mm="_wordPlayButton_8s2bt_20",Lm="_txtL_8s2bt_35",qm="_wordPlayButton2_8s2bt_40",Rm="_cardNumber_8s2bt_61",Om="_readingComprehension1_8s2bt_76",Fm="_container_8s2bt_76",Hm="_imageCard_8s2bt_82",Dm="_correct_8s2bt_109",Wm="_incorrect_8s2bt_114",Vm="_cardNumberPosition_8s2bt_123",Um="_readingComprehension2_8s2bt_129",Jm="_questionBox_8s2bt_134",Km="_wordImage_8s2bt_155",Ym="_wordText_8s2bt_170",Gm="_textCard_8s2bt_176",Xm="_awnserText_8s2bt_215",Zm="_enterButton_8s2bt_219",ex="_answers_8s2bt_243",tx="_readingComprehension3_8s2bt_250",nx="_questionImage_8s2bt_261",sx="_questionText_8s2bt_284",ix="_readingComprehension4_8s2bt_362",Oe={comment:Pm,wordPlayButton:Mm,txtL:Lm,wordPlayButton2:qm,cardNumber:Rm,readingComprehension1:Om,container:Fm,imageCard:Hm,correct:Dm,incorrect:Wm,cardNumberPosition:Vm,readingComprehension2:Um,questionBox:Jm,wordImage:Km,wordText:Ym,textCard:Gm,awnserText:Xm,enterButton:Zm,answers:ex,readingComprehension3:tx,questionImage:nx,questionText:sx,readingComprehension4:ix},ox=Q(),ni=ox?Oe:Ke;function rx({playState:t,question:i,onPlay:n}){return e.jsxs("div",{className:ni.wordPlayButton,onClick:()=>n(),children:[t===""?e.jsx(Ie,{isColor:!0,width:34,height:34}):e.jsx(Be,{isColor:!0,width:34,height:34}),e.jsx("div",{className:ni.txtL,children:i})]})}const ps=Q(),Pn=ps?Oe:Ke;function cx({index:t,img:i,text:n,checkAnswer:s,onAnimationEndHandler:a}){return e.jsxs("div",{className:`${Pn.imageCard} animate__animated`,onClick:l=>s(l.currentTarget,n),onAnimationEnd:l=>a(l),children:[e.jsx("img",{src:i,width:ps?"auto":"100%",height:ps?"100%":"auto"}),e.jsx("div",{className:Pn.cardNumberPosition,children:e.jsx("div",{className:Pn.cardNumber,children:t})})]})}const on="Reading Comprehension",Cn=Q(),wt=Cn?Oe:Ke;function ax(t){const{handler:i}=c.useContext(_e),n=t.currentStep,s=je(()=>{}),a=Ye(),[l,u]=c.useState("animate__bounceInRight"),{isStepIntro:r,closeStepIntro:x}=be(),{isResultShow:y,changeResultShow:f}=Fe(),[p,h]=c.useState(!1),{quizState:g,changeQuizState:m}=Ae(),[o,_]=Se(um,t,n),[d,j]=c.useState(1),{scoreBoardData:S,setStudentAnswers:b,addStudentAnswers:N,makeUserAnswerData:L}=ze(),[C,B]=c.useState([]),[E,w]=c.useState(0),[k,A]=c.useState(0),{bottomPopupState:V,changeBottomPopupState:F}=We(),{playState:q,playAudio:H,stopAudio:$}=ke();if(c.useEffect(()=>{!r&&o&&(s.setup(o.QuizTime,!0),m("studying"))},[r]),c.useEffect(()=>{if(o){const[v,z]=Ue(_,o.QuizAnswerCount);w(z),A(z),B(ue.shuffle(o.Quiz[v-1].Examples)),b(_,o.QuizAnswerCount),j(v)}},[o]),c.useEffect(()=>{!r&&!y&&o&&(B(ue.shuffle(o.Quiz[d-1].Examples)),w(0),A(0),s.setup(o.QuizTime,!0),m("studying"))},[d]),c.useEffect(()=>{g==="studying"&&o&&!r&&!y&&(s.start(),H(o.Quiz[d-1].Question.Sound))},[g]),c.useEffect(()=>{y&&s.stop()},[y]),!o)return e.jsx(e.Fragment,{children:"Loading..."});const R=async(v,z)=>{try{m("checking");const T=o.Quiz[d-1].Question.Text===z,M={quizNo:d,maxCount:o.QuizAnswerCount,answerCount:E+1,ox:T},P=L("",t.studyId,t.studentHistoryId,t.bookType,n,o.Quiz[d-1].QuizId,o.Quiz[d-1].QuizNo,d,o.Quiz[d-1].Question.Text,z,E+1,o.QuizAnswerCount,o.Quiz.length,T,M,void 0,t.lastStep===n);if(g==="studying"){s.stop();const O=await ge(P);Number(O.result)===0&&(O.resultMessage&&(i.finishStudy={id:Number(O.result),cause:JSON.stringify(O.resultMessage)}),N(M),T||A(k+1),w(E+1),ee(v,T))}}catch(T){console.log(T)}},ee=(v,z)=>{s.stop(),F({isActive:!0,isCorrect:z}),z?a.play(v,["animate__fadeIn",wt.correct]):a.play(v,["animate__headShake",wt.incorrect])},Z=v=>{const z=v.currentTarget;setTimeout(()=>{a.remove(z,["animate__fadeIn","animate__headShake",wt.correct,wt.incorrect]),F({isActive:!1,isCorrect:!1}),w(0),A(0),d+1>o.Quiz.length?f(!0):j(d+1)},1500)},U=v=>{h(v)},D=()=>{q===""?H(o.Quiz[d-1].Question.Sound):$()};return e.jsx(e.Fragment,{children:r?e.jsx("div",{className:`animate__animated ${l}`,onAnimationEnd:()=>{l==="animate__bounceOutLeft"&&x()},children:e.jsx(ve,{step:n,quizType:on,comment:"문장을 듣고 알맞은 카드를 고르세요.",onStepIntroClozeHandler:()=>{u("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:y?e.jsx(e.Fragment,{children:e.jsx(Je,{step:n,quizType:on,quizAnswerCount:o.QuizAnswerCount,studentAnswer:S,onFinishActivity:t.onFinishActivity})}):e.jsxs(e.Fragment,{children:[e.jsx(we,{quizNumber:d,totalQuizCnt:Object.keys(o.Quiz).length,life:o.QuizAnswerCount-k,timeMin:s.time.timeMin,timeSec:s.time.timeSec,changeSideMenu:U}),e.jsx("div",{className:`${wt.comment} animate__animated animate__fadeInLeft`,children:on}),e.jsxs(Ce,{children:[Cn?e.jsx(W,{height:0}):e.jsx(W,{height:15}),e.jsx(rx,{playState:q,question:o.Quiz[d-1].Question.Text,onPlay:D}),Cn?e.jsx(W,{height:10}):e.jsx(W,{height:15}),e.jsx($e,{typeCSS:wt.readingComprehension1,containerCSS:wt.container,children:C.map((v,z)=>e.jsx(cx,{index:z+1,img:v.Image,text:v.Text,checkAnswer:R,onAnimationEndHandler:Z}))}),Cn?e.jsx(e.Fragment,{}):e.jsx(W,{height:15})]}),e.jsx(Qe,{isSideOpen:p,currentStep:n,currentStepType:on,quizLength:o.Quiz.length,maxAnswerCount:o.QuizAnswerCount,changeSideMenu:U,scoreBoardData:S}),e.jsx(Ve,{bottomPopupState:V})]})})})}const bs=Q(),si=bs?Oe:Ke;function ux({src:t}){return e.jsx("div",{className:si.questionBox,children:e.jsx("div",{className:si.wordImage,children:e.jsx("img",{src:t,width:bs?"auto":"100%",height:bs?"100%":"auto"})})})}const lx=Q(),ii=lx?Oe:Ke;function dx({multiPlayState:t,sentence:i,index:n,playSentence:s}){return e.jsxs("div",{className:ii.wordPlayButton2,onClick:a=>{s(a,n)},children:[t.playState==="playing"&&t.seq===n?e.jsx(Be,{isColor:!0,width:24,height:24}):e.jsx(Ie,{isColor:!0,width:24,height:24}),e.jsx("div",{className:ii.txtL,children:i})]})}const _x=Q(),Mn=_x?Oe:Ke;function mx({multiPlayState:t,sentence:i,index:n,playSentence:s,checkAnswer:a,onAnimationEndHandler:l}){const u=c.useRef(null),r=()=>{a(u,n)};return e.jsxs("div",{ref:u,className:`${Mn.textCard}`,onAnimationEnd:x=>l(x),children:[e.jsx("div",{className:Mn.cardNumber,children:Number(n+1)}),e.jsx(dx,{multiPlayState:t,sentence:i,index:n,playSentence:s}),e.jsx("span",{className:Mn.enterButton,onClick:()=>r(),children:e.jsx("span",{children:e.jsx($n,{width:15,height:15})})})]})}const xx=Q(),hx=xx?Oe:Ke;function yx({multiPlayState:t,exampleData:i,playSentence:n,checkAnswer:s,onAnimationEndHandler:a}){return e.jsx("div",{className:hx.answers,children:i.map((l,u)=>e.jsx(mx,{multiPlayState:t,sentence:l.Text,index:u,playSentence:n,checkAnswer:s,onAnimationEndHandler:a}))})}const rn="Reading Comprehension",js=Q(),Qt=js?Oe:Ke;function fx(t){const{handler:i}=c.useContext(_e),n=t.currentStep,s=je(()=>{}),a=Ye(),[l,u]=c.useState("animate__bounceInRight"),{isStepIntro:r,closeStepIntro:x}=be(),{isResultShow:y,changeResultShow:f}=Fe(),[p,h]=c.useState(!1),{quizState:g,changeQuizState:m}=Ae(),[o,_]=Se(lm,t,n),[d,j]=c.useState([]),{scoreBoardData:S,setStudentAnswers:b,addStudentAnswers:N,makeUserAnswerData:L}=ze(),[C,B]=c.useState(1),[E,w]=c.useState(0),[k,A]=c.useState(0),{bottomPopupState:V,changeBottomPopupState:F}=We(),{playAudio:q,stopAudio:H}=ke(),[$,R]=c.useState({playState:"",seq:-1});if(c.useEffect(()=>{!r&&o&&(s.setup(o.QuizTime,!0),m("studying"))},[r]),c.useEffect(()=>{if(H(),$.seq>-1){const z=()=>{R({playState:"",seq:-1})};q(d[$.seq].Sound,z)}},[$]),c.useEffect(()=>{if(o){const[z,T]=Ue(_,o.QuizAnswerCount);w(T),A(T),j(ue.shuffle(o.Quiz[z-1].Examples)),b(_,o.QuizAnswerCount),B(z)}},[o]),c.useEffect(()=>{!r&&!y&&o&&(s.setup(o.QuizTime,!0),j(ue.shuffle(o.Quiz[C-1].Examples)),m("studying"))},[C]),!o)return e.jsx(e.Fragment,{children:"Loading..."});const ee=async(z,T)=>{try{m("checking"),H(),R({playState:"",seq:-1});const M=o.Quiz[C-1].Question.Text===d[T].Text,P={quizNo:C,maxCount:o.QuizAnswerCount,answerCount:E+1,ox:M},O=L("",t.studyId,t.studentHistoryId,t.bookType,n,o.Quiz[C-1].QuizId,o.Quiz[C-1].QuizNo,C,o.Quiz[C-1].Question.Text,d[T].Text,E+1,o.QuizAnswerCount,o.Quiz.length,M,P,void 0,t.lastStep===n);if(g==="studying"){s.stop();const G=await ge(O);Number(G.result)===0&&(G.resultMessage&&(i.finishStudy={id:Number(G.result),cause:JSON.stringify(G.resultMessage)}),M||A(k+1),w(E+1),N(P),Z(z,M))}}catch{}},Z=(z,T)=>{F({isActive:!0,isCorrect:T}),z.current&&(T?a.play(z.current,[Qt.correct,"animate__fadeIn"]):a.play(z.current,[Qt.incorrect,"animate__headShake"]))},U=z=>{const T=z.currentTarget;setTimeout(()=>{a.remove(T,[Qt.correct,Qt.incorrect,"animate__fadeIn","animate__headShake"]),F({isActive:!1,isCorrect:!1}),w(0),A(0),C+1>o.Quiz.length?f(!0):B(C+1)},1e3)},D=(z,T)=>{$.playState===""&&T>-1?R({playState:"playing",seq:T}):$.playState==="playing"&&$.seq===T?R({playState:"",seq:-1}):$.playState==="playing"&&$.seq!==T&&R({playState:"playing",seq:T})},v=z=>{h(z)};return e.jsx(e.Fragment,{children:r?e.jsx("div",{className:`animate__animated ${l}`,onAnimationEnd:()=>{l==="animate__bounceOutLeft"&&x()},children:e.jsx(ve,{step:n,quizType:rn,comment:"그림을 보고 알맞은 문장을 고르세요.",onStepIntroClozeHandler:()=>{u("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:y?e.jsx(Je,{step:n,quizType:rn,quizAnswerCount:o.QuizAnswerCount,studentAnswer:S,onFinishActivity:t.onFinishActivity}):e.jsxs(e.Fragment,{children:[e.jsx(we,{quizNumber:C,totalQuizCnt:Object.keys(o.Quiz).length,life:o.QuizAnswerCount-k,timeMin:s.time.timeMin,timeSec:s.time.timeSec,changeSideMenu:v}),e.jsx("div",{className:`${Qt.comment} animate__animated animate__fadeInLeft`,children:rn}),e.jsxs(Ce,{children:[js?e.jsx(W,{height:0}):e.jsx(W,{height:15}),e.jsxs($e,{typeCSS:Qt.readingComprehension2,containerCSS:Qt.container,children:[e.jsx(ux,{src:o.Quiz[C-1].Question.Image}),e.jsx(W,{height:15}),e.jsx(yx,{multiPlayState:$,exampleData:d,playSentence:D,checkAnswer:ee,onAnimationEndHandler:U})]}),js?e.jsx(W,{height:5}):e.jsx(W,{height:15})]}),e.jsx(Qe,{isSideOpen:p,changeSideMenu:v,currentStep:n,currentStepType:rn,quizLength:o.Quiz.length,maxAnswerCount:o.QuizAnswerCount,scoreBoardData:S}),e.jsx(Ve,{bottomPopupState:V})]})})})}const Ss=Q(),gx=Ss?Oe:Ke;function px({src:t}){return e.jsx("div",{className:gx.questionImage,children:e.jsx("img",{src:t,width:Ss?"auto":"100%",height:Ss?"100%":"auto"})})}const bx=Q(),oi=bx?Oe:Ke;function jx({multiPlayState:t,sentence:i,index:n,playSentence:s}){return e.jsxs("div",{className:oi.wordPlayButton2,onClick:a=>{s(a,n)},children:[t.playState==="playing"&&t.seq===n?e.jsx(Be,{isColor:!0,width:24,height:24}):e.jsx(Ie,{isColor:!0,width:24,height:24}),e.jsx("div",{className:oi.txtL,children:i})]})}const Sx=Q(),Ln=Sx?Oe:Ke;function zx({multiPlayState:t,sentence:i,index:n,playSentence:s,checkAnswer:a,onAnimationEndHandler:l}){const u=c.useRef(null),r=()=>{a(u,n)};return e.jsxs("div",{ref:u,className:`${Ln.textCard}`,onAnimationEnd:x=>l(x),children:[e.jsx("div",{className:Ln.cardNumber,children:Number(n+1)}),e.jsx(jx,{multiPlayState:t,sentence:i,index:n,playSentence:s}),e.jsx("span",{className:Ln.enterButton,onClick:()=>r(),children:e.jsx("span",{children:e.jsx($n,{width:15,height:15})})})]})}function wx({multiPlayState:t,exampleData:i,playSentence:n,checkAnswer:s,onAnimationEndHandler:a}){return e.jsx(e.Fragment,{children:i.map((l,u)=>e.jsx(zx,{multiPlayState:t,sentence:l.Text,index:u,playSentence:n,checkAnswer:s,onAnimationEndHandler:a}))})}const zs=Q(),ri=zs?Oe:Ke;function Qx({multiPlayState:t,question:i,exampleData:n,playSentence:s,checkAnswer:a,onAnimationEndHandler:l}){return e.jsxs("div",{className:ri.answers,children:[zs?e.jsx(e.Fragment,{}):e.jsx(W,{height:10}),i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:ri.questionText,children:i}),zs?e.jsx(e.Fragment,{}):e.jsx(W,{height:10})]}),e.jsx(wx,{multiPlayState:t,exampleData:n,playSentence:s,checkAnswer:a,onAnimationEndHandler:l})]})}const cn="Reading Comprehension",ws=Q(),Ct=ws?Oe:Ke;function Cx(t){const{handler:i}=c.useContext(_e),n=t.currentStep,s=je(()=>{}),a=Ye(),[l,u]=c.useState("animate__bounceInRight"),{isStepIntro:r,closeStepIntro:x}=be(),{isResultShow:y,changeResultShow:f}=Fe(),[p,h]=c.useState(!1),{quizState:g,changeQuizState:m}=Ae(),[o,_]=Se(dm,t,n),[d,j]=c.useState([]),{scoreBoardData:S,setStudentAnswers:b,addStudentAnswers:N,makeUserAnswerData:L}=ze(),[C,B]=c.useState(1),[E,w]=c.useState(0),[k,A]=c.useState(0),{bottomPopupState:V,changeBottomPopupState:F}=We(),{playAudio:q,stopAudio:H}=ke(),[$,R]=c.useState({playState:"",seq:-1});if(c.useEffect(()=>{!r&&o&&(s.setup(o.QuizTime,!0),m("studying"))},[r]),c.useEffect(()=>{if(H(),$.seq>-1){const z=()=>{R({playState:"",seq:-1})};q(d[$.seq].Sound,z)}},[$]),c.useEffect(()=>{if(o){const[z,T]=Ue(_,o.QuizAnswerCount);w(T),A(T),j(ue.shuffle(o.Quiz[z-1].Examples)),b(_,o.QuizAnswerCount),B(z)}},[o]),c.useEffect(()=>{!r&&!y&&o&&(s.setup(o.QuizTime,!0),w(0),A(0),j(ue.shuffle(o.Quiz[C-1].Examples)),m("studying"))},[C]),!o)return e.jsx(e.Fragment,{children:"Loading..."});const ee=async(z,T)=>{try{m("checking"),H(),R({playState:"",seq:-1});const M=o.Quiz[C-1].Examples[0].Text===d[T].Text,P={quizNo:C,maxCount:o.QuizAnswerCount,answerCount:E+1,ox:M},O=L("",t.studyId,t.studentHistoryId,t.bookType,n,o.Quiz[C-1].QuizId,o.Quiz[C-1].QuizNo,C,o.Quiz[C-1].Examples[0].Text,d[T].Text,E+1,o.QuizAnswerCount,o.Quiz.length,M,P,void 0,t.lastStep===n);if(g==="studying"){s.stop();const G=await ge(O);Number(G.result)===0&&(G.resultMessage&&(i.finishStudy={id:Number(G.result),cause:JSON.stringify(G.resultMessage)}),M||A(k+1),w(E+1),N(P),Z(z,M))}}catch{}},Z=(z,T)=>{s.stop(),F({isActive:!0,isCorrect:T}),z.current&&(T?a.play(z.current,[Ct.correct,"animate__fadeIn"]):a.play(z.current,[Ct.incorrect,"animate__headShake"]))},U=z=>{const T=z.currentTarget,M=!!a.isContain(T,"animate__fadeIn");setTimeout(()=>{a.remove(T,[Ct.correct,Ct.incorrect,"animate__fadeIn","animate__headShake"]),F({isActive:!1,isCorrect:!1}),M||E>=o.QuizAnswerCount?C+1>o.Quiz.length?f(!0):B(C+1):(s.setup(o.QuizTime,!0),m("studying"))},1e3)},D=(z,T)=>{$.playState===""&&T>-1?R({playState:"playing",seq:T}):$.playState==="playing"&&$.seq===T?R({playState:"",seq:-1}):$.playState==="playing"&&$.seq!==T&&R({playState:"playing",seq:T})},v=z=>{h(z)};return e.jsx(e.Fragment,{children:r?e.jsx("div",{className:`animate__animated ${l}`,onAnimationEnd:()=>{l==="animate__bounceOutLeft"&&x()},children:e.jsx(ve,{step:n,quizType:cn,comment:"그림과 질문을 보고 알맞은 대답을 고르세요.",onStepIntroClozeHandler:()=>{u("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:y?e.jsx(Je,{step:n,quizType:cn,quizAnswerCount:o.QuizAnswerCount,studentAnswer:S,onFinishActivity:t.onFinishActivity}):e.jsxs(e.Fragment,{children:[e.jsx(we,{quizNumber:C,totalQuizCnt:Object.keys(o.Quiz).length,life:o.QuizAnswerCount-k,timeMin:s.time.timeMin,timeSec:s.time.timeSec,changeSideMenu:v}),e.jsx("div",{className:`${Ct.comment} animate__animated animate__fadeInLeft`,children:cn}),e.jsxs(Ce,{children:[ws?e.jsx(W,{height:0}):e.jsx(W,{height:15}),e.jsxs($e,{typeCSS:Ct.readingComprehension3,containerCSS:Ct.container,children:[e.jsx(px,{src:o.Quiz[C-1].Question.Image}),e.jsx(Qx,{multiPlayState:$,question:o.Quiz[C-1].Question.Text,exampleData:d,playSentence:D,checkAnswer:ee,onAnimationEndHandler:U})]}),ws?e.jsx(W,{height:5}):e.jsx(W,{height:15})]}),e.jsx(Qe,{isSideOpen:p,currentStep:n,currentStepType:cn,quizLength:o.Quiz.length,maxAnswerCount:o.QuizAnswerCount,scoreBoardData:S,changeSideMenu:v}),e.jsx(Ve,{bottomPopupState:V})]})})})}const vx=Q(),$x=vx?Oe:Ke;function Nx({question:t}){return e.jsx("div",{className:$x.questionText,dangerouslySetInnerHTML:{__html:t}})}const Tx=Q(),qn=Tx?Oe:Ke;function Ax({exampleData:t,index:i,checkAnswer:n}){return e.jsxs("div",{className:`${qn.textCard}`,onClick:s=>n(t.Text,s.currentTarget),children:[e.jsx("div",{className:qn.cardNumber,children:Number(i+1)}),e.jsx("div",{className:qn.awnserText,dangerouslySetInnerHTML:{__html:t.Text}})]})}function kx({exampleData:t,checkAnswer:i}){return e.jsx(e.Fragment,{children:t.map((n,s)=>e.jsx(Ax,{exampleData:n,index:s,checkAnswer:i},`e-0${s}`))})}const Qs=Q(),Ix=Qs?Oe:Ke;function Bx({isHideQuestion:t,question:i,exampleData:n,checkAnswer:s}){return e.jsxs("div",{className:Ix.answers,children:[Qs?e.jsx(W,{height:5}):e.jsx(W,{height:10}),!t&&e.jsx(Nx,{question:i}),Qs?e.jsx(W,{height:0}):e.jsx(W,{height:10}),e.jsx(kx,{exampleData:n,checkAnswer:s})]})}const Ex=Q(),at=Ex?mt:_t;function Px({index:t,question:i,correctAnswer:n,selectedAnswer:s}){return e.jsxs("div",{className:at.quizQuestion,children:[e.jsxs("div",{className:at.questionSentence,children:[e.jsxs("span",{className:at.questionNum,children:[Number(t+1),". "]}),e.jsx("span",{className:at.questionText,children:i})]}),e.jsx("div",{className:at.answers,children:e.jsxs("div",{className:at.quizAnswer,children:[e.jsxs("div",{className:at.answers,children:[e.jsx("span",{className:at.correctIcon}),e.jsx("span",{className:at.correctAnswer,children:n})]}),e.jsxs("div",{className:at.answers,children:[e.jsx("span",{className:at.incorrectIcon}),e.jsx("div",{className:at.wrongAnswer,children:s===""||s==="quiz time out"?"quiz time out":s})]})]})})]})}const Mx=Q(),ci=Mx?mt:_t;function Lx({quizData:t,failedExample:i}){return e.jsxs("div",{className:ci.wrongAnswers,children:[e.jsx("div",{className:ci.title,children:"Wrong Answers"}),i.map((n,s)=>e.jsx(Px,{index:s,question:t.Quiz[n.CurrentQuizNo-1].Question.Text,correctAnswer:n.Correct,selectedAnswer:n.StudentAnswer}))]})}const Fi=Q(),Re=Fi?mt:_t;function qx({isReTest:t,step:i,quizType:n,quizAnswerCount:s,studentAnswer:a,quizData:l,failedExample:u,passMark:r,doReTest:x,onFinishActivity:y}){const f=Ot();let p=0,h=0,g=0;const m=100/a.length;return a.map(o=>{if(o.ox)switch(h++,o.answerCount){case 1:p+=1*m;break;case 2:p+=.5*m;break;case 3:p+=.25*m;break}else o.answerCount===s&&g++}),e.jsxs("div",{className:Re.testResult,children:[e.jsxs("div",{className:Re.quizType,children:["Step",i,". ",n]}),e.jsxs("div",{className:Re.totalScoreContainer,children:[e.jsx("div",{className:Re.txtL,children:"SCORE: "}),e.jsx("div",{className:`${Re.totalScore} ${Re.heartbeat}`,children:Math.round(p)})]}),e.jsxs("div",{className:Re.container,children:[e.jsxs("div",{className:`${Re.readingUnit} animate__animated animate__jackInTheBox`,children:[e.jsx("img",{src:`https://wcfresource.a1edu.com/newsystem/image/character/subcharacter/${f}_10.png`,alt:""}),e.jsx("div",{style:{position:"relative"},children:e.jsx("div",{style:{position:"absolute",right:Fi?"-180px":"-220px",bottom:"-50px"},children:e.jsx(Mi,{})})})]}),e.jsxs("div",{className:Re.passmark,children:["Passmark: ",r]}),e.jsxs("div",{className:`${Re.board1} animate__animated animate__fadeIn`,children:[e.jsxs("div",{className:Re.correctScore,children:[e.jsx("div",{className:Re.title,children:"correct"}),e.jsx("div",{className:Re.number,children:h})]}),e.jsxs("div",{className:Re.incorrectScore,children:[e.jsx("div",{className:Re.title,children:"incorrect"}),e.jsx("div",{className:Re.number,children:g})]})]}),e.jsx("div",{className:Re.board2,children:t?e.jsx(Li,{quizAnswerCount:s,studentAnswer:a}):e.jsx(Lx,{quizData:l,failedExample:u})}),e.jsx(W,{height:50})]}),t?e.jsx("div",{className:Re.nextButton,onClick:()=>x(),children:"Re Test"}):e.jsx("div",{className:Re.nextButton,onClick:()=>y(),children:"Next"})]})}const Rx=Q(),ai=Oe;function Ox({playState:t,playSentence:i}){return e.jsxs("div",{className:ai.wordPlayButton,onClick:()=>i(),children:[t==="playing"?e.jsx(Be,{isColor:!0,width:34,height:34}):e.jsx(Ie,{isColor:!0,width:34,height:34}),e.jsx("div",{className:ai.txtL,children:"Playback"})]})}const an="Reading Comprehension",Cs=Q(),vt=Cs?Oe:Ke;function Fx(t){const{bookInfo:i,handler:n}=c.useContext(_e),s=n.isReTest||t.isReTestYn?"R":t.currentStep,a=Ye(),l=je(()=>{T("quiz time out")}),[u,r]=c.useState("animate__bounceInRight"),{isStepIntro:x,closeStepIntro:y}=be(),{isResultShow:f,changeResultShow:p}=Fe(),[h,g]=c.useState(!1),{quizState:m,changeQuizState:o}=Ae(),[_,d]=Se(_m,t,s,t.isReTestYn),[j,S]=c.useState([...d]),{scoreBoardData:b,setStudentAnswers:N,addStudentAnswers:L,makeUserAnswerData:C,resetStudentAnswer:B,getScore:E}=ze(),[w,k]=c.useState(1),[A,V]=c.useState([]),[F,q]=c.useState(0),[H,$]=c.useState(0),{bottomPopupState:R,changeBottomPopupState:ee}=We(),[Z,U]=c.useState(!1),{playState:D,playAudio:v,stopAudio:z}=ke();if(c.useEffect(()=>{!x&&_&&(l.setup(_.QuizTime,!0),o("studying"))},[x]),c.useEffect(()=>{if(_){const[ce,de]=Ue(d,_.QuizAnswerCount),X=d.filter(Y=>Y.OX==="2");U(_.IsModeRetest||t.isReTestYn?!0:n.isReTest),S([...X]),q(de),$(de),V(ue.shuffle(_.Quiz[ce-1].Examples)),N(d,_.QuizAnswerCount),k(ce)}},[_]),c.useEffect(()=>{_&&(V(ue.shuffle(_.Quiz[w-1].Examples)),$(0),q(0),o("studying"))},[w]),!_)return e.jsx(e.Fragment,{children:"Loading..."});const T=async(ce="",de)=>{try{l.stop(),o("checking");const X=_.Quiz[w-1].Examples[0].Text,Y=X===ce,xe={quizNo:w,maxCount:_.QuizAnswerCount,answerCount:F+1,ox:Y},J=Z||t.isReTestYn||_.IsModeRetest?"R":t.currentStep,oe=C("",t.studyId,t.studentHistoryId,t.bookType,J,_.Quiz[w-1].QuizId,_.Quiz[w-1].QuizNo,w,X,ce,F+1,_.QuizAnswerCount,_.Quiz.length,Y,xe,void 0,t.lastStep===s);let me=0;if(w+1>Object.keys(_.Quiz).length&&(me=E(xe,Object.keys(_.Quiz).length,_.QuizAnswerCount)),m==="studying"){const te=await ge(oe);if(Number(te.result)===0)if(te.resultMessage&&(n.finishStudy={id:Number(te.result),cause:JSON.stringify(te.resultMessage)}),L(xe),!de||ce===""){ee({isActive:!0,isCorrect:!1});const he={QuizId:_.Quiz[w-1].QuizId,QuizNo:_.Quiz[w-1].QuizNo,CurrentQuizNo:w,OX:"2",TempText:"",PenaltyWord:"",Correct:X,StudentAnswer:"quiz time out",AnswerCount:F};S([...j,he]),M(me,void 0)}else{if(Y)de&&a.play(de,["animate__fadeIn",vt.correct]);else{de&&a.play(de,["animate__headShake",vt.incorrect]);const he={QuizId:_.Quiz[w-1].QuizId,QuizNo:_.Quiz[w-1].QuizNo,CurrentQuizNo:w,OX:"2",TempText:"",PenaltyWord:"",Correct:X,StudentAnswer:ce,AnswerCount:F};S([...j,he]),$(H+1)}ee({isActive:!0,isCorrect:Y}),q(F+1),M(me,de)}}}catch(X){console.log(X)}},M=(ce,de)=>{setTimeout(()=>{if(ee({isActive:!1,isCorrect:!1}),de&&a.remove(de,["animate__headShake","animate__fadeIn",vt.correct,vt.incorrect]),w+1>Object.keys(_.Quiz).length)if(ce<_.PassMark)if(t.isReTestYn||Z||_.IsModeRetest)try{window.onExitStudy()}catch{location.replace("/")}else if(t.isReTestYn||Z||_.IsModeRetest)try{window.onExitStudy()}catch{location.replace("/")}else n.changeReTest(!0),U(!0),p(!0);else U(!1),O();else l.setup(_.QuizTime,!0),z(),k(w+1)},2e3)},P=()=>{S([]),B(),k(1),p(!1)},O=()=>{p(!0)},G=ce=>{g(ce)},le=()=>{if(D===""){const ce=_.Quiz[w-1].Question.Sound||"";v(ce)}else z()};return e.jsx(e.Fragment,{children:x?e.jsx("div",{className:`animate__animated ${u}`,onAnimationEnd:()=>{u==="animate__bounceOutLeft"&&y()},children:e.jsx(ve,{step:s,quizType:an,comment:"질문을 보고 알맞은 대답을 고르세요.",onStepIntroClozeHandler:()=>{r("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:f?e.jsx(e.Fragment,{children:e.jsx(qx,{isReTest:Z,step:s,quizType:an,quizAnswerCount:_.QuizAnswerCount,studentAnswer:b,quizData:_,failedExample:j,passMark:_.PassMark,doReTest:P,onFinishActivity:t.onFinishActivity})}):e.jsxs(e.Fragment,{children:[e.jsx(we,{quizNumber:w,totalQuizCnt:Object.keys(_.Quiz).length,life:_.QuizAnswerCount-H,timeMin:l.time.timeMin,timeSec:l.time.timeSec,changeSideMenu:G}),e.jsx("div",{className:`${vt.comment} animate__animated animate__fadeInLeft`,children:t.isReTestYn||Z||_.IsModeRetest?"Re Test":an}),e.jsxs(Ce,{children:[Cs?e.jsx(W,{height:0}):e.jsx(W,{height:15}),i.BookCode.includes("PB")&&Number(i.BookLevel.substring(0,1))>3?e.jsx(Ox,{playState:D,playSentence:le}):e.jsx(e.Fragment,{}),e.jsx($e,{typeCSS:vt.readingComprehension4,containerCSS:vt.container,children:e.jsx(Bx,{isHideQuestion:_.IsHideQuestionText,question:_.Quiz[w-1].Question.Text,exampleData:A,checkAnswer:T})}),Cs?e.jsx(W,{height:5}):e.jsx(W,{height:15})]}),e.jsx(Qe,{isSideOpen:h,currentStep:s,currentStepType:an,quizLength:_.Quiz.length,maxAnswerCount:_.QuizAnswerCount,changeSideMenu:G,scoreBoardData:b}),e.jsx(Ve,{bottomPopupState:R})]})})})}async function Hx(t){const{bookType:i,studyId:n,studentHistoryId:s}=t,l=`study/quiz/summary-1?studentHistoryId=${s}&studyId=${n}&bookType=${i}`;return pe(l,async r=>({ContentsId:Number(r.ContentsId),IsQuizTimeoutIncorrect:!!r.isQuizTimeoutIncorrect,QuizAnswerCount:Number(r.QuizAnswerCount),QuizTime:Number(r.QuizTime),IsEnablePenaltyReview:!!r.IsEnablePenaltyReview,Hint:{IsEnabled:r.Hint.IsEnabled,Max:r.Hint.Max,Try:r.Hint.Try},Quiz:r.Quiz.map(x=>({QuizId:x.QuizId.toString(),QuizNo:Number(x.QuizNo),Question:{Text:x.Question.Text,Sound:x.Question.Sound}}))}))}async function Dx(t){const{bookType:i,studyId:n,studentHistoryId:s}=t,l=`study/quiz/summary-2?studentHistoryId=${s}&studyId=${n}&bookType=${i}`;return pe(l,async r=>({ContentsId:Number(r.ContentsId),IsQuizTimeoutIncorrect:!!r.isQuizTimeoutIncorrect,QuizAnswerCount:Number(r.QuizAnswerCount),QuizTime:Number(r.QuizTime),Sentence:{Texts:r.Sentence.Texts,Sounds:r.Sentence.Sounds},Quiz:r.Quiz.map(x=>({QuizId:x.QuizId.toString(),QuizNo:Number(x.QuizNo),Examples:x.Examples.map(y=>({Text:y.Text}))}))}))}async function Wx(t,i,n,s){const a=`study/hint/Summary?studentHistoryId=${i}&studyId=${t}&quizNo=${n}&step=${s}`;return Ti(a,async u=>({Type:u.Type,Hint:u.Hint,TryHint:u.TryHint,ErrorNo:u.ErrorNo}))}const Vx="_comment_182ff_1",Ux="_wordPlayButton_182ff_20",Jx="_txtL_182ff_35",Kx="_cardNumber_182ff_46",Yx="_hintButton_182ff_61",Gx="_testReview_182ff_83",Xx="_title_182ff_83",Zx="_container_182ff_88",eh="_sentence_182ff_97",th="_nextButton_182ff_106",nh="_deactNextButton_182ff_128",sh="_reviewAnswer_182ff_149",ih="_currentOrder_182ff_159",oh="_blink_182ff_1",rh="_correctAnswer_182ff_171",ch="_incorrectAnswer_182ff_182",ah="_currentInput_182ff_201",uh="_otherInput_182ff_202",lh="_enterButton_182ff_209",dh="_hintText_182ff_235",_h="_btnNext_182ff_244",mh="_iconArrowUp_182ff_267",xh="_summaryTest1_182ff_281",hh="_textCard_182ff_288",yh="_correct_182ff_171",fh="_incorrect_182ff_182",gh="_awnserText_182ff_333",ph="_answers_182ff_338",bh="_correctTextCard_182ff_342",jh="_question_182ff_346",Sh="_questionMark_182ff_352",zh="_blink1_182ff_1",wh="_playIcon_182ff_388",Qh="_highlight_182ff_401",Ch="_correctOrders_182ff_440",vh="_correctDirection_182ff_468",$h="_summaryTest2_182ff_487",Nh="_questionBox_182ff_565",Th="_answerBox_182ff_590",Ah="_word_182ff_20",Le={comment:Vx,wordPlayButton:Ux,txtL:Jx,cardNumber:Kx,hintButton:Yx,testReview:Gx,title:Xx,container:Zx,sentence:eh,nextButton:th,deactNextButton:nh,reviewAnswer:sh,currentOrder:ih,blink:oh,correctAnswer:rh,incorrectAnswer:ch,currentInput:ah,otherInput:uh,enterButton:lh,hintText:dh,btnNext:_h,iconArrowUp:mh,summaryTest1:xh,textCard:hh,correct:yh,incorrect:fh,awnserText:gh,answers:ph,correctTextCard:bh,question:jh,questionMark:Sh,blink1:zh,playIcon:wh,highlight:Qh,correctOrders:Ch,correctDirection:vh,summaryTest2:$h,questionBox:Nh,answerBox:Th,word:Ah},kh="_comment_1tntq_1",Ih="_wordPlayButton_1tntq_15",Bh="_txtL_1tntq_30",Eh="_cardNumber_1tntq_41",Ph="_hintButton_1tntq_55",Mh="_testReview_1tntq_77",Lh="_title_1tntq_77",qh="_container_1tntq_82",Rh="_sentence_1tntq_91",Oh="_nextButton_1tntq_99",Fh="_deactNextButton_1tntq_121",Hh="_reviewAnswer_1tntq_142",Dh="_currentOrder_1tntq_152",Wh="_blink_1tntq_1",Vh="_correctAnswer_1tntq_164",Uh="_incorrectAnswer_1tntq_175",Jh="_currentInput_1tntq_194",Kh="_otherInput_1tntq_195",Yh="_enterButton_1tntq_202",Gh="_hintText_1tntq_228",Xh="_btnNext_1tntq_237",Zh="_iconArrowUp_1tntq_260",ey="_summaryTest1_1tntq_274",ty="_textCard_1tntq_282",ny="_correct_1tntq_164",sy="_incorrect_1tntq_175",iy="_awnserText_1tntq_327",oy="_answers_1tntq_332",ry="_correctTextCard_1tntq_336",cy="_question_1tntq_340",ay="_questionMark_1tntq_349",uy="_blink1_1tntq_1",ly="_playIcon_1tntq_385",dy="_highlight_1tntq_398",_y="_correctOrders_1tntq_439",my="_correctDirection_1tntq_466",xy="_summaryTest2_1tntq_472",hy="_questionBox_1tntq_541",yy="_answerBox_1tntq_572",qe={comment:kh,wordPlayButton:Ih,txtL:Bh,cardNumber:Eh,hintButton:Ph,testReview:Mh,title:Lh,container:qh,sentence:Rh,nextButton:Oh,deactNextButton:Fh,reviewAnswer:Hh,currentOrder:Dh,blink:Wh,correctAnswer:Vh,incorrectAnswer:Uh,currentInput:Jh,otherInput:Kh,enterButton:Yh,hintText:Gh,btnNext:Xh,iconArrowUp:Zh,summaryTest1:ey,textCard:ty,correct:ny,incorrect:sy,awnserText:iy,answers:oy,correctTextCard:ry,question:cy,questionMark:ay,blink1:uy,playIcon:ly,highlight:dy,correctOrders:_y,correctDirection:my,summaryTest2:xy,questionBox:hy,answerBox:yy},fy=()=>({exampleManager:{getExamplesByQuizNo:(i,n,s="Quiz")=>{const a=ue.filter(i,(l,u)=>u>=n-1);return s==="Quiz"?ue.shuffle(a):a}}}),gy=Q(),Rn=gy?qe:Le;function py(){return e.jsx("div",{className:`${Rn.correctTextCard} ${Rn.question}`,children:e.jsx("div",{className:Rn.questionMark,children:"Choose the sentences in the correct order."})})}const by=Q(),$t=by?qe:Le;function jy({multiPlayState:t,index:i,sentenceData:n,selectedData:s,playSentence:a}){return e.jsx("div",{className:`${$t.correctTextCard}`,children:s.ox?e.jsx(e.Fragment,{children:e.jsxs("div",{className:$t.correctAnswer,children:[e.jsx("span",{className:$t.playIcon}),e.jsx("span",{onClick:()=>a(i),className:`${t.playState==="playing"&&t.seq===i?$t.highlight:""}`,children:n.Question.Text})]})}):e.jsx(e.Fragment,{children:s.answerCount===s.maxCount?e.jsxs("div",{className:$t.incorrectAnswer,children:[e.jsx("span",{className:$t.playIcon}),e.jsx("span",{onClick:()=>a(i),className:`sentence ${t.playState==="playing"&&t.seq===i?$t.highlight:""}`,dangerouslySetInnerHTML:{__html:n.Question.Text}})]}):e.jsx(e.Fragment,{})})})}const Sy=Q(),zy=Sy?qe:Le;function wy({isStepEnd:t,multiPlayState:i,sentenceData:n,selectedData:s,playSentence:a}){return e.jsxs("div",{className:zy.correctOrders,children:[n.map((l,u)=>s[u]?e.jsx(jy,{multiPlayState:i,index:u,sentenceData:l,selectedData:s[u],playSentence:a},`$ss-0${u}`):e.jsx(e.Fragment,{})),!t&&e.jsx(py,{})]})}const Qy=Q(),ui=Qy?qe:Le;function Cy(){return e.jsx("div",{className:ui.correctDirection,children:e.jsx("div",{className:ui.iconArrowUp})})}const vy=Q(),On=vy?qe:Le;function $y({index:t,exampleData:i,checkAnswer:n,onAnimationEnd:s}){return e.jsxs("div",{className:`${On.textCard}`,onClick:a=>n(a.currentTarget,i.Question.Text),onAnimationEnd:a=>s(a.currentTarget),children:[e.jsx("div",{className:On.cardNumber,children:Number(t+1)}),e.jsx("div",{className:On.awnserText,dangerouslySetInnerHTML:{__html:i.Question.Text}})]})}const Ny=Q(),Ty=Ny?qe:Le;function Ay({exampleData:t,checkAnswer:i,onAnimationEnd:n}){return e.jsx("div",{className:Ty.answers,children:t.map((s,a)=>e.jsx($y,{index:a,exampleData:s,checkAnswer:i,onAnimationEnd:n},`e-0${a}`))})}const ky=Q(),Iy=ky?qe:Le;function By({tryCnt:t=0,maxCnt:i=0,onClickHint:n}){return e.jsxs("div",{className:Iy.hintButton,onClick:()=>n(),children:["Chance ",i-t," / ",i]})}const Ey=Q(),li=Ey?qe:Le;function Py({multiPlayState:t,playAll:i}){return e.jsxs("div",{className:li.wordPlayButton,onClick:()=>i(),children:[t.playState==="playing"?e.jsx(Be,{isColor:!0,width:24,height:24}):e.jsx(Ie,{isColor:!0,width:24,height:24}),e.jsx("div",{className:li.txtL,children:"Playback"})]})}const My=Q(),Ly=My?qe:Le;function qy({goNext:t}){return e.jsx("div",{onClick:()=>t(),className:`${Ly.btnNext} animate__animated animate__flash`,children:"Next"})}const Ry=Q(),ft=Ry?qe:Le;function Oy({inputRefs:t,word:i,inputIndex:n,currentInputIndex:s,changeInputIndex:a}){const[l,u]=c.useState(""),[r,x]=c.useState(0),[y,f]=c.useState(0),p=c.useRef(null),h=c.useRef(null);c.useEffect(()=>{p.current&&p.current.offsetWidth>0&&x(p.current.offsetWidth),h.current&&h.current.offsetWidth>0&&f(h.current.offsetWidth)});const g=m=>{m.preventDefault();let o=m.currentTarget.value;o===i?(u(o),a(s+1)):u(o)};return e.jsxs(e.Fragment,{children:[n>s&&e.jsxs("span",{className:`${ft.reviewAnswer}`,children:[e.jsx("span",{className:ft.otherInput,children:e.jsx("input",{ref:m=>t.current[n]=m,style:{width:`${r+4}px`},disabled:!0})}),e.jsx("div",{ref:p,className:ft.hintText,children:i})]}),n===s&&e.jsxs("span",{className:`${ft.reviewAnswer} ${ft.currentOrder}`,children:[e.jsx("span",{className:ft.currentInput,children:e.jsx("input",{ref:m=>t.current[n]=m,type:"text",style:{width:`${y+4}px`},value:l,onChange:m=>g(m),onCopy:m=>m.preventDefault(),onPaste:m=>m.preventDefault(),autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",inputMode:"search",tabIndex:-1})}),e.jsx("div",{ref:h,className:ft.hintText,children:i})]}),n<s&&e.jsx("span",{className:`${ft.reviewAnswer} ${ft.correctAnswer}`,children:i})]})}const Fy=Q(),Lt=Fy?qe:Le;function Hy({isSideOpen:t,correctSentence:i,changePenaltyState:n}){const s=c.useRef([]),[a,l]=c.useState(0),[u,r]=c.useState(!1),x=/<[^>]*>/gi;c.useEffect(()=>{const p=()=>{s.current[a]&&(s.current[a].focus(),t&&s.current[a].blur())};return p(),window.addEventListener("click",p),()=>{window.removeEventListener("click",p)}},[a,t]);const y=p=>{p>=s.current.length?(l(p),f()):l(p)},f=()=>{r(!0)};return e.jsxs("div",{className:`${Lt.testReview}`,children:[e.jsx("div",{className:Lt.title,children:"Test Review"}),e.jsx("div",{className:Lt.container,children:e.jsx("div",{className:Lt.sentence,children:i.replace(x,"").split(" ").map((p,h)=>e.jsx(Oy,{inputRefs:s,inputIndex:h,currentInputIndex:a,word:p,changeInputIndex:y}))})}),e.jsx(W,{height:10}),e.jsx("div",{className:`${u?Lt.nextButton:Lt.deactNextButton} ${u&&"animate__animated animate__bounce"}`,onClick:()=>{u&&n("none")},children:"Next"})]})}const un="Summary Test",Dy=Q(),Nt=Dy?qe:Le;function Wy(t){const{bookInfo:i,handler:n}=c.useContext(_e),s=t.currentStep,a=je(()=>{i.BookCode.includes("EB")?i.BookLevel.includes("1")||i.BookLevel.includes("K")||Y():i.BookCode.includes("PB")&&Y()}),l=Ye(),[u,r]=c.useState("animate__bounceInRight"),{isStepIntro:x,closeStepIntro:y}=be(),{isResultShow:f,changeResultShow:p}=Fe(),[h,g]=c.useState(!1),{quizState:m,changeQuizState:o}=Ae(),[_,d]=Se(Hx,t,s),[j,S]=c.useState(1),[b,N]=c.useState(0),[L,C]=c.useState(0),[B,E]=c.useState({penaltyState:"none",sentence:""}),{bottomPopupState:w,changeBottomPopupState:k}=We(),{scoreBoardData:A,setStudentAnswers:V,addStudentAnswers:F,makeUserAnswerData:q}=ze(),{exampleManager:H}=fy(),[$,R]=c.useState([]),[ee,Z]=c.useState([]),{playAudio:U,stopAudio:D}=ke(),[v,z]=c.useState({playState:"",seq:-1,playType:""}),[T,M]=c.useState({IsEnabled:!1,Max:0,Try:0}),[P,O]=c.useState(!1),[G,le]=c.useState(!1);if(c.useEffect(()=>{!x&&_&&o("studying")},[x]),c.useEffect(()=>{if(_){const[ie,fe]=Ue(d,_.QuizAnswerCount),K=H.getExamplesByQuizNo(_.Quiz,ie,t.mode);V(d,_.QuizAnswerCount),R(ue.shuffle(K)),Z(ki(d,_.QuizAnswerCount)),_.Hint.IsEnabled&&M({IsEnabled:_.Hint.IsEnabled,Max:_.Hint.Max,Try:_.Hint.Try}),d.length>0?(_.IsEnablePenaltyReview&&d[d.length-1].PenaltyWord!==""?(E({penaltyState:"penalty",sentence:d[d.length-1].PenaltyWord}),S(ie-1)):S(ie),N(fe),C(fe)):(N(fe),C(fe),S(ie))}},[_]),c.useEffect(()=>{if(D(),_&&v.seq>-1){if(v.playType==="sentence"){const ie=()=>{z({playState:"",playType:"",seq:-1})};U(_.Quiz[v.seq].Question.Sound,ie)}else if(v.playType==="all"){const ie=()=>{v.seq<_.Quiz.length-1?z({playState:"playing",playType:"all",seq:v.seq+1}):(D(),z({playState:"",playType:"",seq:-1}))};U(_.Quiz[v.seq].Question.Sound,ie)}}},[v]),c.useEffect(()=>{!x&&!f&&_&&m==="studying"&&B.penaltyState==="none"&&a.setup(_.QuizTime,!0)},[m]),c.useEffect(()=>{!x&&!f&&_&&(N(0),C(0),te(j-2),o("studying"))},[j]),c.useEffect(()=>{P&&J()},[P]),c.useEffect(()=>{B.penaltyState==="penalty"&&_&&a.stop()},[B]),!_)return e.jsx(e.Fragment,{children:"Loading..."});const ce=async(ie,fe)=>{try{o("checking"),D(),z({playState:"",playType:"",seq:-1});const K=/<[^>]*>/gi,ne=_.Quiz[j-1].Question.Text===fe,re={quizNo:j,maxCount:_.QuizAnswerCount,answerCount:b+1,ox:ne},ae=q("",t.studyId,t.studentHistoryId,t.bookType,s,_.Quiz[j-1].QuizId,_.Quiz[j-1].QuizNo,j,_.Quiz[j-1].Question.Text.replace(K,""),fe.replace(K,""),b+1,_.QuizAnswerCount,_.Quiz.length,ne,re,_.IsEnablePenaltyReview,t.lastStep===s);if(m==="studying"){a.stop();const ye=await ge(ae);Number(ye.result)===0&&(ye.resultMessage&&(n.finishStudy={id:Number(ye.result),cause:JSON.stringify(ye.resultMessage)}),F(re),ne||C(L+1),N(b+1),de(ie,ne))}}catch(K){console.log(K)}},de=(ie,fe)=>{k({isActive:!0,isCorrect:fe}),fe?ie&&l.play(ie,["animate__fadeIn",Nt.correct]):l.play(ie,["animate__headShake",Nt.incorrect])},X=ie=>{const fe=!!l.isContain(ie,"animate__fadeIn");setTimeout(()=>{if(l.remove(ie,["animate__fadeIn","animate__headShake",Nt.correct,Nt.incorrect]),k({isActive:!1,isCorrect:!1}),fe)setTimeout(()=>{const K=$.filter(ne=>ne.QuizNo!==j);R([...K]),Z(A),j+1>_.Quiz.length?oe(!0):S(j+1)},300);else if(b>=_.QuizAnswerCount){const K=$.filter(ne=>ne.QuizNo!==j);R([...K]),Z(A),j+1>_.Quiz.length?oe(!0):_.IsEnablePenaltyReview?E({penaltyState:"penalty",sentence:_.Quiz[j-1].Question.Text}):S(j+1)}else o("studying")},1e3)},Y=async()=>{try{o("checking"),D(),z({playState:"",playType:"",seq:-1});const ie={quizNo:j,maxCount:_.QuizAnswerCount,answerCount:b+1,ox:!1},fe=q("",t.studyId,t.studentHistoryId,t.bookType,s,_.Quiz[j-1].QuizId,_.Quiz[j-1].QuizNo,j,_.Quiz[j-1].Question.Text,"quiz time out",b+1,_.QuizAnswerCount,_.Quiz.length,!1,ie,_.IsEnablePenaltyReview,t.lastStep===s);if(m==="studying"){a.stop();const K=await ge(fe);Number(K.result)===0&&(K.resultMessage&&(n.finishStudy={id:Number(K.result),cause:JSON.stringify(K.resultMessage)}),F(ie),C(L+1),N(b+1),k({isActive:!0,isCorrect:!1}),setTimeout(()=>{if(k({isActive:!1,isCorrect:!1}),b+1>=_.QuizAnswerCount){const ne=$.filter(re=>re.QuizNo!==j);R(ne),Z(re=>[...re,ie]),j+1>_.Quiz.length?oe(!0):_.IsEnablePenaltyReview?E({penaltyState:"penalty",sentence:_.Quiz[j-1].Question.Text}):S(j+1)}else o("studying")},1e3))}}catch(ie){console.log(ie)}},xe=async()=>{try{if(T.IsEnabled&&T&&T.Try!==void 0&&T.Max!==void 0&&T.Max-T.Try>0&&(o("checking"),D(),z({playState:"",playType:"",seq:-1}),a.stop(),m==="studying")){const ie=await Wx(t.studyId,t.studentHistoryId,j,`${t.currentStep}`);if(ie.ErrorNo===0){M({IsEnabled:_.Hint.IsEnabled,Max:_.Hint.Max,Try:ie.TryHint});const fe={quizNo:j,maxCount:_.QuizAnswerCount,answerCount:b+1,ox:!0},K=q("",t.studyId,t.studentHistoryId,t.bookType,s,_.Quiz[j-1].QuizId,_.Quiz[j-1].QuizNo,j,_.Quiz[j-1].Question.Text,_.Quiz[j-1].Question.Text,b+1,_.QuizAnswerCount,_.Quiz.length,!0,fe,_.IsEnablePenaltyReview,t.lastStep===s),ne=await ge(K);Number(ne.result)===0&&(ne.resultMessage&&(n.finishStudy={id:Number(ne.result),cause:JSON.stringify(ne.resultMessage)}),F(fe),N(b+1),O(!0))}}}catch(ie){console.log(ie)}},J=()=>{const ie=$.filter(fe=>fe.QuizNo!==j);R([...ie]),Z(A),j+1>_.Quiz.length?oe(!0):S(j+1),O(!1)},oe=ie=>{a.setup(0),le(ie)},me=ie=>{g(ie)},te=ie=>{v.playState===""&&ie>-1?z({playState:"playing",playType:"sentence",seq:ie}):v.playState==="playing"&&v.seq===ie?z({playState:"",playType:"",seq:-1}):v.playState==="playing"&&v.seq!==ie&&z({playState:"playing",playType:"sentence",seq:ie})},he=()=>{D(),v.playState==="playing"?z({playState:"",playType:"",seq:-1}):z({playState:"playing",playType:"all",seq:0})},xt=()=>{D(),z({playState:"",playType:"",seq:-1}),p(!0)},Ze=ie=>{ie==="none"?Nn():E({penaltyState:ie,sentence:_.Quiz[j-1].Question.Text})},Nn=async()=>{(async()=>{const fe=await ks({mobile:"",bookType:t.bookType,studyId:t.studyId,studentHistoryId:t.studentHistoryId,step:`${s}`,quizId:_.Quiz[j-1].QuizId,isLastQuiz:j+1>_.Quiz.length,isFinishStudy:t.lastStep===s});Number(fe.result)===0&&(D(),j+1>Object.keys(_.Quiz).length?p(!0):(N(0),C(0),E({penaltyState:"none",sentence:""}),S(j+1),a.setup(_.QuizTime,!0)))})()};return e.jsx(e.Fragment,{children:x?e.jsx("div",{className:`animate__animated ${u}`,onAnimationEnd:()=>{u==="animate__bounceOutLeft"&&y()},children:e.jsx(ve,{step:s,quizType:un,comment:"나열된 문장을 보고 올바른 순서대로 고르세요.",onStepIntroClozeHandler:()=>{r("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:f?e.jsx(Je,{step:s,quizType:un,quizAnswerCount:_.QuizAnswerCount,studentAnswer:A,onFinishActivity:t.onFinishActivity}):e.jsxs(e.Fragment,{children:[e.jsx(we,{quizNumber:j,totalQuizCnt:Object.keys(_.Quiz).length,life:_.QuizAnswerCount-L,timeMin:a.time.timeMin,timeSec:a.time.timeSec,changeSideMenu:me}),e.jsx("div",{className:`${Nt.comment} animate__animated animate__fadeInLeft`,children:un}),e.jsx(Ce,{children:B.penaltyState==="none"?e.jsxs($e,{typeCSS:Nt.summaryTest1,containerCSS:Nt.container,children:[e.jsx(e.Fragment,{children:G&&e.jsx(Py,{multiPlayState:v,playAll:he})}),e.jsx(wy,{isStepEnd:G,multiPlayState:v,sentenceData:_.Quiz,selectedData:ee,playSentence:te}),e.jsx(e.Fragment,{children:G?e.jsx(qy,{goNext:xt}):e.jsxs(e.Fragment,{children:[e.jsx(Cy,{}),e.jsx(Ay,{exampleData:$,checkAnswer:ce,onAnimationEnd:X}),T.IsEnabled&&e.jsx(By,{tryCnt:T.Try,maxCnt:T.Max,onClickHint:xe})]})})]}):e.jsx(Hy,{isSideOpen:h,correctSentence:B.sentence,changePenaltyState:Ze})}),e.jsx(Qe,{isSideOpen:h,currentStep:s,currentStepType:un,quizLength:_.Quiz.length,maxAnswerCount:_.QuizAnswerCount,scoreBoardData:A,changeSideMenu:me}),e.jsx(Ve,{bottomPopupState:w})]})})})}const Vy=Q(),ln=Vy?qe:Le;function Uy({isComplete:t,wordData:i,questionNo:n}){const s=c.useRef(null);c.useEffect(()=>{i.QuestionIndex===n&&s.current!==null&&s.current.scrollIntoView()},[n]);let a="";return i.State==="none"&&i.QuestionIndex>0?i.QuestionIndex===n&&(a="?"):a=i.Word,console.log(a),e.jsx("span",{ref:s,className:`
        ${ln.answerBox}
        ${i.QuestionIndex===n&&!t?ln.currentOrder:""}
        ${i.State==="correct"?ln.correctAnswer:""}        
        ${i.State==="incorrect"?ln.incorrectAnswer:""}
      `,dangerouslySetInnerHTML:{__html:a}})}const Jy=Q(),di=Jy?qe:Le;function Ky({isComplete:t,sentenceData:i,questionNo:n}){const s=c.useRef(null);return c.useEffect(()=>{t&&s.current&&s.current.scrollTo({top:0,behavior:"smooth"})},[t]),e.jsx("div",{ref:s,className:di.questionBox,children:i.map((a,l)=>a.QuestionIndex>0?e.jsx(Uy,{isComplete:t,wordData:a,questionNo:n},`answer-${l}`):e.jsx("span",{className:di.word,dangerouslySetInnerHTML:{__html:a.Word}},`answer-${l}`))})}const Yy=Q(),_i=Yy?qe:Le;function Gy(){return e.jsx("div",{className:_i.correctDirection,children:e.jsx("div",{className:_i.iconArrowUp})})}const Xy=Q(),Fn=Xy?qe:Le;function Zy({index:t,exampleData:i,checkAnswer:n,onAnimationEnd:s}){return e.jsxs("div",{className:`${Fn.textCard}`,onClick:a=>n(a.currentTarget,i.Text),onAnimationEnd:a=>s(a.currentTarget),children:[e.jsx("div",{className:Fn.cardNumber,children:Number(t+1)}),e.jsx("div",{className:Fn.awnserText,children:i.Text})]})}const ef=Q(),mi=ef?qe:Le;function tf({exampleData:t,checkAnswer:i,onAnimationEnd:n}){return e.jsx("div",{className:mi.answers,children:e.jsx("div",{className:mi.container,children:t.map((s,a)=>e.jsx(Zy,{index:a,exampleData:s,checkAnswer:i,onAnimationEnd:n},`example-${a}`))})})}const nf=Q(),xi=nf?qe:Le;function sf({playState:t,playSentence:i}){return e.jsxs("div",{className:xi.wordPlayButton,onClick:()=>i(),children:[t==="playing"?e.jsx(Be,{isColor:!0,width:24,height:24}):e.jsx(Ie,{isColor:!0,width:24,height:24}),e.jsx("div",{className:xi.txtL,children:"Playback (completed sentence)"})]})}const of=Q(),rf=of?qe:Le;function cf({showResult:t}){return e.jsx("div",{className:`${rf.btnNext}`,onClick:()=>t(),children:"Next"})}const dn="Summary Test",af=Q(),Tt=af?qe:Le;function uf(t){const{handler:i}=c.useContext(_e),n=t.currentStep,s=je(()=>{X()}),a=Ye(),[l,u]=c.useState("animate__bounceInRight"),{isStepIntro:r,closeStepIntro:x}=be(),{isResultShow:y,changeResultShow:f}=Fe(),[p,h]=c.useState(!1),{quizState:g,changeQuizState:m}=Ae(),[o,_]=Se(Dx,t,n),[d,j]=c.useState(1),[S,b]=c.useState(1),[N,L]=c.useState([]),[C,B]=c.useState([]),[E,w]=c.useState([]),[k,A]=c.useState([]),[V,F]=c.useState(""),[q,H]=c.useState(0),[$,R]=c.useState(0),{scoreBoardData:ee,setStudentAnswersPartial:Z,addStudentAnswers:U,makeUserPartialAnswerData:D}=ze(),{bottomPopupState:v,changeBottomPopupState:z}=We(),{playState:T,playAudio:M,stopAudio:P}=ke(),[O,G]=c.useState(!1);if(c.useEffect(()=>{!r&&o&&(s.setup(o.QuizTime,!0),m("studying"))},[r]),c.useEffect(()=>{if(o){let[K,ne,re]=[1,1,0];if(_&&_.length>0){const He=o.Quiz.find(st=>st.QuizNo===_[_.length-1].QuizNo),Pt=(He==null?void 0:He.Examples.length)||0;[K,ne,re]=hr(_,Pt,o.QuizAnswerCount)}const ae=xt(o.Quiz),ye=oe(o.Sentence,_,ae);if(K>1||re>0){const[He,Pt]=Ze(ae,K-1);j(ne),b(K),J(_,ne),w(He),A(ue.shuffle(Pt))}else A(ue.shuffle(ae));Z(_,o.QuizAnswerCount),R(re),H(re),L(ye),B(ae)}},[o]),c.useEffect(()=>{o&&!r&&(H(0),R(0),s.setup(o.QuizTime,!0),m("studying"))},[S]),!o)return e.jsx(e.Fragment,{children:"Loading..."});const le=async(K,ne)=>{try{m("checking");const re=C[S-1].Text===ne;if(g==="studying"){s.stop();const ae=re?"1":"2";let ye=V+ae;const He={quizNo:S,maxCount:o.QuizAnswerCount,answerCount:q+1,ox:re},Pt=D("",t.studyId,t.studentHistoryId,t.bookType,n,o.Quiz[d-1].QuizId,o.Quiz[d-1].QuizNo,S,ae,ye,ye,q+1,o.QuizAnswerCount,C.length,re,He,void 0,t.lastStep===n),st=await Hs(Pt);Number(st.result)===0&&(st.resultMessage&&(i.finishStudy={id:Number(st.result),cause:JSON.stringify(st.resultMessage)}),U(He),re||R($+1),F(ye),H(q+1),ce(re,K))}}catch(re){console.log(re)}},ce=(K,ne)=>{z({isActive:!0,isCorrect:K}),K?a.play(ne,[Tt.correct,"animate__fadeIn"]):a.play(ne,[Tt.incorrect,"animate__headShake"])},de=K=>{const ne=!!a.isContain(K,"animate__fadeIn");setTimeout(()=>{if(a.remove(K,["animate__fadeIn","animate__headShake",Tt.correct,Tt.incorrect]),z({isActive:!1,isCorrect:!1}),ne){const re=me(S,ne),ae=te(S),ye=he(S);if(L(re),w(ae),A(ye),S+1<=C.length){const He=xe();d!==He?(F(""),j(He)):F(V+","),b(S+1)}else G(!0)}else if(q<o.QuizAnswerCount)s.setup(o.QuizTime,!0),m("studying");else{const re=me(S,ne),ae=te(S),ye=he(S);if(L(re),w(ae),A(ye),S+1<=C.length){const He=xe();d!==He?(F(""),j(He)):F(V+","),b(S+1)}else G(!0)}},1e3)},X=async()=>{try{if(m("checking"),g==="studying"){s.stop();let K=V+"2";const ne={quizNo:S,maxCount:o.QuizAnswerCount,answerCount:q+1,ox:!1},re=D("",t.studyId,t.studentHistoryId,t.bookType,n,o.Quiz[d-1].QuizId,o.Quiz[d-1].QuizNo,S,"2",K,K,q+1,o.QuizAnswerCount,C.length,!1,ne,void 0,t.lastStep===n),ae=await Hs(re);Number(ae.result)===0&&(ae.resultMessage&&(i.finishStudy={id:Number(ae.result),cause:JSON.stringify(ae.resultMessage)}),U(ne),R($+1),F(K),H(q+1),z({isActive:!0,isCorrect:!1}),Y(q+1,K))}}catch(K){console.log(K)}},Y=(K,ne)=>{setTimeout(()=>{if(z({isActive:!1,isCorrect:!1}),K>=o.QuizAnswerCount){const re=me(S,!1),ae=te(S),ye=he(S);if(L(re),w(ae),A(ye),S+1<=C.length){const He=xe();d!==He?(F(""),j(He)):F(ne+","),b(S+1)}else G(!0)}else s.setup(o.QuizTime,!0),m("studying")},1e3)},xe=()=>{let K=1;return o.Quiz.map((ne,re)=>{ne.Examples.length>0&&ne.Examples.map(ae=>{ae.Text===C[S].Text&&(K=re+1)})}),K},J=(K,ne)=>{let re="";console.log(ne),console.log(K),K.filter(ae=>{ae.QuizNo===ne&&(ae.AnswerCount===o.QuizAnswerCount||ae.StudentAnswer.slice(-1)==="1"?re=ae.StudentAnswer+",":re=ae.StudentAnswer)}),F(re)},oe=(K,ne,re)=>{const ae=Ii(ne,o.QuizAnswerCount);let ye=0;return K.Texts.map(st=>st.split(" ")).reduce((st,Ft)=>[...st,...Ft]).map(st=>{if(st.includes("┒")){let Ft="none";return ae[ye]&&(ae[ye].ox?Ft="correct":!ae[ye].ox&&ae[ye].answerCount===o.QuizAnswerCount&&(Ft="incorrect")),{Word:re[ye].Text,QuestionIndex:++ye,State:Ft}}else return{Word:st,QuestionIndex:0,State:"none"}})},me=(K,ne)=>{let re=[...N];const ae=N.findIndex(ye=>ye.QuestionIndex===K);return re[ae].State=ne?"correct":"incorrect",re},te=K=>[...E,C[K-1]],he=K=>{const ne=C[K-1].Text;return k.filter(ae=>ae.Text!==ne)},xt=K=>K.map(re=>re.Examples).reduce((re,ae)=>[...re,...ae]),Ze=(K,ne)=>{const re=K.slice(0,ne),ae=K.slice(ne,K.length);return[re,ae]},Nn=()=>{T==="playing"?P():M(o.Sentence.Sounds[0])},ie=()=>{P(),f(!0)},fe=K=>{h(K)};return e.jsx(e.Fragment,{children:r?e.jsx("div",{className:`animate__animated ${l}`,onAnimationEnd:()=>{l==="animate__bounceOutLeft"&&x()},children:e.jsx(ve,{step:n,quizType:dn,comment:"지문을 보고 빈칸에 들어갈 알맞은 답을 순서대로 고르세요.",onStepIntroClozeHandler:()=>{u("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:y?e.jsx(Je,{step:n,quizType:dn,quizAnswerCount:o.QuizAnswerCount,studentAnswer:ee,onFinishActivity:t.onFinishActivity}):e.jsxs(e.Fragment,{children:[e.jsx(we,{quizNumber:S,totalQuizCnt:C.length,life:o.QuizAnswerCount-$,timeMin:s.time.timeMin,timeSec:s.time.timeSec,changeSideMenu:fe}),e.jsx("div",{className:`${Tt.comment} animate__animated animate__fadeInLeft`,children:dn}),e.jsx(Ce,{children:e.jsxs($e,{typeCSS:Tt.summaryTest2,containerCSS:Tt.container,children:[e.jsx(e.Fragment,{children:O&&e.jsx(sf,{playState:T,playSentence:Nn})}),e.jsx(Ky,{isComplete:O,sentenceData:N,questionNo:S}),e.jsx(e.Fragment,{children:O?e.jsx(cf,{showResult:ie}):e.jsxs(e.Fragment,{children:[e.jsx(Gy,{}),e.jsx(tf,{exampleData:k,checkAnswer:le,onAnimationEnd:de})]})})]})}),e.jsx(Qe,{isSideOpen:p,currentStep:n,currentStepType:dn,quizLength:C.length,maxAnswerCount:o.QuizAnswerCount,scoreBoardData:ee,changeSideMenu:fe}),e.jsx(Ve,{bottomPopupState:v})]})})})}async function lf(t){const{bookType:i,studyId:n,studentHistoryId:s}=t,l=`study/quiz/true-or-false?studentHistoryId=${s}&studyId=${n}&bookType=${i}`;return pe(l,async r=>({ContentsId:Number(r.ContentsId),IsQuizTimeoutIncorrect:!!r.isQuizTimeoutIncorrect,QuizAnswerCount:Number(r.QuizAnswerCount),QuizTime:Number(r.QuizTime),Quiz:r.Quiz.map(x=>({QuizId:x.QuizId.toString(),QuizNo:Number(x.QuizNo),Question:{Text:x.Question.Text,Sound:x.Question.Sound},Examples:x.Examples.map(y=>({Text:y.Text,Sound:y.Sound}))}))}))}const df="_comment_1kqy6_1",_f="_trueOrFalse_1kqy6_20",mf="_container_1kqy6_20",xf="_questionText_1kqy6_27",hf="_textCard_1kqy6_32",yf="_correct_1kqy6_66",ff="_incorrect_1kqy6_71",gf="_answer_1kqy6_76",pf="_awnserText_1kqy6_87",bf="_answers_1kqy6_91",jf="_wordPlayButton_1kqy6_97",Sf="_txtL_1kqy6_112",zf="_trueSentencePopup_1kqy6_124",wf="_title_1kqy6_127",Qf="_sentence_1kqy6_146",Cf="_nextButton_1kqy6_152",Bt={comment:df,trueOrFalse:_f,container:mf,questionText:xf,textCard:hf,correct:yf,incorrect:ff,answer:gf,true:"_true_1kqy6_20",false:"_false_1kqy6_83",awnserText:pf,answers:bf,wordPlayButton:jf,txtL:Sf,trueSentencePopup:zf,title:wf,sentence:Qf,nextButton:Cf},vf="_comment_mb20r_1",$f="_trueOrFalse_mb20r_15",Nf="_container_mb20r_18",Tf="_questionText_mb20r_25",Af="_textCard_mb20r_30",kf="_correct_mb20r_64",If="_incorrect_mb20r_69",Bf="_answer_mb20r_74",Ef="_awnserText_mb20r_85",Pf="_answers_mb20r_89",Mf="_wordPlayButton_mb20r_95",Lf="_txtL_mb20r_110",qf="_trueSentencePopup_mb20r_122",Rf="_title_mb20r_125",Of="_sentence_mb20r_144",Ff="_nextButton_mb20r_150",Et={comment:vf,trueOrFalse:$f,container:Nf,questionText:Tf,textCard:Af,correct:kf,incorrect:If,answer:Bf,true:"_true_mb20r_15",false:"_false_mb20r_81",awnserText:Ef,answers:Pf,wordPlayButton:Mf,txtL:Lf,trueSentencePopup:qf,title:Rf,sentence:Of,nextButton:Ff},Hf=Q(),Df=Hf?Et:Bt;function Wf({text:t}){return e.jsx("div",{className:Df.questionText,dangerouslySetInnerHTML:{__html:t}})}const Vf=Q(),_n=Vf?Et:Bt;function Uf({checkAnswer:t}){return e.jsx("div",{className:`${_n.textCard}`,onClick:i=>t(i.currentTarget,!0),children:e.jsxs("div",{className:_n.answer,children:[e.jsx("div",{className:_n.true,children:"O"}),e.jsx("div",{className:_n.answerText,children:"True"})]})})}const Jf=Q(),mn=Jf?Et:Bt;function Kf({checkAnswer:t}){return e.jsx("div",{className:`${mn.textCard}`,onClick:i=>t(i.currentTarget,!1),children:e.jsxs("div",{className:mn.answer,children:[e.jsx("div",{className:mn.false,children:"X"}),e.jsx("div",{className:mn.answerText,children:"False"})]})})}const Yf=Q(),Gf=Yf?Et:Bt;function Xf({checkAnswer:t}){return e.jsxs("div",{className:Gf.answers,children:[e.jsx(Uf,{checkAnswer:t}),e.jsx(Kf,{checkAnswer:t})]})}const Zf=Q(),hi=Zf?Et:Bt;function e1({playState:t,playSentence:i}){return e.jsxs("div",{className:hi.wordPlayButton,onClick:()=>i(),children:[t==="playing"?e.jsx(Be,{isColor:!0,width:24,height:24}):e.jsx(Ie,{isColor:!0,width:24,height:24}),e.jsx("div",{className:hi.txtL,children:"Playback"})]})}const t1=Q(),Vt=t1?Et:Bt;function n1({playState:t,sentence:i,playSentence:n,goNextQuiz:s}){return e.jsxs("div",{className:Vt.trueSentencePopup,children:[e.jsx("div",{className:Vt.title,children:"True Sentence"}),e.jsxs("div",{className:Vt.container,children:[e.jsx(e1,{playState:t,playSentence:n}),e.jsx("div",{className:Vt.sentence,dangerouslySetInnerHTML:{__html:i}})]}),e.jsx("div",{className:Vt.nextButton,onClick:()=>s(),children:"Next"})]})}const xn="True or False",s1=Q(),At=s1?Et:Bt;function i1(t){const{handler:i}=c.useContext(_e),n=t.currentStep,s=je(()=>{o&&(o.QuizTime>300||ee())}),a=Ye(),[l,u]=c.useState("animate__bounceInRight"),{isStepIntro:r,closeStepIntro:x}=be(),{isResultShow:y,changeResultShow:f}=Fe(),[p,h]=c.useState(!1),{quizState:g,changeQuizState:m}=Ae(),[o,_]=Se(lf,t,n),{scoreBoardData:d,setStudentAnswers:j,addStudentAnswers:S,makeUserAnswerData:b}=ze(),[N,L]=c.useState(1),[C,B]=c.useState(0),[E,w]=c.useState(0),{bottomPopupState:k,changeBottomPopupState:A}=We(),[V,F]=c.useState(!1),{playState:q,playAudio:H,stopAudio:$}=ke();if(c.useEffect(()=>{!r&&o&&(s.setup(o.QuizTime,!0),m("studying"))},[r]),c.useEffect(()=>{if(o){const[z,T]=Ue(_,o.QuizAnswerCount);B(T),w(T),j(_,o.QuizAnswerCount),L(z)}},[o]),c.useEffect(()=>{!r&&!y&&o&&(s.setup(o.QuizTime,!0),B(0),w(0),m("studying"))},[N]),c.useEffect(()=>{g==="studying"&&o&&!r&&!y&&H(o.Quiz[N-1].Question.Sound)},[g]),c.useEffect(()=>{o&&!r&&!y&&(V?H(o.Quiz[N-1].Question.Sound):N+1>o.Quiz.length?f(!0):L(N+1))},[V]),!o)return e.jsx(e.Fragment,{children:"Loading..."});const R=async(z,T)=>{try{if(m("checking"),g==="studying"){$(),s.stop();const M=/<[^>]*>/gi,P=o.Quiz[N-1].Question.Text,O=o.Quiz[N-1].Examples[0].Text,G=P===O,le=G===T,ce={quizNo:N,maxCount:o.QuizAnswerCount,answerCount:C+1,ox:le},de=b("",t.studyId,t.studentHistoryId,t.bookType,n,o.Quiz[N-1].QuizId,o.Quiz[N-1].QuizNo,N,o.Quiz[N-1].Question.Text.replace(M,""),`${le?"1":"2"}`,C+1,o.QuizAnswerCount,o.Quiz.length,le,ce,void 0,t.lastStep===n),X=await ge(de);Number(X.result)===0&&(X.resultMessage&&(i.finishStudy={id:Number(X.result),cause:JSON.stringify(X.resultMessage)}),S(ce),le?a.play(z,["animate__fadeIn",At.correct]):(a.play(z,["animate__pulse",At.incorrect]),w(E+1)),B(C+1),Z(le,G,z))}}catch(M){console.log(M)}},ee=async()=>{try{if(m("checking"),g==="studying"){$(),s.stop();const z=/<[^>]*>/gi,T=o.Quiz[N-1].Question.Text,M=o.Quiz[N-1].Examples[0].Text,P=T===M,O={quizNo:N,maxCount:o.QuizAnswerCount,answerCount:C+1,ox:!1},G=b("",t.studyId,t.studentHistoryId,t.bookType,n,o.Quiz[N-1].QuizId,o.Quiz[N-1].QuizNo,N,o.Quiz[N-1].Question.Text.replace(z,""),"2",C+1,o.QuizAnswerCount,o.Quiz.length,!1,O,void 0,t.lastStep===n),le=await ge(G);Number(le.result)===0&&(le.resultMessage&&(i.finishStudy={id:Number(le.result),cause:JSON.stringify(le.resultMessage)}),S(O),w(E+1),B(C+1),Z(!1,P))}}catch(z){console.log(z)}},Z=(z,T,M)=>{A({isActive:!0,isCorrect:z}),setTimeout(()=>{A({isActive:!1,isCorrect:!1}),M&&a.remove(M,["animate__fadeIn","animate__headShake",At.correct,At.incorrect]),T?N+1>o.Quiz.length?f(!0):L(N+1):F(!0)},2e3)},U=()=>{$(),F(!1)},D=z=>{h(z)},v=()=>{q==="playing"?$():H(o.Quiz[N-1].Question.Sound)};return e.jsx(e.Fragment,{children:r?e.jsx("div",{className:`animate__animated ${l}`,onAnimationEnd:()=>{l==="animate__bounceOutLeft"&&x()},children:e.jsx(ve,{step:n,quizType:xn,comment:"문장을 읽고 맞으면 O, 틀리면 X를 누르세요.",onStepIntroClozeHandler:()=>{u("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:y?e.jsx(Je,{step:n,quizType:xn,quizAnswerCount:o.QuizAnswerCount,studentAnswer:d,onFinishActivity:t.onFinishActivity}):e.jsxs(e.Fragment,{children:[e.jsx(we,{quizNumber:N,totalQuizCnt:Object.keys(o.Quiz).length,life:o.QuizAnswerCount-E,timeMin:s.time.timeMin,timeSec:s.time.timeSec,changeSideMenu:D}),e.jsx("div",{className:`${At.comment} animate__animated animate__fadeInLeft`,children:xn}),e.jsx(Ce,{children:V?e.jsx(n1,{playState:q,sentence:o.Quiz[N-1].Examples[0].Text,playSentence:v,goNextQuiz:U}):e.jsxs(e.Fragment,{children:[e.jsx(W,{height:15}),e.jsxs($e,{typeCSS:At.trueOrFalse,containerCSS:At.container,children:[e.jsx(W,{height:10}),e.jsx(Wf,{text:o.Quiz[N-1].Question.Text}),e.jsx(W,{height:10}),e.jsx(Xf,{checkAnswer:R})]}),e.jsx(W,{height:15})]})}),e.jsx(Qe,{isSideOpen:p,currentStep:n,currentStepType:xn,quizLength:o.Quiz.length,maxAnswerCount:o.QuizAnswerCount,scoreBoardData:d,changeSideMenu:D}),e.jsx(Ve,{bottomPopupState:k})]})})})}const o1="_comment_1z9tc_1",r1="_wordPlayButton_1z9tc_20",c1="_txtL_1z9tc_34",a1="_txtP_1z9tc_38",u1="_wordPlayButton2_1z9tc_43",l1="_btnNext_1z9tc_66",d1="_reTryButton_1z9tc_89",_1="_iconChevLeft_1z9tc_112",m1="_iconChevRight_1z9tc_127",x1="_vocabularyPractice1_1z9tc_142",h1="_container_1z9tc_148",y1="_wordCard_1z9tc_156",f1="_wordImage_1z9tc_173",g1="_wordText_1z9tc_179",p1="_indicator_1z9tc_185",b1="_goNextStepBox_1z9tc_251",j1="_vocabularyPractice2_1z9tc_269",S1="_vocabularyPractice3_1z9tc_398",z1="_wordTyping_1z9tc_411",w1="_textField_1z9tc_415",Q1="_inputField_1z9tc_420",C1="_count_1z9tc_461",v1="_enterButton_1z9tc_469",$1="_enterIcon_1z9tc_483",N1="_meaning_1z9tc_493",T1="_vocabularyPractice4_1z9tc_524",A1="_sentence_1z9tc_568",Ne={comment:o1,wordPlayButton:r1,txtL:c1,txtP:a1,wordPlayButton2:u1,btnNext:l1,reTryButton:d1,iconChevLeft:_1,iconChevRight:m1,vocabularyPractice1:x1,container:h1,wordCard:y1,wordImage:f1,wordText:g1,indicator:p1,goNextStepBox:b1,vocabularyPractice2:j1,vocabularyPractice3:S1,wordTyping:z1,textField:w1,inputField:Q1,count:C1,enterButton:v1,enterIcon:$1,meaning:N1,vocabularyPractice4:T1,sentence:A1},k1="_comment_qkkbu_1",I1="_wordPlayButton_qkkbu_20",B1="_txtL_qkkbu_34",E1="_txtP_qkkbu_38",P1="_wordPlayButton2_qkkbu_43",M1="_btnNext_qkkbu_64",L1="_reTryButton_qkkbu_86",q1="_iconChevLeft_qkkbu_108",R1="_iconChevRight_qkkbu_123",O1="_vocabularyPractice1_qkkbu_138",F1="_container_qkkbu_141",H1="_wordCard_qkkbu_149",D1="_wordImage_qkkbu_166",W1="_wordText_qkkbu_172",V1="_indicator_qkkbu_178",U1="_goNextStepBox_qkkbu_243",J1="_vocabularyPractice2_qkkbu_261",K1="_vocabularyPractice3_qkkbu_378",Y1="_wordTyping_qkkbu_394",G1="_textField_qkkbu_400",X1="_inputField_qkkbu_405",Z1="_count_qkkbu_448",eg="_enterButton_qkkbu_461",tg="_enterIcon_qkkbu_476",ng="_meaning_qkkbu_486",sg="_vocabularyPractice4_qkkbu_518",ig="_sentence_qkkbu_562",Te={comment:k1,wordPlayButton:I1,txtL:B1,txtP:E1,wordPlayButton2:P1,btnNext:M1,reTryButton:L1,iconChevLeft:q1,iconChevRight:R1,vocabularyPractice1:O1,container:F1,wordCard:H1,wordImage:D1,wordText:W1,indicator:V1,goNextStepBox:U1,vocabularyPractice2:J1,vocabularyPractice3:K1,wordTyping:Y1,textField:G1,inputField:X1,count:Z1,enterButton:eg,enterIcon:tg,meaning:ng,vocabularyPractice4:sg,sentence:ig};async function Hi(t){const{bookType:i,studyId:n,studentHistoryId:s}=t,a=`study/quiz/vocabulary-1-practice?studentHistoryId=${s}&studyId=${n}&bookType=${i}`;return pe(a,async u=>({ContentsId:Number(u.ContentsId),IsQuizTimeoutIncorrect:!!u.isQuizTimeoutIncorrect,QuizAnswerCount:Number(u.QuizAnswerCount),QuizTime:Number(u.QuizTime),MainMeanLanguage:u.MainMeanLanguage,SubMeanLanguage:u.SubMeanLanguage,Quiz:u.Quiz.map(r=>({QuizId:r.QuizId.toString(),QuizNo:Number(r.QuizNo),Question:{Text:r.Question.Text,Image:r.Question.Image,Sound:r.Question.Sound,SpeechPart:r.Question.SpeechPart,Korean:r.Question.Korean,Chinese:r.Question.Chinese,Japanese:r.Question.Japanese,Vietnamese:r.Question.Vietnamese,Indonesian:r.Question.Indonesian,English:r.Question.English,Britannica:r.Question.Britannica},Examples:r.Examples.map(x=>({Text:x.Text}))}))}))}async function og(t){const{bookType:i,studyId:n,studentHistoryId:s}=t,a=`study/quiz/vocabulary-1?studentHistoryId=${s}&studyId=${n}&bookType=${i}`;return pe(a,async u=>({ContentsId:Number(u.ContentsId),IsQuizTimeoutIncorrect:!!u.isQuizTimeoutIncorrect,QuizAnswerCount:Number(u.QuizAnswerCount),QuizTime:Number(u.QuizTime),MainMeanLanguage:u.MainMeanLanguage,SubMeanLanguage:u.SubMeanLanguage,Quiz:u.Quiz.map(r=>({QuizId:r.QuizId.toString(),QuizNo:Number(r.QuizNo),Question:{Text:r.Question.Text,Image:r.Question.Image,Sound:r.Question.Sound,SpeechPart:r.Question.SpeechPart,Korean:r.Question.Korean,Chinese:r.Question.Chinese,Japanese:r.Question.Japanese,Vietnamese:r.Question.Vietnamese,Indonesian:r.Question.Indonesian,English:r.Question.English,Britannica:r.Question.Britannica},Examples:r.Examples.map(x=>({Text:x.Text}))}))}))}async function Di(t){const{bookType:i,studyId:n,studentHistoryId:s}=t,a=`study/quiz/vocabulary-2-practice?studentHistoryId=${s}&studyId=${n}&bookType=${i}`;return pe(a,async u=>({ContentsId:Number(u.ContentsId),IsQuizTimeoutIncorrect:!!u.isQuizTimeoutIncorrect,QuizAnswerCount:Number(u.QuizAnswerCount),QuizTime:Number(u.QuizTime),MainMeanLanguage:u.MainMeanLanguage,SubMeanLanguage:u.SubMeanLanguage,Quiz:u.Quiz.map(r=>({QuizId:r.QuizId.toString(),QuizNo:Number(r.QuizNo),Question:{Text:r.Question.Text,Image:r.Question.Image,Sound:r.Question.Sound,Word:r.Question.Word,WordSound:r.Question.WordSound,SpeechPart:r.Question.SpeechPart,Korean:r.Question.Korean,Chinese:r.Question.Chinese,Japanese:r.Question.Japanese,Vietnamese:r.Question.Vietnamese,Indonesian:r.Question.Indonesian,English:r.Question.English,Britannica:r.Question.Britannica},Examples:r.Examples.map(x=>({Text:x.Text}))}))}))}async function rg(t){const{bookType:i,studyId:n,studentHistoryId:s}=t,a=`study/quiz/vocabulary-2?studentHistoryId=${s}&studyId=${n}&bookType=${i}`;return pe(a,async u=>({ContentsId:Number(u.ContentsId),IsQuizTimeoutIncorrect:!!u.isQuizTimeoutIncorrect,QuizAnswerCount:Number(u.QuizAnswerCount),QuizTime:Number(u.QuizTime),MainMeanLanguage:u.MainMeanLanguage,SubMeanLanguage:u.SubMeanLanguage,Quiz:u.Quiz.map(r=>({QuizId:r.QuizId.toString(),QuizNo:Number(r.QuizNo),Question:{Text:r.Question.Text,Image:r.Question.Image,Sound:r.Question.Sound,Word:r.Question.Word,WordSound:r.Question.WordSound,SpeechPart:r.Question.SpeechPart,Korean:r.Question.Korean,Chinese:r.Question.Chinese,Japanese:r.Question.Japanese,Vietnamese:r.Question.Vietnamese,Indonesian:r.Question.Indonesian,English:r.Question.English,Britannica:r.Question.Britannica},Examples:r.Examples.map(x=>({Text:x.Text}))}))}))}async function Wi(t){const{bookType:i,studyId:n,studentHistoryId:s}=t,a=`study/quiz/vocabulary-3-practice?studentHistoryId=${s}&studyId=${n}&bookType=${i}`;return pe(a,async u=>({ContentsId:Number(u.ContentsId),IsQuizTimeoutIncorrect:!!u.isQuizTimeoutIncorrect,QuizAnswerCount:Number(u.QuizAnswerCount),QuizTime:Number(u.QuizTime),IsEnabledTyping:u.IsEnabledTyping,IsSkipAvailable:u.IsSkipAvailable,MainMeanLanguage:u.MainMeanLanguage,SubMeanLanguage:u.SubMeanLanguage,Quiz:u.Quiz.map(r=>({QuizId:r.QuizId.toString(),QuizNo:Number(r.QuizNo),Question:{Text:r.Question.Text,Sound:r.Question.Sound,SpeechPart:r.Question.SpeechPart,Korean:r.Question.Korean,Chinese:r.Question.Chinese,Japanese:r.Question.Japanese,Vietnamese:r.Question.Vietnamese,Indonesian:r.Question.Indonesian,English:r.Question.English,Britannica:r.Question.Britannica}}))}))}async function cg(t){const{bookType:i,studyId:n,studentHistoryId:s}=t,a=`study/quiz/vocabulary-3?studentHistoryId=${s}&studyId=${n}&bookType=${i}`;return pe(a,async u=>({ContentsId:Number(u.ContentsId),IsQuizTimeoutIncorrect:!!u.isQuizTimeoutIncorrect,QuizAnswerCount:Number(u.QuizAnswerCount),QuizTime:Number(u.QuizTime),MainMeanLanguage:u.MainMeanLanguage,SubMeanLanguage:u.SubMeanLanguage,IsEnablePenaltyReview:!!u.IsEnablePenaltyReview,Hint:{IsEnabled:u.Hint.IsEnabled,Max:u.Hint.Max,Try:u.Hint.Try},Quiz:u.Quiz.map(r=>({QuizId:r.QuizId.toString(),QuizNo:Number(r.QuizNo),Question:{Text:r.Question.Text,Sound:r.Question.Sound,SpeechPart:r.Question.SpeechPart,Korean:r.Question.Korean,Chinese:r.Question.Chinese,Japanese:r.Question.Japanese,Vietnamese:r.Question.Vietnamese,Indonesian:r.Question.Indonesian,English:r.Question.English,Britannica:r.Question.Britannica}}))}))}async function ag(t,i,n){const s=`study/hint/Vocabulary?studentHistoryId=${i}&studyId=${t}&quizNo=${n}`;return Ti(s,async l=>({Type:l.Type,Hint:l.Hint,TryHint:l.TryHint,ErrorNo:l.ErrorNo}))}async function Vi(t){const{bookType:i,studyId:n,studentHistoryId:s}=t,a=`study/quiz/vocabulary-4-practice?studentHistoryId=${s}&studyId=${n}&bookType=${i}`;return pe(a,async u=>({ContentsId:Number(u.ContentsId),IsQuizTimeoutIncorrect:!!u.isQuizTimeoutIncorrect,QuizAnswerCount:Number(u.QuizAnswerCount),QuizTime:Number(u.QuizTime),MainMeanLanguage:u.MainMeanLanguage,SubMeanLanguage:u.SubMeanLanguage,Quiz:u.Quiz.map(r=>({QuizId:r.QuizId.toString(),QuizNo:Number(r.QuizNo),Question:{Text:r.Question.Text,Sound:r.Question.Sound,SpeechPart:r.Question.SpeechPart,Korean:r.Question.Korean,Chinese:r.Question.Chinese,Japanese:r.Question.Japanese,Vietnamese:r.Question.Vietnamese,Indonesian:r.Question.Indonesian,English:r.Question.English,Britannica:r.Question.Britannica},Examples:r.Examples.map(x=>({Text:x.Text}))}))}))}async function ug(t){const{bookType:i,studyId:n,studentHistoryId:s}=t,a=`study/quiz/vocabulary-4?studentHistoryId=${s}&studyId=${n}&bookType=${i}`;return pe(a,async u=>({ContentsId:Number(u.ContentsId),IsQuizTimeoutIncorrect:!!u.isQuizTimeoutIncorrect,QuizAnswerCount:Number(u.QuizAnswerCount),QuizTime:Number(u.QuizTime),MainMeanLanguage:u.MainMeanLanguage,SubMeanLanguage:u.SubMeanLanguage,Quiz:u.Quiz.map(r=>({QuizId:r.QuizId.toString(),QuizNo:Number(r.QuizNo),Question:{Text:r.Question.Text,Sound:r.Question.Sound,SpeechPart:r.Question.SpeechPart,Korean:r.Question.Korean,Chinese:r.Question.Chinese,Japanese:r.Question.Japanese,Vietnamese:r.Question.Vietnamese,Indonesian:r.Question.Indonesian,English:r.Question.English,Britannica:r.Question.Britannica},Examples:r.Examples.map(x=>({Text:x.Text}))}))}))}const lg=Q(),yi=lg?Te:Ne;function dg({playState:t,cardInfo:i,playWord:n}){return e.jsxs("div",{className:yi.wordPlayButton,onClick:()=>n(),children:[t===""?e.jsx(Ie,{isColor:!0,width:24,height:24}):e.jsx(Be,{isColor:!0,width:24,height:24}),e.jsx("div",{className:yi.txtL,children:i.Question.Text})]})}const _g=Q(),Hn=_g?Te:Ne;function mg({playState:t,cardInfo:i,playWord:n}){return e.jsxs("div",{className:`${Hn.wordCard} animate__animated`,children:[e.jsx("div",{className:Hn.wordImage,children:e.jsx("img",{src:i.Question.Image,width:"100%"})}),e.jsx("div",{className:Hn.wordText,children:e.jsx(dg,{playState:t,cardInfo:i,playWord:n})})]})}const xg=Q(),Dn=xg?Te:Ne;function hg({isLastPage:t,quizNo:i,totalQuizCnt:n,changeQuizNo:s}){return e.jsxs("div",{className:Dn.indicator,children:[e.jsx("span",{style:t||i>1?{opacity:"1"}:{opacity:".2"},onClick:()=>s(i-1),children:e.jsx("div",{className:Dn.iconChevLeft})}),e.jsxs("span",{children:[i," / ",n]}),e.jsx("span",{onClick:()=>s(i+1),children:e.jsx("div",{className:Dn.iconChevRight})})]})}const yg=Q(),fg=yg?Te:Ne;function gg({goTest:t}){return e.jsx("div",{className:`${fg.btnNext} animate__animated animate__flash`,onClick:()=>t(),children:"Next"})}const Wn="Vocabulary Practice",pg=Q(),Vn=pg?Te:Ne;function bg(t){const i=t.currentStep,n=je(()=>{}),[s,a]=c.useState("animate__bounceInRight"),{isStepIntro:l,closeStepIntro:u}=be(),[r,x]=c.useState(!1),{scoreBoardData:y}=ze(),[f,p]=Se(Hi,t,i),[h,g]=c.useState(1),[m,o]=c.useState(!1),{playState:_,playAudio:d,stopAudio:j}=ke();if(c.useEffect(()=>{!l&&f&&(n.setup(f.QuizTime,!0),b())},[l]),c.useEffect(()=>{!l&&f&&(j(),h===f.Quiz.length&&o(!0),b())},[h]),c.useEffect(()=>{f&&_===""&&h===Object.keys(f.Quiz).length&&o(!0)},[_]),c.useEffect(()=>{!l&&!m&&g(1)},[m]),!f)return e.jsx("div",{children:"Loading..."});const S=C=>{j(),C<1?m&&g(Object.keys(f.Quiz).length):C>Object.keys(f.Quiz).length?g(1):g(C)},b=()=>{_===""?d(f.Quiz[h-1].Question.Sound):j()},N=C=>{x(C)},L=()=>{j(),t.changeVocaState(!1)};return e.jsx(e.Fragment,{children:l?e.jsx("div",{className:`animate__animated ${s}`,onAnimationEnd:()=>{s==="animate__bounceOutLeft"&&u()},children:e.jsx(ve,{step:i,quizType:Wn,comment:"카드를 넘기면서 단어를 학습하세요.",onStepIntroClozeHandler:()=>{a("animate__bounceOutLeft")}})}):e.jsxs(e.Fragment,{children:[e.jsx(we,{quizNumber:h,totalQuizCnt:Object.keys(f.Quiz).length,life:f.QuizAnswerCount,timeMin:n.time.timeMin,timeSec:n.time.timeSec,changeSideMenu:N}),e.jsx("div",{className:`${Vn.comment} animate__animated animate__fadeInLeft`,children:Wn}),e.jsx(Ce,{children:e.jsxs($e,{typeCSS:Vn.vocabularyPractice1,containerCSS:Vn.container,children:[e.jsx(mg,{playState:_,cardInfo:f.Quiz[h-1],playWord:b}),e.jsx(hg,{isLastPage:m,quizNo:h,totalQuizCnt:f.Quiz.length,changeQuizNo:S}),e.jsx(e.Fragment,{children:m&&e.jsx(gg,{goTest:L})})]})}),e.jsx(Qe,{isSideOpen:r,currentStep:i,currentStepType:Wn,quizLength:f.Quiz.length,maxAnswerCount:f.QuizAnswerCount,scoreBoardData:y,changeSideMenu:N})]})})}const jg="_comment_asjyi_1",Sg="_wordPlayButton_asjyi_20",zg="_txtL_asjyi_35",wg="_cardNumber_asjyi_46",Qg="_hintButton_asjyi_61",Cg="_hintPopup_asjyi_84",vg="_screenBlock_asjyi_121",$g="_testReview_asjyi_131",Ng="_title_asjyi_134",Tg="_container_asjyi_139",Ag="_sentence_asjyi_148",kg="_nextButton_asjyi_158",Ig="_deactNextButton_asjyi_180",Bg="_reviewAnswer_asjyi_206",Eg="_currentOrder_asjyi_217",Pg="_blink_asjyi_1",Mg="_currentInput_asjyi_237",Lg="_otherInput_asjyi_238",qg="_enterButton_asjyi_245",Rg="_hintText_asjyi_271",Og="_correctAnswer_asjyi_279",Fg="_vocabularyTest1_asjyi_295",Hg="_questionBox_asjyi_300",Dg="_wordImage_asjyi_316",Wg="_wordText_asjyi_325",Vg="_textCard_asjyi_331",Ug="_correct_asjyi_279",Jg="_incorrect_asjyi_371",Kg="_awnserText_asjyi_380",Yg="_answers_asjyi_384",Gg="_vocabularyTest2_asjyi_391",Xg="_blank_asjyi_438",Zg="_vocabularyTest3_asjyi_522",ep="_wordCard_asjyi_535",tp="_wordTyping_asjyi_535",np="_textField_asjyi_539",sp="_inputField_asjyi_547",ip="_count_asjyi_604",op="_enterIcon_asjyi_626",rp="_meaning_asjyi_636",cp="_txtP_asjyi_644",ap="_vocabularyTest4_asjyi_650",Ee={comment:jg,wordPlayButton:Sg,txtL:zg,cardNumber:wg,hintButton:Qg,hintPopup:Cg,screenBlock:vg,testReview:$g,title:Ng,container:Tg,sentence:Ag,nextButton:kg,deactNextButton:Ig,reviewAnswer:Bg,currentOrder:Eg,blink:Pg,currentInput:Mg,otherInput:Lg,enterButton:qg,hintText:Rg,correctAnswer:Og,vocabularyTest1:Fg,questionBox:Hg,wordImage:Dg,wordText:Wg,textCard:Vg,correct:Ug,incorrect:Jg,awnserText:Kg,answers:Yg,vocabularyTest2:Gg,blank:Xg,vocabularyTest3:Zg,wordCard:ep,wordTyping:tp,textField:np,inputField:sp,count:ip,enterIcon:op,meaning:rp,txtP:cp,vocabularyTest4:ap},up="_comment_yur7e_1",lp="_wordPlayButton_yur7e_20",dp="_txtL_yur7e_35",_p="_cardNumber_yur7e_47",mp="_hintButton_yur7e_62",xp="_hintPopup_yur7e_85",hp="_screenBlock_yur7e_122",yp="_testReview_yur7e_132",fp="_title_yur7e_132",gp="_container_yur7e_137",pp="_sentence_yur7e_146",bp="_nextButton_yur7e_155",jp="_deactNextButton_yur7e_177",Sp="_reviewAnswer_yur7e_198",zp="_currentOrder_yur7e_209",wp="_blink_yur7e_1",Qp="_currentInput_yur7e_229",Cp="_otherInput_yur7e_230",vp="_enterButton_yur7e_237",$p="_hintText_yur7e_263",Np="_correctAnswer_yur7e_271",Tp="_vocabularyTest1_yur7e_287",Ap="_questionBox_yur7e_292",kp="_wordImage_yur7e_307",Ip="_wordText_yur7e_316",Bp="_textCard_yur7e_322",Ep="_correct_yur7e_271",Pp="_incorrect_yur7e_356",Mp="_awnserText_yur7e_365",Lp="_answers_yur7e_369",qp="_vocabularyTest2_yur7e_376",Rp="_blank_yur7e_422",Op="_vocabularyTest3_yur7e_501",Fp="_wordCard_yur7e_514",Hp="_wordTyping_yur7e_517",Dp="_textField_yur7e_521",Wp="_inputField_yur7e_529",Vp="_count_yur7e_586",Up="_enterIcon_yur7e_608",Jp="_meaning_yur7e_618",Kp="_txtP_yur7e_627",Yp="_vocabularyTest4_yur7e_633",Pe={comment:up,wordPlayButton:lp,txtL:dp,cardNumber:_p,hintButton:mp,hintPopup:xp,screenBlock:hp,testReview:yp,title:fp,container:gp,sentence:pp,nextButton:bp,deactNextButton:jp,reviewAnswer:Sp,currentOrder:zp,blink:wp,currentInput:Qp,otherInput:Cp,enterButton:vp,hintText:$p,correctAnswer:Np,vocabularyTest1:Tp,questionBox:Ap,wordImage:kp,wordText:Ip,textCard:Bp,correct:Ep,incorrect:Pp,awnserText:Mp,answers:Lp,vocabularyTest2:qp,blank:Rp,vocabularyTest3:Op,wordCard:Fp,wordTyping:Hp,textField:Dp,inputField:Wp,count:Vp,enterIcon:Up,meaning:Jp,txtP:Kp,vocabularyTest4:Yp},Gp=Q(),fi=Gp?Pe:Ee;function Xp({img:t}){return e.jsx("div",{className:fi.questionBox,children:e.jsx("div",{className:fi.wordImage,children:e.jsx("img",{src:t,width:"100%"})})})}const Zp=Q(),Un=Zp?Pe:Ee;function eb({index:t,text:i,checkAnswer:n,onAnimationEndHandler:s}){return e.jsxs("div",{className:`${Un.textCard} animate__animated`,onClick:a=>n(a.currentTarget,i),onAnimationEnd:a=>s(a),children:[e.jsx("div",{className:Un.cardNumber,children:t}),e.jsx("div",{className:Un.awnserText,children:i})]})}const tb=Q(),nb=tb?Pe:Ee;function sb({exampleData:t,checkAnswer:i,onAnimationEndHandler:n}){return e.jsx("div",{className:nb.answers,children:t.map((s,a)=>e.jsx(eb,{index:a+1,text:s.Text,checkAnswer:i,onAnimationEndHandler:n}))})}const hn="Vocabulary Test",vs=Q(),gt=vs?Pe:Ee;function ib(t){const{handler:i}=c.useContext(_e),n=t.currentStep,s=je(()=>{R(void 0)}),a=Ye(),[l,u]=c.useState("animate__bounceInRight"),{isStepIntro:r,closeStepIntro:x}=be(),{isResultShow:y,changeResultShow:f}=Fe(),[p,h]=c.useState(!1),{quizState:g,changeQuizState:m}=Ae(),[o,_]=Se(og,t,n),[d,j]=c.useState(1),{scoreBoardData:S,setStudentAnswers:b,addStudentAnswers:N,makeUserAnswerData:L}=ze(),[C,B]=c.useState([]),[E,w]=c.useState(0),[k,A]=c.useState(0),{bottomPopupState:V,changeBottomPopupState:F}=We(),{playAudio:q}=ke(),H=c.useRef(null),$=c.useRef(null);if(c.useEffect(()=>{!r&&o&&(s.setup(o.QuizTime,!0),m("studying"))},[r]),c.useEffect(()=>{if(o)try{const[v,z]=Ue(_,o.QuizAnswerCount);w(z),A(z),B(ue.shuffle(o.Quiz[v-1].Examples)),b(_,o.QuizAnswerCount),j(v)}catch(v){console.log(v)}},[o]),c.useEffect(()=>{!r&&!y&&o&&(s.setup(o.QuizTime,!0),H.current&&$.current&&(a.play(H.current,["animate__fadeInRight"]),a.play($.current,["animate__fadeInRight"])),w(0),A(0),B(ue.shuffle(o.Quiz[d-1].Examples)),setTimeout(()=>{m("studying")},1e3))},[d]),c.useEffect(()=>{o&&g==="studying"&&H.current&&$.current&&(s.setup(o.QuizTime,!0),a.remove(H.current,["animate__fadeInRight"]),a.remove($.current,["animate__fadeInRight"]))},[g]),!o)return e.jsx(e.Fragment,{children:"Loading..."});const R=async(v=void 0,z="quiz time over")=>{try{m("checking");const T=o.Quiz[d-1].Question.Text===z,M={quizNo:d,maxCount:o.QuizAnswerCount,answerCount:E+1,ox:T},P=L("",t.studyId,t.studentHistoryId,t.bookType,n,o.Quiz[d-1].QuizId,o.Quiz[d-1].QuizNo,d,o.Quiz[d-1].Question.Text,z,E+1,o.QuizAnswerCount,o.Quiz.length,T,M,void 0,t.lastStep===n);if(g==="studying"){s.stop();const O=await ge(P);Number(O.result)===0&&(O.resultMessage&&(i.finishStudy={id:Number(O.result),cause:JSON.stringify(O.resultMessage)}),T||A(k+1),w(E+1),N(M),ee(v,T,E+1))}}catch(T){console.log(T)}},ee=(v,z,T)=>{s.stop(),F({isActive:!0,isCorrect:z}),v?z?a.play(v,["animate__fadeIn",gt.correct]):a.play(v,["animate__headShake",gt.incorrect]):U(T)},Z=v=>{const z=v.currentTarget;setTimeout(()=>{if(F({isActive:!1,isCorrect:!1}),!!a.isContain(z,"animate__fadeIn")){const M=()=>{a.remove(z,["animate__fadeIn",gt.correct]),d+1>o.Quiz.length?f(!0):j(d+1)};q(o.Quiz[d-1].Question.Sound,M)}else if(E>=o.QuizAnswerCount)if(d+1>o.Quiz.length){const M=()=>{a.remove(z,["animate__headShake",gt.incorrect]),f(!0)};q(o.Quiz[d-1].Question.Sound,M)}else{const M=()=>{a.remove(z,["animate__headShake",gt.incorrect]),j(d+1)};q(o.Quiz[d-1].Question.Sound,M)}else a.remove(z,["animate__headShake",gt.incorrect]),s.setup(o.QuizTime,!0),m("studying")},1500)},U=v=>{setTimeout(()=>{if(F({isActive:!1,isCorrect:!1}),v>=o.QuizAnswerCount)if(d+1>o.Quiz.length){const z=()=>{f(!0)};q(o.Quiz[d-1].Question.Sound,z)}else{const z=()=>{j(d+1)};q(o.Quiz[d-1].Question.Sound,z)}else m("studying")},1e3)},D=v=>{h(v)};return e.jsx(e.Fragment,{children:r?e.jsx("div",{className:`animate__animated ${l}`,onAnimationEnd:()=>{l==="animate__bounceOutLeft"&&x()},children:e.jsx(ve,{step:n,quizType:hn,comment:"그림을 보고 알맞은 단어를 고르세요.",onStepIntroClozeHandler:()=>{u("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:y?e.jsx(e.Fragment,{children:e.jsx(Je,{step:n,quizType:hn,quizAnswerCount:o.QuizAnswerCount,studentAnswer:S,onFinishActivity:t.onFinishActivity})}):e.jsxs(e.Fragment,{children:[e.jsx(we,{quizNumber:d,totalQuizCnt:Object.keys(o.Quiz).length,life:o.QuizAnswerCount-k,timeMin:s.time.timeMin,timeSec:s.time.timeSec,changeSideMenu:D}),e.jsx("div",{className:`${gt.comment} animate__animated animate__fadeInLeft`,children:hn}),e.jsxs(Ce,{children:[vs?e.jsx(e.Fragment,{}):e.jsx(W,{height:15}),e.jsxs($e,{typeCSS:gt.vocabularyTest1,containerCSS:gt.container,children:[e.jsx(Xp,{img:o.Quiz[d-1].Question.Image}),e.jsx(W,{height:20}),e.jsx(sb,{exampleData:C,checkAnswer:R,onAnimationEndHandler:Z})]}),vs?e.jsx(W,{height:5}):e.jsx(W,{height:15})]}),e.jsx(Qe,{isSideOpen:p,currentStep:n,currentStepType:hn,quizLength:o.Quiz.length,maxAnswerCount:o.QuizAnswerCount,scoreBoardData:S,changeSideMenu:D}),e.jsx(Ve,{bottomPopupState:V})]})})})}const ob=Q(),gi=ob?Te:Ne;function rb({multiPlayState:t,cardInfo:i,playWord:n}){return e.jsxs("div",{className:gi.wordPlayButton,onClick:()=>n(),children:[t.playState==="playing"&&t.playType==="word"?e.jsx(Be,{isColor:!0,width:24,height:24}):e.jsx(Ie,{isColor:!0,width:24,height:24}),e.jsx("div",{className:gi.txtL,children:i.Question.Word})]})}const cb=Q(),pi=cb?Te:Ne;function ab({multiPlayState:t,cardInfo:i,playSentence:n}){return e.jsxs("div",{className:pi.wordPlayButton,onClick:()=>n(),children:[t.playState==="playing"&&t.playType==="sentence"?e.jsx(Be,{isColor:!0,width:24,height:24}):e.jsx(Ie,{isColor:!0,width:24,height:24}),e.jsx("div",{className:pi.txtP,children:vn(i.Question.Text,i.Question.Word,()=>e.jsx("span",{style:{color:"#f15144"},children:i.Question.Word}))})]})}const ub=Q(),yn=ub?Te:Ne;function lb({cardInfo:t,multiPlayState:i,playWord:n,playSentence:s}){return e.jsxs("div",{className:`${yn.wordCard} animate__animated animate__slideInRight`,children:[e.jsx("div",{className:yn.wordImage,children:e.jsx("img",{src:t.Question.Image,width:"100%"})}),e.jsx("div",{className:yn.wordText,children:e.jsx(rb,{multiPlayState:i,cardInfo:t,playWord:n})}),e.jsx("div",{className:yn.wordText,children:e.jsx(ab,{multiPlayState:i,cardInfo:t,playSentence:s})})]})}const db=Q(),Jn=db?Te:Ne;function _b({isLastPage:t,quizNo:i,totalQuizCnt:n,changeQuizNo:s}){return e.jsxs("div",{className:Jn.indicator,children:[e.jsx("span",{style:t||i>1?{opacity:"1"}:{opacity:".2"},onClick:()=>s(i-1),children:e.jsx("div",{className:Jn.iconChevLeft})}),e.jsxs("span",{children:[i," / ",n]}),e.jsx("span",{onClick:()=>s(i+1),children:e.jsx("div",{className:Jn.iconChevRight})})]})}const mb=Q(),xb=mb?Te:Ne;function hb({goTest:t}){return e.jsx("div",{className:`${xb.btnNext} animate__animated animate__flash`,onClick:()=>t(),children:"Next"})}const Kn="Vocabulary Practice",yb=Q(),Yn=yb?Te:Ne;function fb(t){const i=t.currentStep,n=je(()=>{}),[s,a]=c.useState("animate__bounceInRight"),{isStepIntro:l,closeStepIntro:u}=be(),[r,x]=c.useState(!1),{scoreBoardData:y}=ze(),[f,p]=Se(Di,t,i),[h,g]=c.useState(1),[m,o]=c.useState(!1),{playState:_,playAudio:d,stopAudio:j}=ke(),[S,b]=c.useState({playState:"",playType:""});if(c.useEffect(()=>{!l&&f&&(n.setup(f.QuizTime,!0),setTimeout(()=>{B()},500))},[l]),c.useEffect(()=>{!l&&f&&(j(),h===f.Quiz.length&&o(!0),B())},[h]),c.useEffect(()=>{f&&S.playState===""&&h===Object.keys(f.Quiz).length&&(o(!0),S.playState===""&&j())},[S]),c.useEffect(()=>{!l&&!m&&g(1)},[m]),!f)return e.jsx("div",{children:"Loading..."});const N=k=>{k<1?m&&g(Object.keys(f.Quiz).length):k>Object.keys(f.Quiz).length?g(1):g(k)},L=()=>{if(j(),S.playState==="playing"&&S.playType==="word")b({playState:"",playType:""});else{b({playState:"playing",playType:"word"});const k=()=>{b({playState:"",playType:""})};d(f.Quiz[h-1].Question.WordSound,k)}},C=()=>{if(j(),S.playState==="playing"&&S.playType==="sentence")b({playState:"",playType:""});else{b({playState:"playing",playType:"sentence"});const k=()=>{b({playState:"",playType:""})};d(f.Quiz[h-1].Question.Sound,k)}},B=()=>{j(),b({playState:"playing",playType:"word"});const k=()=>{b({playState:"",playType:""})},A=()=>{b({playState:"playing",playType:"sentence"}),d(f.Quiz[h-1].Question.Sound,k)};d(f.Quiz[h-1].Question.WordSound,A)},E=k=>{x(k)},w=()=>{j(),t.changeVocaState(!1)};return e.jsx(e.Fragment,{children:l?e.jsx("div",{className:`animate__animated ${s}`,onAnimationEnd:()=>{s==="animate__bounceOutLeft"&&u()},children:e.jsx(ve,{step:i,quizType:Kn,comment:"카드를 넘기면서 단어를 학습하세요.",onStepIntroClozeHandler:()=>{a("animate__bounceOutLeft")}})}):e.jsxs(e.Fragment,{children:[e.jsx(we,{quizNumber:h,totalQuizCnt:Object.keys(f.Quiz).length,life:f.QuizAnswerCount,timeMin:n.time.timeMin,timeSec:n.time.timeSec,changeSideMenu:E}),e.jsx("div",{className:`${Yn.comment} animate__animated animate__fadeInLeft`,children:Kn}),e.jsx(Ce,{children:e.jsxs($e,{typeCSS:Yn.vocabularyPractice2,containerCSS:Yn.container,children:[e.jsx(lb,{cardInfo:f.Quiz[h-1],multiPlayState:S,playWord:L,playSentence:C}),e.jsx(_b,{isLastPage:m,quizNo:h,totalQuizCnt:f.Quiz.length,changeQuizNo:N}),e.jsx(e.Fragment,{children:m&&e.jsx(hb,{goTest:w})})]})}),e.jsx(Qe,{isSideOpen:r,currentStep:i,currentStepType:Kn,quizLength:f.Quiz.length,maxAnswerCount:f.QuizAnswerCount,scoreBoardData:y,changeSideMenu:E})]})})}const gb=Q(),Gn=gb?Pe:Ee;function pb({src:t,sentence:i,blankWord:n}){let s="";for(let a=0;a<n.length;a++)s+="_";return e.jsxs("div",{className:Gn.questionBox,children:[e.jsx("div",{className:Gn.wordImage,children:e.jsx("img",{src:t,width:"100%"})}),e.jsxs("div",{className:Gn.wordText,children:[i.split(n)[0]," ",s,i.split(n)[1]]})]})}const bb=Q(),Xn=bb?Pe:Ee;function jb({exampleData:t,index:i,checkAnswer:n,onAnimationEndHandler:s}){return e.jsxs("div",{className:`${Xn.textCard}`,onClick:a=>n(a.currentTarget,t.Text),onAnimationEnd:a=>s(a),children:[e.jsx("div",{className:Xn.cardNumber,children:Number(i+1)}),e.jsx("div",{className:Xn.awnserText,children:t.Text})]})}const Sb=Q(),zb=Sb?Pe:Ee;function wb({exampleData:t,checkAnswer:i,onAnimationEndHandler:n}){return e.jsx("div",{className:zb.answers,children:t.map((s,a)=>e.jsx(jb,{exampleData:s,index:a,checkAnswer:i,onAnimationEndHandler:n},`e-0${a}`))})}const fn="Vocabulary Test",$s=Q(),pt=$s?Pe:Ee;function Qb(t){const{handler:i}=c.useContext(_e),n=t.currentStep,s=je(()=>{}),a=Ye(),[l,u]=c.useState("animate__bounceInRight"),{isStepIntro:r,closeStepIntro:x}=be(),{isResultShow:y,changeResultShow:f}=Fe(),[p,h]=c.useState(!1),{quizState:g,changeQuizState:m}=Ae(),[o,_]=Se(rg,t,n),[d,j]=c.useState(1),{scoreBoardData:S,setStudentAnswers:b,addStudentAnswers:N,makeUserAnswerData:L}=ze(),[C,B]=c.useState([]),[E,w]=c.useState(0),[k,A]=c.useState(0),{bottomPopupState:V,changeBottomPopupState:F}=We(),{playAudio:q}=ke(),H=c.useRef(null),$=c.useRef(null);if(c.useEffect(()=>{!r&&o&&(s.setup(o.QuizTime,!0),m("studying"))},[r]),c.useEffect(()=>{if(o)try{const[D,v]=Ue(_,o.QuizAnswerCount);console.log(D),w(v),A(v),B(ue.shuffle(o.Quiz[D-1].Examples)),b(_,o.QuizAnswerCount),j(D)}catch(D){console.log(D)}},[o]),c.useEffect(()=>{!r&&!y&&o&&(s.setup(o.QuizTime,!0),H.current&&$.current&&(a.play(H.current,["animate__fadeInRight"]),a.play($.current,["animate__fadeInRight"])),w(0),A(0),B(ue.shuffle(o.Quiz[d-1].Examples)),setTimeout(()=>{m("studying")},1e3))},[d]),c.useEffect(()=>{o&&g==="studying"&&H.current&&$.current&&(a.remove(H.current,["animate__fadeInRight"]),a.remove($.current,["animate__fadeInRight"]))},[g]),!o)return e.jsx(e.Fragment,{children:"Loading..."});const R=async(D,v)=>{try{m("checking");const z=o.Quiz[d-1].Examples[0].Text===v,T={quizNo:d,maxCount:o.QuizAnswerCount,answerCount:E+1,ox:z},M=L("",t.studyId,t.studentHistoryId,t.bookType,n,o.Quiz[d-1].QuizId,o.Quiz[d-1].QuizNo,d,o.Quiz[d-1].Examples[0].Text,v,E+1,o.QuizAnswerCount,o.Quiz.length,z,T,void 0,t.lastStep===n);if(g==="studying"){s.stop();const P=await ge(M);Number(P.result)===0&&(P.resultMessage&&(i.finishStudy={id:Number(P.result),cause:JSON.stringify(P.resultMessage)}),z||A(k+1),w(E+1),N(T),ee(D,z))}}catch(z){console.log(z)}},ee=(D,v)=>{F({isActive:!0,isCorrect:v}),v?a.play(D,["animate__fadeIn",pt.correct]):a.play(D,["animate__headShake",pt.incorrect])},Z=D=>{const v=D.currentTarget,z=!!a.isContain(v,"animate__fadeIn");setTimeout(()=>{if(F({isActive:!1,isCorrect:!1}),z){const T=()=>{a.remove(v,["animate__fadeIn",pt.correct]),d+1>o.Quiz.length?f(!0):j(d+1)};q(o.Quiz[d-1].Question.Sound,T)}else E>=o.QuizAnswerCount?d+1>o.Quiz.length?q(o.Quiz[d-1].Question.Sound,()=>{a.remove(v,["animate__headShake",pt.incorrect]),f(!0)}):q(o.Quiz[d-1].Question.Sound,()=>{a.remove(v,["animate__headShake",pt.incorrect]),j(d+1)}):(a.remove(v,["animate__headShake",pt.incorrect]),s.setup(o.QuizTime,!0),m("studying"))},1e3)},U=D=>{h(D)};return e.jsx(e.Fragment,{children:r?e.jsx("div",{className:`animate__animated ${l}`,onAnimationEnd:()=>{l==="animate__bounceOutLeft"&&x()},children:e.jsx(ve,{step:n,quizType:fn,comment:"그림과 문장의 빈칸을 보고 알맞은 단어를 고르세요.",onStepIntroClozeHandler:()=>{u("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:y?e.jsx(e.Fragment,{children:e.jsx(Je,{step:n,quizType:fn,quizAnswerCount:o.QuizAnswerCount,studentAnswer:S,onFinishActivity:t.onFinishActivity})}):e.jsxs(e.Fragment,{children:[e.jsx(we,{quizNumber:d,totalQuizCnt:Object.keys(o.Quiz).length,life:o.QuizAnswerCount-k,timeMin:s.time.timeMin,timeSec:s.time.timeSec,changeSideMenu:U}),e.jsx("div",{className:`${pt.comment} animate__animated animate__fadeInLeft`,children:fn}),e.jsxs(Ce,{children:[$s?e.jsx(e.Fragment,{}):e.jsx(W,{height:15}),e.jsxs($e,{typeCSS:pt.vocabularyTest2,containerCSS:pt.container,children:[e.jsx(pb,{src:o.Quiz[d-1].Question.Image,sentence:o.Quiz[d-1].Question.Text,blankWord:o.Quiz[d-1].Examples[0].Text}),e.jsx(W,{height:20}),e.jsx(wb,{exampleData:C,checkAnswer:R,onAnimationEndHandler:Z})]}),$s?e.jsx(W,{height:5}):e.jsx(W,{height:15})]}),e.jsx(Qe,{isSideOpen:p,currentStep:n,currentStepType:fn,quizLength:o.Quiz.length,maxAnswerCount:o.QuizAnswerCount,scoreBoardData:S,changeSideMenu:U}),e.jsx(Ve,{bottomPopupState:V})]})})})}const Cb=Q(),vb=Cb?Te:Ne;function $b({playState:t,playWord:i}){return e.jsx("div",{className:vb.wordPlayButton2,onClick:()=>i(),tabIndex:-1,children:t==="playing"?e.jsx(Be,{isColor:!0,width:34,height:34}):e.jsx(Ie,{isColor:!0,width:34,height:34})})}const Nb=Q(),Ps=Nb?Te:Ne,Tb=({meanData:t,mainMeanLang:i})=>{const n=ue.upperFirst(i);let s="";switch(n){case"Korean":case"Chinese":case"Japanese":case"Vietnamese":case"Indonesian":s=t.Question[n];break;case"English":t.Question.English!==""&&t.Question.Britannica!==""||t.Question.English===""&&t.Question.Britannica!==""?s=t.Question.Britannica:t.Question.English!==""&&t.Question.Britannica===""&&(s=t.Question[n]);break;default:s=t.Question.Korean}return e.jsxs("div",{className:Ps.txtL,children:[t.Question.SpeechPart,". ",s]})},Ab=({meanData:t,mainMeanLang:i})=>{const n=ue.upperFirst(i);let s="";return n==="English"?e.jsx(e.Fragment,{}):(s=t.Question.Britannica!==""?t.Question.Britannica:t.Question.English,e.jsxs("div",{className:Ps.txtP,children:[t.Question.SpeechPart,". ",s]}))};function kb({meanData:t,mainMeanLang:i}){return e.jsxs("div",{className:Ps.meaning,children:[e.jsx(Tb,{meanData:t,mainMeanLang:i}),e.jsx(W,{height:10}),e.jsx(Ab,{meanData:t,mainMeanLang:i})]})}const Ib=Q(),gn=Ib?Te:Ne;function Bb({isSideOpen:t,isEnabledTyping:i,quizData:n,quizNo:s,tryCount:a,inputVal:l,changeInputVal:u,checkAnswer:r}){const x=c.useRef(null);c.useEffect(()=>{const p=()=>{x.current&&(t?x.current.blur():x.current.focus())};return p(),window.addEventListener("click",p),()=>{window.removeEventListener("click",p)}},[t]);const y=p=>{p.preventDefault();const h=/^[a-zA-Z-' ]+(?:'){0,1}[a-zA-Z]?$/g;let g=p.currentTarget.value;h.test(g)||(g=g.slice(0,g.length-1)),u(g)},f=p=>{(p.currentTarget.value===n.Quiz[s-1].Question.Text||p.key==="Enter")&&r()};return e.jsxs("div",{className:gn.textField,children:[e.jsx("input",{ref:x,className:gn.inputField,type:"text",value:l,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",inputMode:"search",onChange:p=>y(p),onKeyUp:p=>f(p),onCopy:p=>p.preventDefault(),onPaste:p=>p.preventDefault(),disabled:!i,autoFocus:!0,tabIndex:-1}),e.jsx("div",{className:gn.wordText,children:n.Quiz[s-1].Question.Text}),e.jsxs("div",{className:gn.count,children:[a+1," / ",n.QuizAnswerCount]})]})}const Ui=Q(),pn=Ui?Te:Ne;function Eb({isSideOpen:t,isEnabledTyping:i,playState:n,quizData:s,quizNo:a,tryCount:l,inputVal:u,playWord:r,changeInputVal:x,checkAnswer:y}){return e.jsxs("div",{className:pn.wordCard,children:[e.jsxs("div",{className:pn.wordTyping,children:[e.jsx($b,{playState:n,playWord:r}),e.jsx(Bb,{isSideOpen:t,isEnabledTyping:i,quizData:s,quizNo:a,tryCount:l,inputVal:u,changeInputVal:x,checkAnswer:y}),e.jsx("div",{className:pn.enterButton,onClick:()=>y(),children:e.jsx("div",{className:pn.enterIcon,children:e.jsx(sc,{width:20,height:20})})})]}),e.jsx(W,{height:Ui?50:20}),e.jsx(kb,{meanData:s.Quiz[a-1],mainMeanLang:s.MainMeanLanguage})]})}const Zn="Vocabulary Practice",Pb=Q(),es=Pb?Te:Ne;function Mb(t){const{handler:i}=c.useContext(_e),n=t.currentStep,s=je(()=>{}),[a,l]=c.useState("animate__bounceInRight"),{isStepIntro:u,closeStepIntro:r}=be(),[x,y]=c.useState(!1),{quizState:f,changeQuizState:p}=Ae(),[h,g]=Se(Wi,t,`${n}P`),[m,o]=c.useState(1),{scoreBoardData:_,setStudentAnswers:d,addStudentAnswers:j,makeUserAnswerData:S}=ze(),[b,N]=c.useState(0),[L,C]=c.useState(""),{playState:B,playAudio:E,stopAudio:w}=ke();if(c.useEffect(()=>{!u&&h&&(s.setup(h.QuizTime,!0),V(),p("studying"))},[u]),c.useEffect(()=>{if(h){const[q,H]=yr(g,h.QuizAnswerCount);h.Quiz.length<q?t.changeVocaState(!1):(g.length>0&&d(g,h.QuizAnswerCount),N(H),o(q))}},[h]),c.useEffect(()=>{h&&!u&&(C(""),N(0),V(),p("studying"))},[m]),!h)return e.jsx(e.Fragment,{children:"Loading..."});const k=async()=>{try{if(p("checking"),f==="studying")if(h.IsEnabledTyping){const q=h.Quiz[m-1].Question.Text===L;if(q){const H={quizNo:m,maxCount:h.QuizAnswerCount,answerCount:b+1,ox:q},$=S("",t.studyId,t.studentHistoryId,t.bookType,"2P",h.Quiz[m-1].QuizId,h.Quiz[m-1].QuizNo,m,h.Quiz[m-1].Question.Text,L,b+1,h.QuizAnswerCount,h.Quiz.length,q,H,void 0,t.lastStep===n),R=await ge($);Number(R.result)===0&&(R.resultMessage&&(i.finishStudy={id:Number(R.result),cause:JSON.stringify(R.resultMessage)}),j(H),N(b+1),b+1>=h.QuizAnswerCount?m+1>h.Quiz.length?t.changeVocaState(!1):o(m+1):(C(""),V(),p("studying")))}else if(h.IsSkipAvailable){const H={quizNo:m,maxCount:h.QuizAnswerCount,answerCount:b+1,ox:q},$=S("",t.studyId,t.studentHistoryId,t.bookType,"2P",h.Quiz[m-1].QuizId,h.Quiz[m-1].QuizNo,m,h.Quiz[m-1].Question.Text,h.Quiz[m-1].Question.Text,h.QuizAnswerCount,h.QuizAnswerCount,h.Quiz.length,q,H,void 0,t.lastStep===n),R=await ge($);Number(R.result)===0&&(j(H),m+1>h.Quiz.length?t.changeVocaState(!1):o(m+1))}else C(""),V(),p("studying")}else{const q={quizNo:m,maxCount:h.QuizAnswerCount,answerCount:b+1,ox:!0},H=S("",t.studyId,t.studentHistoryId,t.bookType,"2P",h.Quiz[m-1].QuizId,h.Quiz[m-1].QuizNo,m,h.Quiz[m-1].Question.Text,h.Quiz[m-1].Question.Text,h.QuizAnswerCount,h.QuizAnswerCount,h.Quiz.length,!0,q,void 0,t.lastStep===n),$=await ge(H);Number($.result)===0&&(j(q),m+1>h.Quiz.length?t.changeVocaState(!1):o(m+1))}}catch(q){console.log(q)}},A=q=>{C(q)},V=()=>{B===""?E(h.Quiz[m-1].Question.Sound):w()},F=q=>{y(q)};return e.jsx(e.Fragment,{children:u?e.jsx("div",{className:`animate__animated ${a}`,onAnimationEnd:()=>{a==="animate__bounceOutLeft"&&r()},children:e.jsx(ve,{step:n,quizType:Zn,comment:"단어를 보고 듣고 따라서 입력하세요.",onStepIntroClozeHandler:()=>{l("animate__bounceOutLeft")}})}):e.jsxs(e.Fragment,{children:[e.jsx(we,{quizNumber:m,totalQuizCnt:Object.keys(h.Quiz).length,life:h.QuizAnswerCount,timeMin:s.time.timeMin,timeSec:s.time.timeSec,changeSideMenu:F}),e.jsx("div",{className:`${es.comment} animate__animated animate__fadeInLeft`,children:Zn}),e.jsx(Ce,{children:e.jsxs($e,{typeCSS:es.vocabularyPractice3,containerCSS:es.container,children:[e.jsx(W,{height:20}),e.jsx(Eb,{isSideOpen:x,isEnabledTyping:h.IsEnabledTyping,playState:B,quizData:h,quizNo:m,tryCount:b,inputVal:L,playWord:V,changeInputVal:A,checkAnswer:k})]})}),e.jsx(Qe,{isSideOpen:x,currentStep:n,currentStepType:Zn,quizLength:h.Quiz.length,maxAnswerCount:h.QuizAnswerCount,scoreBoardData:_,changeSideMenu:F})]})})}const Lb=Q(),Ut=Lb?Pe:Ee;function qb({quizState:t,bottomPopupState:i,isSideOpen:n,isHint:s,inputVal:a,correctAnswer:l,changeInputVal:u,checkAnswer:r}){const x=c.useRef(null);c.useEffect(()=>{const p=()=>{x.current&&(n||s?x.current.blur():x.current.focus())};return p(),window.addEventListener("click",p),()=>{window.removeEventListener("click",p)}},[n,s]);const y=p=>{if(t==="studying"){p.preventDefault();const h=/^[a-zA-Z-' ]+(?:'){0,1}[a-zA-Z]?$/g;let g=p.currentTarget.value;h.test(g)||(g=g.slice(0,g.length-1)),g===l?r(!0,g):u(g)}},f=p=>{p.key==="Enter"&&t==="studying"&&a!==""&&r(!1,a)};return e.jsx("div",{className:`${Ut.textField} animate__animated} ${i.isActive&&!i.isCorrect?`animate__headShake ${Ut.incorrect}`:""}`,children:i.isActive&&i.isCorrect?e.jsx("div",{className:`${Ut.correctAnswer} animate__animated animate__flipInX`,children:l}):e.jsxs(e.Fragment,{children:[e.jsx("input",{ref:x,className:Ut.inputField,type:"text",value:a,onChange:p=>y(p),onKeyUp:p=>f(p),onCopy:p=>p.preventDefault(),onPaste:p=>p.preventDefault(),tabIndex:-1,autoFocus:!0,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",inputMode:"search"}),e.jsx("div",{className:Ut.wordText})]})})}const Rb=Q(),Ms=Rb?Pe:Ee,Ob=({meanData:t,mainMeanLang:i})=>{const n=ue.upperFirst(i);let s="";switch(n){case"Korean":case"Chinese":case"Japanese":case"Vietnamese":case"Indonesian":s=t.Question[n];break;case"English":t.Question.English!==""&&t.Question.Britannica!==""||t.Question.English===""&&t.Question.Britannica!==""?s=t.Question.Britannica:t.Question.English!==""&&t.Question.Britannica===""&&(s=t.Question[n]);break;default:s=t.Question.Korean}return e.jsxs("div",{className:Ms.txtL,children:[t.Question.SpeechPart,". ",s]})},Fb=({meanData:t,mainMeanLang:i})=>{const n=ue.upperFirst(i);let s="";return n==="English"?e.jsx(e.Fragment,{}):(s=t.Question.Britannica!==""?t.Question.Britannica:t.Question.English,e.jsxs("div",{className:Ms.txtP,children:[t.Question.SpeechPart,". ",s]}))};function Hb({meanData:t,mainMeanLang:i}){return e.jsxs("div",{className:Ms.meaning,children:[e.jsx(Ob,{meanData:t,mainMeanLang:i}),e.jsx(W,{height:10}),e.jsx(Fb,{meanData:t,mainMeanLang:i})]})}const Ji=Q(),bn=Ji?Pe:Ee;function Db({quizState:t,bottomPopupState:i,isSideOpen:n,isHint:s,quizData:a,quizNo:l,inputVal:u,changeInputVal:r,checkAnswer:x}){return e.jsxs("div",{className:bn.wordCard,children:[e.jsxs("div",{className:bn.wordTyping,children:[e.jsx("div",{style:{width:Ji?0:70}}),e.jsx(qb,{quizState:t,bottomPopupState:i,isSideOpen:n,isHint:s,inputVal:u,correctAnswer:a.Quiz[l-1].Question.Text,changeInputVal:r,checkAnswer:x}),i.isActive&&i.isCorrect?e.jsx(e.Fragment,{}):e.jsx(e.Fragment,{children:e.jsx("div",{className:bn.enterButton,onClick:()=>{},children:e.jsx("div",{className:bn.enterIcon,children:e.jsx($n,{width:20,height:20})})})})]}),e.jsx(W,{height:20}),e.jsx(Hb,{meanData:a.Quiz[l-1],mainMeanLang:a.MainMeanLanguage})]})}const Wb=Q(),ht=Wb?Pe:Ee;function ts({inputRefs:t,correctAnswer:i,inputIndex:n,currentInputIndex:s,changeInputIndex:a,playPenalty:l,changeNextButton:u}){const[r,x]=c.useState(""),y=f=>{f.preventDefault();const p=/^[a-zA-Z-' ]+(?:'){0,1}[a-zA-Z]?$/g;let h=f.currentTarget.value;p.test(h)||(h=h.slice(0,h.length-1)),h===i?(x(h),a(s+1),s+1>2&&l(()=>{u()})):x(h)};return e.jsxs(e.Fragment,{children:[n>s&&e.jsxs("span",{className:`${ht.reviewAnswer} ${n===s?ht.currentOrder:""}`,children:[e.jsx("span",{className:ht.otherInput,children:e.jsx("input",{disabled:!0})}),e.jsx("div",{className:ht.hintText,children:i})]}),n===s&&e.jsxs("span",{className:`${ht.reviewAnswer} ${n===s?ht.currentOrder:""}`,children:[e.jsx("span",{className:ht.currentInput,children:e.jsx("input",{ref:f=>t.current[n]=f,type:"text",value:r,onChange:f=>y(f),onCopy:f=>f.preventDefault(),onPaste:f=>f.preventDefault(),autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",inputMode:"search",tabIndex:-1})}),e.jsx("div",{className:ht.hintText,children:i})]}),n<s&&e.jsx("span",{className:`${ht.reviewAnswer} ${ht.correctAnswer} animate__animated animate__flipInX`,children:i})]})}const Vb=Q(),qt=Vb?Pe:Ee;function Ub({isSideOpen:t,correctAnswer:i,playPenalty:n,changePenaltyState:s}){const a=c.useRef([]),[l,u]=c.useState(0),[r,x]=c.useState(!1);c.useEffect(()=>{const p=()=>{a.current[l]&&(a.current[l].focus(),t&&a.current[l].blur())};return p(),window.addEventListener("click",p),()=>{window.removeEventListener("click",p)}},[l,t]);const y=p=>{u(p)},f=()=>{x(!0)};return e.jsxs("div",{className:`${qt.testReview}`,children:[e.jsx("div",{className:qt.title,children:"Test Review"}),e.jsx("div",{className:qt.container,children:e.jsxs("div",{className:qt.sentence,children:[e.jsx(ts,{inputRefs:a,inputIndex:0,currentInputIndex:l,correctAnswer:i,changeInputIndex:y,playPenalty:n,changeNextButton:f}),e.jsx(ts,{inputRefs:a,inputIndex:1,currentInputIndex:l,correctAnswer:i,changeInputIndex:y,playPenalty:n,changeNextButton:f}),e.jsx(ts,{inputRefs:a,inputIndex:2,currentInputIndex:l,correctAnswer:i,changeInputIndex:y,playPenalty:n,changeNextButton:f})]})}),e.jsx(W,{height:10}),e.jsx("div",{className:`${r?qt.nextButton:qt.deactNextButton} ${r&&"animate__animated animate__bounce"}`,onClick:()=>r&&s(!1),children:"Next"})]})}const Jb=Q(),bi=Jb?Pe:Ee;function Kb({playState:t,playHint:i}){return e.jsxs("div",{className:bi.wordPlayButton,onClick:()=>i(),children:[t==="playing"?e.jsx(Be,{isColor:!0,width:40,height:40}):e.jsx(Ie,{isColor:!0,width:40,height:40}),e.jsx("span",{className:bi.txtL,children:"Playback"})]})}const Yb=Q(),ns=Yb?Pe:Ee;function Gb({isHint:t,playState:i,remainCount:n,totalCount:s,toggleHint:a,playHint:l}){return e.jsxs("div",{style:{position:"relative"},children:[e.jsx("div",{className:ns.hintButton,onClick:()=>a(),children:e.jsxs("span",{children:["Hint ",n&&s?s-n:0," /",s]})}),t&&e.jsxs("div",{style:{position:"relative"},className:"animate__animated animate__fadeIn",children:[e.jsx("div",{className:ns.hintPopup,children:e.jsx(Kb,{playState:i,playHint:l})}),e.jsx("div",{className:ns.screenBlock,onClick:()=>a()})]})]})}const jn="Vocabulary Test",Xb=Q(),ss=Xb?Pe:Ee;function Zb(t){const{handler:i}=c.useContext(_e),n=t.currentStep,s=je(()=>{T(!1,"quiz time out")}),[a,l]=c.useState("animate__bounceInRight"),{isStepIntro:u,closeStepIntro:r}=be(),{isResultShow:x,changeResultShow:y}=Fe(),[f,p]=c.useState(!1),{quizState:h,changeQuizState:g}=Ae(),[m,o]=Se(cg,t,n),[_,d]=c.useState(1),{scoreBoardData:j,setStudentAnswers:S,addStudentAnswers:b,makeUserAnswerData:N}=ze(),[L,C]=c.useState(0),[B,E]=c.useState(0),[w,k]=c.useState(!1),[A,V]=c.useState(0),[F,q]=c.useState(!1),[H,$]=c.useState(!1),{bottomPopupState:R,changeBottomPopupState:ee}=We(),[Z,U]=c.useState(""),{playState:D,playAudio:v,stopAudio:z}=ke();if(c.useEffect(()=>{!u&&m&&!H&&(s.setup(m.QuizTime,!0),g("studying"))},[u]),c.useEffect(()=>{if(m){const[X,Y]=Ue(o,m.QuizAnswerCount);o.length>0&&m.IsEnablePenaltyReview&&o[o.length-1].PenaltyWord!==""?($(!0),C(m.QuizAnswerCount),E(m.QuizAnswerCount),d(o[o.length-1].CurrentQuizNo)):(C(Y),E(Y),d(X)),m.Hint.IsEnabled&&m.Hint.Try&&V(m.Hint.Try),S(o,m.QuizAnswerCount)}},[m]),c.useEffect(()=>{m&&(U(""),C(0),E(0),q(!1),u||s.setup(m.QuizTime,!0),g("studying"))},[_]),c.useEffect(()=>{!H&&m&&(async()=>{const Y=await ks({mobile:"",bookType:t.bookType,studyId:t.studyId,studentHistoryId:t.studentHistoryId,step:`${n}`,quizId:m.Quiz[_-1].QuizId,isLastQuiz:_+1>m.Quiz.length,isFinishStudy:t.lastStep===n});Number(Y.result)===0&&(Y.resultMessage&&(i.finishStudy={id:Number(Y.result),cause:JSON.stringify(Y.resultMessage)}),_+1>m.Quiz.length?y(!0):(s.setup(m.QuizTime,!0),d(_+1)))})()},[H]),!m)return e.jsx(e.Fragment,{children:"Loading..."});const T=async(X,Y)=>{try{g("checking"),X&&P(Y);const xe={quizNo:_,maxCount:m.QuizAnswerCount,answerCount:L+1,ox:X},J=N("",t.studyId,t.studentHistoryId,t.bookType,n,m.Quiz[_-1].QuizId,m.Quiz[_-1].QuizNo,_,m.Quiz[_-1].Question.Text,Y,L+1,m.QuizAnswerCount,m.Quiz.length,X,xe,m.IsEnablePenaltyReview,t.lastStep===n);if(h==="studying"){s.stop(),ee({isActive:!0,isCorrect:X});const oe=await ge(J);Number(oe.result)===0&&(oe.resultMessage&&(i.finishStudy={id:Number(oe.result),cause:JSON.stringify(oe.resultMessage)}),X||E(B+1),C(L+1),b(xe),M(X,L+1))}}catch(xe){console.log(xe)}},M=(X,Y)=>{setTimeout(()=>{ee({isActive:!1,isCorrect:!1}),X?_+1>m.Quiz.length?y(!0):d(_+1):Y>=m.QuizAnswerCount?(U(""),O(!0)):(s.setup(m.QuizTime,!0),P(""),g("studying"))},1e3)},P=X=>{U(X)},O=X=>{$(X)},G=async()=>{try{if(w)z(),k(!1);else if(F)k(!0);else{const X=await ag(t.studyId,t.studentHistoryId,_);(X.ErrorNo===0||F)&&(q(!0),k(!0),V(X.TryHint))}}catch(X){console.log(X)}},le=()=>{D==="playing"?z():v(m.Quiz[_-1].Question.Sound)},ce=X=>{z();const Y=()=>{X()};v(m.Quiz[_-1].Question.Sound,Y)},de=X=>{p(X)};return e.jsx(e.Fragment,{children:u?e.jsx("div",{className:`animate__animated ${a}`,onAnimationEnd:()=>{a==="animate__bounceOutLeft"&&r()},children:e.jsx(ve,{step:n,quizType:jn,comment:"뜻을 보고 올바른 단어를 입력하세요.",onStepIntroClozeHandler:()=>{l("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:x?e.jsx(Je,{step:n,quizType:jn,quizAnswerCount:m.QuizAnswerCount,studentAnswer:j,onFinishActivity:t.onFinishActivity}):e.jsxs(e.Fragment,{children:[e.jsx(we,{quizNumber:_,totalQuizCnt:Object.keys(m.Quiz).length,life:m.QuizAnswerCount-B,timeMin:s.time.timeMin,timeSec:s.time.timeSec,changeSideMenu:de}),e.jsx("div",{className:`${ss.comment} animate__animated animate__fadeInLeft`,children:jn}),e.jsx(Ce,{children:H?e.jsx(Ub,{isSideOpen:f,correctAnswer:m.Quiz[_-1].Question.Text,playPenalty:ce,changePenaltyState:O}):e.jsxs($e,{typeCSS:ss.vocabularyTest3,containerCSS:ss.container,children:[e.jsx(W,{height:20}),e.jsx(Db,{quizState:h,bottomPopupState:R,isSideOpen:f,isHint:w,quizData:m,quizNo:_,inputVal:Z,changeInputVal:P,checkAnswer:T}),e.jsx(e.Fragment,{children:m.Hint.IsEnabled&&e.jsx(Gb,{isHint:w,playState:D,remainCount:A,totalCount:m.Hint.Max,toggleHint:G,playHint:le})})]})}),e.jsx(Qe,{isSideOpen:f,currentStep:n,currentStepType:jn,quizLength:m.Quiz.length,maxAnswerCount:m.QuizAnswerCount,scoreBoardData:j,changeSideMenu:de}),e.jsx(Ve,{bottomPopupState:R})]})})})}const ej=Q(),is=ej?Te:Ne;function tj({playState:t,word:i,playWord:n}){return e.jsx("div",{className:is.wordText,children:e.jsxs("div",{className:is.wordPlayButton,onClick:()=>n(),children:[t==="playing"?e.jsx(Be,{isColor:!0,width:24,height:24}):e.jsx(Ie,{isColor:!0,width:24,height:24}),e.jsx("div",{className:is.txtL,children:i})]})})}const nj=Q(),Ki=nj?Te:Ne,sj=({meanData:t,lang:i})=>{const n=ue.upperFirst(i);let s="";switch(n){case"Korean":case"Chinese":case"Japanese":case"Vietnamese":case"Indonesian":case"English":case"Britannica":s=t.Question[n];break;default:s=t.Question.Korean}return e.jsxs("div",{className:Ki.meaning,children:[t.Question.SpeechPart,". ",s]})},ij=({meanData:t,lang:i})=>{const n=ue.upperFirst(i);let s="";switch(n){case"Korean":case"Chinese":case"Japanese":case"Vietnamese":case"Indonesian":case"English":case"Britannica":s=t.Question.Britannica?t.Question.Britannica:t.Question[n];break;default:s=t.Question.Britannica}return e.jsxs("div",{className:Ki.sentence,children:[t.Question.SpeechPart,". ",s]})};function oj({meanData:t,mainMeanLang:i,subMeanLang:n}){return e.jsxs(e.Fragment,{children:[e.jsx(sj,{meanData:t,lang:i}),e.jsx(ij,{meanData:t,lang:n})]})}const rj=Q(),cj=rj?Te:Ne;function aj({playState:t,quizData:i,quizNo:n,playWord:s}){return e.jsxs("div",{className:`${cj.wordCard} animate__animated animate__slideInRight`,children:[e.jsx(tj,{playState:t,word:i.Quiz[n-1].Question.Text,playWord:s}),e.jsx(W,{height:10}),e.jsx(oj,{meanData:i.Quiz[n-1],mainMeanLang:i.MainMeanLanguage,subMeanLang:i.SubMeanLanguage})]})}const uj=Q(),os=uj?Te:Ne;function lj({isLastPage:t,quizNo:i,totalQuizCnt:n,changeQuizNo:s}){return e.jsxs("div",{className:os.indicator,children:[e.jsx("span",{style:t||i>1?{opacity:"1"}:{opacity:".2"},onClick:()=>s(i-1),children:e.jsx("div",{className:os.iconChevLeft})}),e.jsxs("span",{children:[i," / ",n]}),e.jsx("span",{onClick:()=>s(i+1),children:e.jsx("div",{className:os.iconChevRight})})]})}const dj=Q(),_j=dj?Te:Ne;function mj({goTest:t}){return e.jsx("div",{className:`${_j.btnNext} animate__animated animate__flash`,onClick:()=>t(),children:"Next"})}const rs="Vocabulary Practice",xj=Q(),cs=xj?Te:Ne;function hj(t){const i=t.currentStep,n=je(()=>{}),[s,a]=c.useState("animate__bounceInRight"),{isStepIntro:l,closeStepIntro:u}=be(),[r,x]=c.useState(!1),y=Ye(),{quizState:f,changeQuizState:p}=Ae(),[h,g]=Se(Vi,t,i),[m,o]=c.useState(1),{scoreBoardData:_}=ze(),[d,j]=c.useState(!1),{playState:S,playAudio:b,stopAudio:N}=ke(),L=c.useRef(null);if(c.useEffect(()=>{!l&&h&&(n.setup(h.QuizTime,!0),setTimeout(()=>{B()},500))},[l]),c.useEffect(()=>{!l&&h&&(N(),m===h.Quiz.length&&j(!0),B())},[m]),c.useEffect(()=>{h&&f==="studying"&&L.current&&y.remove(L.current,["animate__fadeInRight","animate__fadeInLeft"])},[f]),c.useEffect(()=>{!l&&!d&&o(1)},[d]),!h)return e.jsx(e.Fragment,{children:"Loading..."});const C=k=>{N(),k<1?d&&o(Object.keys(h.Quiz).length):k>Object.keys(h.Quiz).length?o(1):o(k)},B=()=>{S==="playing"?N():b(h.Quiz[m-1].Question.Sound)},E=k=>{x(k)},w=()=>{N(),t.changeVocaState(!1)};return e.jsx(e.Fragment,{children:l?e.jsx("div",{className:`animate__animated ${s}`,onAnimationEnd:()=>{s==="animate__bounceOutLeft"&&u()},children:e.jsx(ve,{step:i,quizType:rs,comment:"카드를 넘기면서 단어를 학습하세요.",onStepIntroClozeHandler:()=>{a("animate__bounceOutLeft")}})}):e.jsxs(e.Fragment,{children:[e.jsx(we,{quizNumber:m,totalQuizCnt:Object.keys(h.Quiz).length,life:h.QuizAnswerCount,timeMin:n.time.timeMin,timeSec:n.time.timeSec,changeSideMenu:E}),e.jsx("div",{className:`${cs.comment} animate__animated animate__fadeInLeft`,children:rs}),e.jsx(Ce,{children:e.jsxs($e,{typeCSS:cs.vocabularyPractice4,containerCSS:cs.container,children:[e.jsx(aj,{playState:S,quizData:h,quizNo:m,playWord:B}),e.jsx(lj,{isLastPage:d,quizNo:m,totalQuizCnt:h.Quiz.length,changeQuizNo:C}),e.jsx(e.Fragment,{children:d&&e.jsx(mj,{goTest:w})})]})}),e.jsx(Qe,{isSideOpen:r,currentStep:i,currentStepType:rs,quizLength:h.Quiz.length,maxAnswerCount:h.QuizAnswerCount,scoreBoardData:_,changeSideMenu:E})]})})}const yj=Q(),as=yj?Pe:Ee;function fj({exampleData:t,index:i,checkAnswer:n,onExampleAnimationEndHandler:s}){return e.jsxs("div",{className:`${as.textCard}`,onClick:a=>n(a.currentTarget,t.Text),onAnimationEnd:a=>s(a.currentTarget),children:[e.jsx("div",{className:as.cardNumber,children:Number(i+1)}),e.jsx("div",{className:as.awnserText,children:t.Text})]})}const gj=Q(),pj=gj?Pe:Ee;function bj({exampleData:t,checkAnswer:i,onExampleAnimationEndHandler:n}){return e.jsx("div",{className:pj.answers,children:t.map((s,a)=>e.jsx(fj,{exampleData:s,index:a,checkAnswer:i,onExampleAnimationEndHandler:n}))})}const jj=Q(),Yi=jj?Pe:Ee,Sj=({meanData:t,lang:i})=>{const n=ue.upperFirst(i);let s="";switch(n){case"Korean":case"Chinese":case"Japanese":case"Vietnamese":case"Indonesian":case"English":case"Britannica":s=t.Question[n];break;default:s=t.Question.Korean}return e.jsxs("div",{className:Yi.meaning,children:[t.Question.SpeechPart,". ",s]})},zj=({meanData:t,lang:i})=>{const n=ue.upperFirst(i);let s="";switch(n){case"Korean":case"Chinese":case"Japanese":case"Vietnamese":case"Indonesian":case"English":case"Britannica":s=t.Question.Britannica?t.Question.Britannica:t.Question[n];break;default:s=t.Question.Britannica}return e.jsxs("div",{className:Yi.sentence,children:[t.Question.SpeechPart,". ",s]})};function wj({meanData:t,mainMeanLang:i,subMeanLang:n}){return e.jsxs(e.Fragment,{children:[e.jsx(Sj,{meanData:t,lang:i}),e.jsx(zj,{meanData:t,lang:n})]})}const Qj=Q(),Cj=Qj?Pe:Ee;function vj({quizData:t,quizNo:i}){return e.jsx("div",{className:Cj.questionBox,children:e.jsx(wj,{meanData:t.Quiz[i-1],mainMeanLang:t.MainMeanLanguage,subMeanLang:t.SubMeanLanguage})})}const Sn="Vocabulary Test",Ns=Q(),kt=Ns?Pe:Ee;function $j(t){const{handler:i}=c.useContext(_e),n=t.currentStep,s=je(()=>{R()}),a=Ye(),[l,u]=c.useState("animate__bounceInRight"),{isStepIntro:r,closeStepIntro:x}=be(),{isResultShow:y,changeResultShow:f}=Fe(),[p,h]=c.useState(!1),{quizState:g,changeQuizState:m}=Ae(),[o,_]=Se(ug,t,n),[d,j]=c.useState(1),{scoreBoardData:S,setStudentAnswers:b,addStudentAnswers:N,makeUserAnswerData:L}=ze(),[C,B]=c.useState([]),[E,w]=c.useState(0),[k,A]=c.useState(0),{bottomPopupState:V,changeBottomPopupState:F}=We();if(c.useEffect(()=>{!r&&o&&(s.setup(o.QuizTime,!0),m("studying"))},[r]),c.useEffect(()=>{if(o)try{const[U,D]=Ue(_,o.QuizAnswerCount);s.setup(o.QuizTime,!0),w(D),A(D),B(ue.shuffle(o.Quiz[U-1].Examples)),b(_,o.QuizAnswerCount),j(U)}catch(U){console.log(U)}},[o]),c.useEffect(()=>{o&&(s.setup(o.QuizTime,!0),w(0),A(0),B(ue.shuffle(o.Quiz[d-1].Examples)),m("studying"))},[d]),!o)return e.jsx(e.Fragment,{children:"Loading..."});const q=async(U,D)=>{try{if(m("checking"),g==="studying"){const v=o.Quiz[d-1].Question.Text===D,z={quizNo:d,maxCount:o.QuizAnswerCount,answerCount:E+1,ox:v},T=L("",t.studyId,t.studentHistoryId,t.bookType,n,o.Quiz[d-1].QuizId,o.Quiz[d-1].QuizNo,d,o.Quiz[d-1].Question.Text,D,E+1,o.QuizAnswerCount,o.Quiz.length,v,z,void 0,t.lastStep===n);if(g==="studying"){s.stop();const M=await ge(T);Number(M.result)===0&&(M.resultMessage&&(i.finishStudy={id:Number(M.result),cause:JSON.stringify(M.resultMessage)}),v||A(k+1),w(E+1),N(z),H(U,v))}}}catch(v){console.log(v)}},H=(U,D)=>{F({isActive:!0,isCorrect:D}),D?a.play(U,["animate__fadeIn",kt.correct]):a.play(U,["animate__headShake",kt.incorrect])},$=U=>{setTimeout(()=>{F({isActive:!1,isCorrect:!1}),a.remove(U,[kt.correct,kt.incorrect,"animate__fadeIn","animate__headShake"]),d+1<=o.Quiz.length?j(d+1):f(!0)},1e3)},R=async()=>{try{if(m("checking"),g==="studying"){const U={mobile:"",studentHistoryId:t.studentHistoryId,studyId:t.studyId,bookType:t.bookType,step:`${n}`,quizId:o.Quiz[d-1].QuizId,quizNo:o.Quiz[d-1].QuizNo,currentQuizNo:d,correct:o.Quiz[d-1].Question.Text,studentAnswer:"quiz time out",answerCount:E+1};if(g==="studying"){s.stop();const D=await ge(U);if(Number(D.result)===0){D.resultMessage&&(i.finishStudy={id:Number(D.result),cause:JSON.stringify(D.resultMessage)});const v={quizNo:d,maxCount:o.QuizAnswerCount,answerCount:E+1,ox:!1};A(k+1),w(E+1),N(v),F({isActive:!0,isCorrect:!1}),ee()}}}}catch(U){console.log(U)}},ee=()=>{setTimeout(()=>{F({isActive:!1,isCorrect:!1}),d+1>o.Quiz.length?f(!0):j(d+1)},1500)},Z=U=>{h(U)};return e.jsx(e.Fragment,{children:r?e.jsx("div",{className:`animate__animated ${l}`,onAnimationEnd:()=>{l==="animate__bounceOutLeft"&&x()},children:e.jsx(ve,{step:n,quizType:Sn,comment:"뜻을 보고 올바른 단어를 고르세요.",onStepIntroClozeHandler:()=>{u("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:y?e.jsx(e.Fragment,{children:e.jsx(Je,{step:n,quizType:Sn,quizAnswerCount:o.QuizAnswerCount,studentAnswer:S,onFinishActivity:t.onFinishActivity})}):e.jsxs(e.Fragment,{children:[e.jsx(we,{quizNumber:d,totalQuizCnt:Object.keys(o.Quiz).length,life:o.QuizAnswerCount-k,timeMin:s.time.timeMin,timeSec:s.time.timeSec,changeSideMenu:Z}),e.jsx("div",{className:`${kt.comment} animate__animated animate__fadeInLeft`,children:Sn}),e.jsxs(Ce,{children:[Ns?e.jsx(e.Fragment,{}):e.jsx(W,{height:15}),e.jsxs($e,{typeCSS:kt.vocabularyTest4,containerCSS:kt.container,children:[e.jsx(vj,{quizData:o,quizNo:d}),e.jsx(W,{height:20}),e.jsx(bj,{exampleData:C,checkAnswer:q,onExampleAnimationEndHandler:$})]}),Ns?e.jsx(W,{height:5}):e.jsx(W,{height:15})]}),e.jsx(Qe,{isSideOpen:p,currentStep:n,currentStepType:Sn,quizLength:o.Quiz.length,maxAnswerCount:o.QuizAnswerCount,scoreBoardData:S,changeSideMenu:Z}),e.jsx(Ve,{bottomPopupState:V})]})})})}const Nj="_comment_w6rq5_1",Tj="_wordPlayButton_w6rq5_20",Aj="_txtL_w6rq5_35",kj="_goNextButton_w6rq5_46",Ij="_iconArrowUp_w6rq5_69",Bj="_writingActivity1_w6rq5_83",Ej="_container_w6rq5_83",Pj="_enterBox_w6rq5_90",Mj="_correctText_w6rq5_101",Lj="_textCard_w6rq5_106",qj="_incorrectText_w6rq5_113",Rj="_send_w6rq5_155",Oj="_awnserText_w6rq5_177",Fj="_answers_w6rq5_181",Hj="_correctDirection_w6rq5_186",Dj="_writingActivity2_w6rq5_192",Wj="_tabs_w6rq5_199",Vj="_tabButton_w6rq5_203",Uj="_active_w6rq5_217",Jj="_questionText_w6rq5_222",Kj="_writingArea_w6rq5_226",Yj="_wordLimitIndicator_w6rq5_250",Gj="_limit_w6rq5_253",Xj="_words_w6rq5_254",Zj="_saveButton_w6rq5_265",eS="_submitButton_w6rq5_287",tS="_goNextStepBox_w6rq5_309",nS="_groupButtons_w6rq5_315",Ge={comment:Nj,wordPlayButton:Tj,txtL:Aj,goNextButton:kj,iconArrowUp:Ij,writingActivity1:Bj,container:Ej,enterBox:Pj,correctText:Mj,textCard:Lj,incorrectText:qj,send:Rj,awnserText:Oj,answers:Fj,correctDirection:Hj,writingActivity2:Dj,tabs:Wj,tabButton:Vj,active:Uj,questionText:Jj,writingArea:Kj,wordLimitIndicator:Yj,limit:Gj,words:Xj,saveButton:Zj,submitButton:eS,goNextStepBox:tS,groupButtons:nS},sS="_comment_1b8rt_1",iS="_wordPlayButton_1b8rt_20",oS="_txtL_1b8rt_34",rS="_goNextButton_1b8rt_45",cS="_iconArrowUp_1b8rt_68",aS="_writingActivity1_1b8rt_82",uS="_container_1b8rt_82",lS="_enterBox_1b8rt_89",dS="_correctText_1b8rt_105",_S="_textCard_1b8rt_110",mS="_incorrectText_1b8rt_117",xS="_send_1b8rt_153",hS="_awnserText_1b8rt_174",yS="_answers_1b8rt_178",fS="_correctDirection_1b8rt_183",gS="_writingActivity2_1b8rt_189",pS="_tabs_1b8rt_196",bS="_tabButton_1b8rt_200",jS="_active_1b8rt_214",SS="_questionText_1b8rt_219",zS="_writingArea_1b8rt_223",wS="_wordLimitIndicator_1b8rt_247",QS="_limit_1b8rt_250",CS="_words_1b8rt_251",vS="_saveButton_1b8rt_262",$S="_submitButton_1b8rt_284",NS="_goNextStepBox_1b8rt_306",TS="_groupButtons_1b8rt_312",Xe={comment:sS,wordPlayButton:iS,txtL:oS,goNextButton:rS,iconArrowUp:cS,writingActivity1:aS,container:uS,enterBox:lS,correctText:dS,textCard:_S,incorrectText:mS,send:xS,awnserText:hS,answers:yS,correctDirection:fS,writingActivity2:gS,tabs:pS,tabButton:bS,active:jS,questionText:SS,writingArea:zS,wordLimitIndicator:wS,limit:QS,words:CS,saveButton:vS,submitButton:$S,goNextStepBox:NS,groupButtons:TS};async function AS(t){const{bookType:i,studyId:n,studentHistoryId:s}=t,l=`study/quiz/writing-activity-1?studentHistoryId=${s}&studyId=${n}&bookType=${i}`;return pe(l,async r=>({ContentsId:Number(r.ContentsId),IsQuizTimeoutIncorrect:!!r.isQuizTimeoutIncorrect,QuizAnswerCount:Number(r.QuizAnswerCount),QuizTime:Number(r.QuizTime),Quiz:r.Quiz.map(x=>({QuizId:x.QuizId.toString(),QuizNo:Number(x.QuizNo),Question:{Text:x.Question.Text,Sound:x.Question.Sound},Examples:x.Examples.map(y=>({Text:y.Text}))}))}))}async function kS(t){const{bookType:i,studyId:n,studentHistoryId:s}=t,l=`study/quiz/writing-activity-2?studentHistoryId=${s}&studyId=${n}&bookType=${i}`;return pe(l,async r=>({QuizTime:r.QuizTime,Title:r.Title,Author:r.Author,Writing:r.Writing,ReWriting:r.ReWriting}))}const IS=Q(),ji=IS?Xe:Ge;function BS({playState:t,onPlay:i}){return e.jsxs("div",{className:ji.wordPlayButton,onClick:()=>i(),children:[t===""?e.jsx(Ie,{isColor:!0,width:34,height:34}):e.jsx(Be,{isColor:!0,width:34,height:34}),e.jsx("span",{className:ji.txtL,children:"Playback"})]})}const ES=Q(),Si=ES?Xe:Ge;function PS(){return e.jsx("div",{className:Si.correctDirection,children:e.jsx("div",{className:Si.iconArrowUp})})}const MS=Q(),zi=MS?Xe:Ge;function LS({exampleRefs:t,index:i,example:n,selectWord:s}){return e.jsx("div",{ref:a=>t.current[i]=a,className:`${zi.textCard}`,onClick:()=>s(i,n.Text),children:e.jsx("div",{className:zi.awnserText,children:n.Text})})}const qS=Q(),RS=qS?Xe:Ge;function OS({exampleRefs:t,exampleData:i,selectWord:n}){return e.jsx("div",{className:RS.answers,children:i.map((s,a)=>e.jsx(LS,{exampleRefs:t,index:a,example:s,selectWord:n}))})}const FS=Q(),wi=FS?Xe:Ge;function HS({text:t,removeWord:i}){return e.jsx("div",{className:`${wi.textCard}`,onClick:()=>i(t),children:e.jsx("div",{className:wi.awnserText,children:t})})}const DS=Q(),us=DS?Xe:Ge;function WS({sentenceState:t,sentenceData:i,removeWord:n}){return e.jsx("div",{className:`${us.enterBox} ${t==="correct"?us.correctText:t==="incorrect"?us.incorrectText:""}`,children:i.map((s,a)=>e.jsx(HS,{text:s,removeWord:n}))})}const VS=Q(),US=VS?Xe:Ge;function JS({goNextQuiz:t}){return e.jsx("div",{onClick:()=>t(),className:`${US.goNextButton} animate__animated animate__flash`,children:"Next"})}const zn="Writing Activity",Gi=Q(),Rt=Gi?Xe:Ge;function KS(t){const{bookInfo:i,handler:n}=c.useContext(_e),s=t.currentStep,a=je(()=>{}),[l,u]=c.useState("animate__bounceInRight"),{isStepIntro:r,closeStepIntro:x}=be(),{isResultShow:y,changeResultShow:f}=Fe(),[p,h]=c.useState(!1),{quizState:g,changeQuizState:m}=Ae(),[o,_]=Se(AS,t,s),[d,j]=c.useState(1),{scoreBoardData:S,setStudentAnswers:b,addStudentAnswers:N,makeUserAnswerData:L}=ze(),[C,B]=c.useState(0),[E,w]=c.useState(0),[k,A]=c.useState(""),V=c.useRef([]),[F,q]=c.useState([]),[H,$]=c.useState([]),{bottomPopupState:R,changeBottomPopupState:ee}=We(),[Z,U]=c.useState(!1),{playState:D,playAudio:v,stopAudio:z}=ke();if(c.useEffect(()=>{!r&&o&&(a.setup(o.QuizTime,!0),m("studying"))},[r]),c.useEffect(()=>{if(o)try{const[Y,xe]=Ue(_,o.QuizAnswerCount);B(xe),w(xe),q(ue.shuffle(o.Quiz[Y-1].Examples)),b(_,o.QuizAnswerCount),j(Y)}catch(Y){console.log(Y)}},[o]),c.useEffect(()=>{o&&k===""&&H.length===o.Quiz[d-1].Examples.length&&O()},[H]),c.useEffect(()=>{!r&&!y&&o&&(z(),q(ue.shuffle(o.Quiz[d-1].Examples)),w(0),B(0),m("studying"))},[d]),c.useEffect(()=>{g==="studying"&&o&&!r&&!y&&(A(""),P(),i.BookLevel.includes("K")&&v(o.Quiz[d-1].Question.Sound))},[g]),c.useEffect(()=>{Z&&o&&g==="checking"&&z()},[Z]),!o)return e.jsx(e.Fragment,{children:"Loading..."});const T=(Y,xe)=>{V.current[Y].classList.add(Rt.send);const J=[...H,xe];$(J)},M=Y=>{if(g==="studying"){const xe=F.findIndex(oe=>oe.Text===Y),J=H.filter(oe=>oe!==Y);V.current[xe].classList.remove(Rt.send),$(J)}},P=()=>{try{V.current&&V.current.map(Y=>Y.classList.remove(Rt.send))}catch{}finally{$([])}},O=async()=>{try{if(m("checking"),g==="studying"){a.stop(),z();const Y=o.Quiz[d-1].Question.Text,xe=H.reduce((xt,Ze)=>xt+(" "+Ze)),J=Y===xe;let oe=E;const me={quizNo:d,maxCount:o.QuizAnswerCount,answerCount:C+1,ox:J},te=L("",t.studyId,t.studentHistoryId,t.bookType,s,o.Quiz[d-1].QuizId,o.Quiz[d-1].QuizNo,d,o.Quiz[d-1].Question.Text,xe,C+1,o.QuizAnswerCount,o.Quiz.length,J,me,void 0,t.lastStep===s),he=await ge(te);Number(he.result)===0&&(he.resultMessage&&(n.finishStudy={id:Number(he.result),cause:JSON.stringify(he.resultMessage)}),J||w(E+1),N(me),B(C+1),G(J,oe+1))}}catch(Y){console.log(Y)}},G=(Y,xe)=>{A(Y?"correct":"incorrect"),ee({isActive:!0,isCorrect:Y}),setTimeout(()=>{if(ee({isActive:!1,isCorrect:!1}),Y)if(i.BookLevel.includes("K"))le();else{const J=()=>{U(!0)};v(o.Quiz[d-1].Question.Sound,J)}else if(xe>=o.QuizAnswerCount){const J=o.Quiz[d-1].Examples.map(oe=>oe.Text);if($([...J]),i.BookLevel.includes("K"))le();else{const oe=()=>{U(!0)};v(o.Quiz[d-1].Question.Sound,oe)}}else a.setup(o.QuizTime,!0),m("studying")},2e3)},le=()=>{z();const Y=()=>{if(P(),A(""),d+1>o.Quiz.length)f(!0);else if(i.BookLevel.includes("K"))a.setup(o.QuizTime,!0),j(d+1);else{const xe=()=>{U(!0)};v(o.Quiz[d-1].Question.Sound,xe)}};v(o.Quiz[d-1].Question.Sound,Y)},ce=()=>{d+1>o.Quiz.length?(z(),a.stop(),f(!0)):(a.setup(o.QuizTime,!0),j(d+1),U(!1))},de=Y=>{h(Y)},X=()=>{D===""?v(o.Quiz[d-1].Question.Sound):g==="studying"&&z()};return e.jsx(e.Fragment,{children:r?e.jsx("div",{className:`animate__animated ${l}`,onAnimationEnd:()=>{l==="animate__bounceOutLeft"&&x()},children:e.jsx(ve,{step:s,quizType:zn,comment:"카드를 순서대로 나열하여 올바른 문장을 완성하세요.",onStepIntroClozeHandler:()=>{u("animate__bounceOutLeft")}})}):e.jsx(e.Fragment,{children:y?e.jsx(Je,{step:s,quizType:zn,quizAnswerCount:o.QuizAnswerCount,studentAnswer:S,onFinishActivity:t.onFinishActivity}):e.jsxs(e.Fragment,{children:[e.jsx(we,{quizNumber:d,totalQuizCnt:Object.keys(o.Quiz).length,life:o.QuizAnswerCount-E,timeMin:a.time.timeMin,timeSec:a.time.timeSec,changeSideMenu:de}),e.jsx("div",{className:`${Rt.comment} animate__animated animate__fadeInLeft`,children:zn}),e.jsxs(Ce,{children:[e.jsx(BS,{playState:D,onPlay:X}),e.jsx(W,{height:15}),e.jsxs($e,{typeCSS:Rt.writingActivity1,containerCSS:Rt.container,children:[e.jsx(WS,{sentenceState:k,sentenceData:H,removeWord:M}),e.jsx(e.Fragment,{children:Z?e.jsx(JS,{goNextQuiz:ce}):e.jsxs(e.Fragment,{children:[e.jsx(PS,{}),e.jsx(OS,{exampleRefs:V,exampleData:F,selectWord:T})]})})]}),Gi?e.jsx(W,{height:5}):e.jsx(W,{height:15})]}),e.jsx(Qe,{isSideOpen:p,currentStep:s,currentStepType:zn,quizLength:o.Quiz.length,maxAnswerCount:o.QuizAnswerCount,scoreBoardData:S,changeSideMenu:de}),e.jsx(Ve,{bottomPopupState:R})]})})})}const YS=Q(),it=YS?Bs:Is;function ls({currentSubmitCount:t,maxSubmitCount:i,noWritingActivity:n,goWritingActivity:s}){return e.jsx("div",{className:it.revisionFreeIntro,children:e.jsxs("div",{className:`${it.container} animate__animated animate__bounceInRight`,children:[e.jsx("div",{className:it.stepOrder,children:"Step5"}),e.jsx("div",{className:it.quizType,children:"Writing Activity"}),e.jsx("div",{className:it.comment,children:"글쓰기를 하시겠어요?"}),e.jsxs("div",{className:it.revisionBoard,children:[e.jsx("div",{className:it.txtLabel,children:"남은 첨삭:"}),e.jsxs("div",{className:it.txtCount,children:[i-t," / ",i]}),e.jsx("div",{className:it.txtLabel,children:"첨삭 완료:"}),e.jsx("div",{className:it.txtCount,children:t})]}),e.jsxs("div",{className:it.selectBox,children:[e.jsx("div",{className:it.passButton,onClick:()=>n(),children:"Pass"}),e.jsx("div",{className:it.goButton,onClick:()=>s(),children:"Go"})]})]})})}const GS=Q(),It=GS?Bs:Is;function XS({unit:t,goWritingActivity:i}){return e.jsx("div",{className:It.stepIntro,children:e.jsxs("div",{className:`${It.container} animate__animated animate__bounceInRight`,children:[e.jsx("div",{className:It.stepOrder,children:"Step5"}),e.jsx("div",{className:It.quizType,children:"Writing Activity"}),e.jsx("div",{className:It.comment,children:"글쓰기 후 첨삭을 받으세요."}),e.jsx("div",{className:It.readingUnit,children:e.jsx("img",{src:`https://wcfresource.a1edu.com/newsystem/image/character/subcharacter/${t}_13.png`,alt:""})}),e.jsx("div",{className:It.startButton,onClick:()=>i(),children:"Start"})]})})}const ZS=Q(),ot=ZS?mt:_t;function ez({currentSubmitCount:t,maxSubmitCount:i,noWritingActivity:n}){return e.jsx("div",{className:ot.submitRevision,children:e.jsxs("div",{className:`${ot.container} animate__animated animate__bounceInRight`,children:[e.jsx("div",{className:ot.stepOrder,children:"Step5. Writing Activity"}),e.jsx("div",{className:ot.title,children:"이 달의 첨삭"}),e.jsx("div",{className:ot.comment,children:"수고했어요! 이달의 남은 첨삭은 모두 사용했어요."}),e.jsxs("div",{className:ot.revisionBoard,children:[e.jsx("div",{className:ot.txtLabel,children:"남은 첨삭:"}),e.jsxs("div",{className:ot.txtCount,children:[i-t," / ",i]}),e.jsx("div",{className:ot.txtLabel,children:"첨삭 완료:"}),e.jsx("div",{className:ot.txtCount,children:t})]}),e.jsx("div",{className:`${ot.selectBox} ${ot.revisionDone}`,children:e.jsx("div",{className:ot.noButton,onClick:()=>n(),children:"Done"})})]})})}function tz({mode:t,type:i,currentSubmitCount:n,maxSubmitCount:s,goWritingActivity:a,noWritingActivity:l}){const u=Ot();let r;switch(i){case"In School":case"Overseas":switch(t){case"All":r=e.jsx(XS,{unit:u,goWritingActivity:a});break;case"Free":r=e.jsx(ls,{currentSubmitCount:n,maxSubmitCount:s,goWritingActivity:a,noWritingActivity:l});break;case"Limit":s-n<1?r=e.jsx(ez,{currentSubmitCount:n,maxSubmitCount:s,noWritingActivity:l}):r=e.jsx(ls,{currentSubmitCount:n,maxSubmitCount:s,goWritingActivity:a,noWritingActivity:l});break}break;case"No Revision":r=e.jsx(ls,{currentSubmitCount:n,maxSubmitCount:s,goWritingActivity:a,noWritingActivity:l});break}return e.jsx(e.Fragment,{children:r})}const nz=Q(),Qi=nz?Xe:Ge;function sz({currentTabIndex:t,index:i,changeTabNo:n}){return e.jsx("div",{className:`${Qi.tabButton} ${t===i?Qi.active:""}`,onClick:()=>n(i),children:i+1})}const iz=Q(),oz=iz?Xe:Ge;function rz({currentTabIndex:t,questionData:i,changeTabNo:n}){return e.jsx("div",{className:oz.tabs,children:i.map((s,a)=>e.jsx(sz,{currentTabIndex:t,index:a,changeTabNo:n}))})}const cz=Q(),az=cz?Xe:Ge;function uz({question:t}){return e.jsx("div",{className:az.questionText,children:t})}const lz=Q(),dz=lz?Xe:Ge;function _z({answerData:t,onChangeHandler:i}){return e.jsx("div",{className:dz.writingArea,children:e.jsx("textarea",{placeholder:"Please fill out within 30 to 300 characters.",value:t,onChange:n=>i(n.currentTarget.value)})})}const mz=Q(),xz=mz?Xe:Ge;function hz({saveAnswer:t}){return e.jsx("div",{className:xz.saveButton,onClick:()=>t(),children:"Save"})}const yz=Q(),fz=yz?Xe:Ge;function gz({isSubmit:t,submitAnswer:i}){return e.jsx("div",{style:t?{}:{opacity:"0.5",cursor:"default"},className:fz.submitButton,onClick:()=>i(),children:"Submit"})}const pz=Q(),wn=pz?Xe:Ge;function bz({isSubmit:t,wordMinCount:i,wordMaxCount:n,answerLength:s,saveAnswer:a,submitAnswer:l}){return e.jsxs("div",{className:wn.goNextStepBox,children:[e.jsxs("div",{className:wn.wordLimitIndicator,children:[e.jsxs("div",{className:wn.limit,children:["• Word Limit: ",i,"~",n]}),e.jsxs("div",{className:wn.words,children:["• The number of words: ",s]})]}),e.jsx(hz,{saveAnswer:a}),e.jsx(gz,{isSubmit:t,submitAnswer:l})]})}const jz=Q(),rt=jz?mt:_t;function ds({currentSubmitCount:t,maxSubmitCount:i,submitNoRevision:n}){return e.jsx("div",{className:rt.submitRevision,children:e.jsxs("div",{className:`${rt.container} animate__animated animate__bounceInRight`,children:[e.jsx("div",{className:rt.stepOrder,children:"Step5. Writing Activity"}),e.jsx("div",{className:rt.title,children:"이 달의 첨삭"}),e.jsx("div",{className:rt.comment,children:"수고했어요! 이달의 남은 첨삭은 모두 사용했어요."}),e.jsxs("div",{className:rt.revisionBoard,children:[e.jsx("div",{className:rt.txtLabel,children:"남은 첨삭:"}),e.jsxs("div",{className:rt.txtCount,children:[i-t," / ",i]}),e.jsx("div",{className:rt.txtLabel,children:"첨삭 완료:"}),e.jsx("div",{className:rt.txtCount,children:t})]}),e.jsx("div",{className:`${rt.selectBox} ${rt.revisionDone}`,children:e.jsx("div",{className:rt.noButton,onClick:()=>n(),children:"Done"})})]})})}const Sz=Q(),nt=Sz?mt:_t;function Ci({currentSubmitCount:t,maxSubmitCount:i,submitWritingActivity:n}){return e.jsx("div",{className:nt.submitRevision,children:e.jsxs("div",{className:`${nt.container} animate__animated animate__bounceInRight`,children:[e.jsx("div",{className:nt.stepOrder,children:"Step5. Writing Activity"}),e.jsx("div",{className:nt.title,children:"이 달의 첨삭"}),e.jsxs("div",{className:nt.revisionBoard,children:[e.jsx("div",{className:nt.txtLabel,children:"목표 첨삭:"}),e.jsx("div",{className:nt.txtCount,children:i}),e.jsx("div",{className:nt.txtLabel,children:"남은 첨삭:"}),e.jsx("div",{className:nt.txtCount,children:i-t-1}),e.jsx("div",{className:nt.txtLabel,children:"첨삭 완료:"}),e.jsxs("div",{className:nt.txtCount,children:[t+1," / ",i]})]}),e.jsx("div",{className:`${nt.selectBox} ${nt.revisionDone}`,children:e.jsx("div",{className:nt.yesButton,onClick:()=>n(),children:"Done"})})]})})}const zz=Q(),ct=zz?mt:_t;function vi({currentSubmitCount:t,maxSubmitCount:i,submitNoRevision:n,submitWritingActivity:s}){return e.jsx("div",{className:ct.submitRevision,children:e.jsxs("div",{className:`${ct.container} animate__animated animate__bounceInRight`,children:[e.jsx("div",{className:ct.stepOrder,children:"Step5. Writing Activity"}),e.jsx("div",{className:ct.title,children:"이 달의 첨삭"}),e.jsx("div",{className:ct.comment,children:"첨삭을 받으시겠어요?"}),e.jsxs("div",{className:ct.revisionBoard,children:[e.jsx("div",{className:ct.txtLabel,children:"남은 첨삭:"}),e.jsxs("div",{className:ct.txtCount,children:[i-t," / ",i]}),e.jsx("div",{className:ct.txtLabel,children:"첨삭 완료:"}),e.jsx("div",{className:ct.txtCount,children:t})]}),e.jsxs("div",{className:ct.selectBox,children:[e.jsx("div",{className:ct.noButton,onClick:()=>n(),children:"No"}),e.jsx("div",{className:ct.yesButton,onClick:()=>s,children:"Yes"})]})]})})}function wz({mode:t,type:i,currentSubmitCount:n,maxSubmitCount:s,submitWritingActivity:a,submitNoRevision:l}){let u;switch(i){case"In School":case"Overseas":switch(t){case"All":case"Free":s-n<1?u=e.jsx(ds,{currentSubmitCount:n,maxSubmitCount:s,submitNoRevision:l}):t==="All"?u=e.jsx(Ci,{currentSubmitCount:n,maxSubmitCount:s,submitWritingActivity:a}):u=e.jsx(vi,{currentSubmitCount:n,maxSubmitCount:s,submitNoRevision:l,submitWritingActivity:a});break;case"Limit":s-n<1?u=e.jsx(ds,{currentSubmitCount:n,maxSubmitCount:s,submitNoRevision:l}):u=e.jsx(Ci,{currentSubmitCount:n,maxSubmitCount:s,submitWritingActivity:a});break}break;case"No Revision":s-n<1?u=e.jsx(ds,{currentSubmitCount:n,maxSubmitCount:s,submitNoRevision:l}):u=e.jsx(vi,{currentSubmitCount:n,maxSubmitCount:s,submitNoRevision:l,submitWritingActivity:a});break}return e.jsx(e.Fragment,{children:u})}const $i="Writing Activity",Ts=Q(),_s=Ts?Xe:Ge;function Qz(t){const i=t.currentStep,n=je(()=>{}),[s,a]=c.useState("animate__bounceInRight"),{isStepIntro:l,closeStepIntro:u}=be(),{isResultShow:r,changeResultShow:x}=Fe(),[y,f]=c.useState(!1),{quizState:p,changeQuizState:h}=Ae(),[g,m]=Se(kS,t,i),{scoreBoardData:o,setStudentAnswers:_}=ze(),[d,j]=c.useState(0),[S,b]=c.useState([]),[N,L]=c.useState(!1);if(c.useEffect(()=>{!l&&g&&(n.setup(g.QuizTime,!0),h("studying"))},[l]),c.useEffect(()=>{if(g)try{if(console.log(g),m.length>0){const $=[];m.map(R=>$.push(R.TempText)),b([...$])}else{const $=new Array(g.Writing.Question.length).fill("");b([...$])}_(m,0)}catch($){console.log($)}},[g]),c.useEffect(()=>{if(S&&g){const $=S.filter(ee=>ee==="").length,R=F();$===0&&R>=g.Writing.WordMinCount&&R<=g.Writing.WordMaxCount?L(!0):L(!1)}},[S]),!g)return e.jsx(e.Fragment,{children:"Loading..."});const C=()=>{a("animate__bounceOutLeft")},B=async()=>{if(h("checking"),p==="loading"){const $={bookType:t.bookType,studyId:t.studyId,studentHistoryId:t.studentHistoryId,step:`${i}`,saveType:"R",writeText:"''",isFinishStudy:!0},R=await Jt($);Number(R.result)===0&&t.onFinishActivity()}},E=async()=>{if(h("checking"),p==="studying"){const $={bookType:t.bookType,studyId:t.studyId,studentHistoryId:t.studentHistoryId,step:`${i}`,saveType:"S",writeText:"''",isFinishStudy:!0},R=await Jt($);Number(R.result)===0&&t.onFinishActivity()}},w=async()=>{if(h("checking"),p==="studying"){const $={bookType:t.bookType,studyId:t.studyId,studentHistoryId:t.studentHistoryId,step:`${i}`,saveType:"E",writeText:"''",isFinishStudy:!0},R=await Jt($);Number(R.result)===0&&t.onFinishActivity()}},k=()=>{N&&x(!0)},A=$=>{j($)},V=($="")=>{let R=S!==void 0?[...S]:[$];R[d]=$,b([...R])},F=()=>S.reduce((R,ee)=>R+(ee===""?0:ue.trimStart(ue.trimEnd(ee.replaceAll(/\s+/g," "))).split(" ").length),0),q=async()=>{try{h("checking");const $=S.join("┒");if(p==="studying"){const R={bookType:t.bookType,studyId:t.studyId,studentHistoryId:t.studentHistoryId,step:`${i}`,saveType:"X",writeText:`${$}`},ee=await Jt(R);Number(ee.result)===0&&h("studying")}}catch($){console.log($)}},H=$=>{f($)};return e.jsx(e.Fragment,{children:l?e.jsx("div",{className:`animate__animated ${s}`,onAnimationEnd:()=>{s==="animate__bounceOutLeft"&&u()},children:e.jsx(tz,{mode:g.Writing.Mode,type:g.Writing.Type,currentSubmitCount:g.Writing.CurrentSubmitCount,maxSubmitCount:g.Writing.MaxSubmitCount,goWritingActivity:C,noWritingActivity:B})}):e.jsx(e.Fragment,{children:r?e.jsx("div",{className:"animate__animated ",children:e.jsx(wz,{mode:g.Writing.Mode,type:g.Writing.Type,currentSubmitCount:g.Writing.CurrentSubmitCount,maxSubmitCount:g.Writing.MaxSubmitCount,submitWritingActivity:E,submitNoRevision:w})}):e.jsxs(e.Fragment,{children:[e.jsx(we,{quizNumber:d+1,totalQuizCnt:g.Writing.Question.length,life:1,timeMin:n.time.timeMin,timeSec:n.time.timeSec,changeSideMenu:H}),e.jsx("div",{className:`${_s.comment} animate__animated animate__fadeInLeft`,children:$i}),e.jsxs(Ce,{children:[Ts?e.jsx(e.Fragment,{}):e.jsx(W,{height:15}),e.jsxs($e,{typeCSS:_s.writingActivity2,containerCSS:_s.container,children:[e.jsx(rz,{currentTabIndex:d,questionData:g.Writing.Question,changeTabNo:A}),e.jsx(uz,{question:g.Writing.Question[d]}),e.jsx(_z,{answerData:S[d],onChangeHandler:V}),e.jsx(bz,{isSubmit:N,wordMinCount:g.Writing.WordMinCount,wordMaxCount:g.Writing.WordMaxCount,answerLength:F(),saveAnswer:q,submitAnswer:k})]}),Ts?e.jsx(W,{height:5}):e.jsx(W,{height:15})]}),e.jsx(Qe,{isSideOpen:y,currentStep:i,currentStepType:$i,quizLength:0,maxAnswerCount:0,scoreBoardData:o,changeSideMenu:H})]})})})}const Xi=t=>{const i=Ot(),{studyInfo:n,bookInfo:s,handler:a}=c.useContext(_e),[l,u]=c.useState(n.startStep),[r,x]=c.useState(!n.isPassedVocabularyPractice),y=n.mappedStepActivity[l-1],f=()=>{const d=n.openSteps.findIndex(j=>j===l);return d>=0&&n.openSteps.length>d+1?n.openSteps[d+1]:void 0},p=()=>{const d=f();d?u(d):(console.log(a.finishStudy),a.actionFinishStudy(a.finishStudy,i))},h=d=>{x(d)},g=Number(s.BookCode.substring(6));let m="";if(n.bookType==="EB"){if(s.BookLevel==="KA"){const d=["theme-zoo-2","theme-jungle","theme-antarctica","theme-zoo-1"];m=d[g%d.length]}else if(s.BookLevel==="KB"||s.BookLevel==="KC"){const d=["theme-farm","theme-forest","theme-kids-room","theme-space"];m=d[g%d.length]}}if(m===""){const d=["theme-camping","theme-season-spring","theme-season-summer","theme-season-autumn","theme-season-winter","theme-playground"];m=d[g%d.length]}const o={mode:n.mode,currentStep:l,studyId:n.studyId,studentHistoryId:n.studentHistoryId,bookType:n.bookType,studyTypeCode:n.bookType==="EB"?"001006":"001001",onFinishActivity:p,isEnabledPractice:n.isPassedVocabularyPractice,changeVocaState:h,theme:m,lastStep:n.allSteps[n.allSteps.length-1],isReTestYn:n.isReTestYn};let _;switch(y){case Me.LISTENING_1:_=e.jsx(R_,{...o});break;case Me.LISTENING_2:_=e.jsx(W_,{...o});break;case Me.LISTENING_3:_=e.jsx(G_,{...o});break;case Me.LISTENING_4:_=e.jsx(am,{...o});break;case Me.VOCABULARY_1:r?_=e.jsx(bg,{...o}):_=e.jsx(ib,{...o});break;case Me.VOCABULARY_2:r?_=e.jsx(fb,{...o}):_=e.jsx(Qb,{...o});break;case Me.VOCABULARY_3:r?_=e.jsx(Mb,{...o}):_=e.jsx(Zb,{...o});break;case Me.VOCABULARY_4:r?_=e.jsx(hj,{...o}):_=e.jsx($j,{...o});break;case Me.READING_COMP_1:_=e.jsx(ax,{...o});break;case Me.READING_COMP_2:_=e.jsx(fx,{...o});break;case Me.READING_COMP_3:_=e.jsx(Cx,{...o});break;case Me.READING_COMP_4:_=e.jsx(Fx,{...o});break;case Me.SUMMARY_1:_=e.jsx(Wy,{...o});break;case Me.SUMMARY_2:_=e.jsx(uf,{...o});break;case Me.TRUE_OR_FALSE:_=e.jsx(i1,{...o});break;case Me.CLOZE_1:_=e.jsx($d,{...o});break;case Me.CLOZE_2:_=e.jsx(Gs,{...o});break;case Me.CLOZE_3:_=e.jsx(Gs,{...o});break;case Me.WRITING_1:_=e.jsx(KS,{...o});break;case Me.WRITING_2:_=e.jsx(Qz,{...o});break}return e.jsx("div",{className:`${Es.quizTemplate} ${m}`,children:_})};function Cz(){const[t,i]=c.useState(!1),[n,s]=c.useState({width:1,height:1});return{imgSize:n,preloadImage:l=>{if(!t){const u=[...new Set(l.map(r=>r.ImagePath))];u.map((r,x)=>{const y=new Image;y.src=r,x===0&&r!==null&&s({width:y.width,height:y.height}),x===u.length-1&&i(!0)})}}}}const vz="_ebook_1ptjj_1",$z="_ebook_page_1ptjj_26",Nz="_text_wrapper_1ptjj_29",Tz="_ebook_header_1ptjj_36",Az="_menu_button_1ptjj_48",kz="_ebook_play_bar_drop_down_menu_1ptjj_57",Iz="_read_mode_option_1ptjj_60",Bz="_read_mode_option_menu_1ptjj_66",Ez="_menu_name_1ptjj_80",Pz="_menu_item_1ptjj_86",Mz="_on_1ptjj_91",Lz="_light_box_1ptjj_95",qz="_ebook_play_mode_mobile_1ptjj_105",Rz="_slide_in_bottom_1ptjj_113",Oz="_slide_out_bottom_1ptjj_137",Fz="_label_1ptjj_161",Hz="_select_box_1ptjj_167",Dz="_select_button_1ptjj_172",Wz="_radio_1ptjj_189",Vz="_page_turning_mode_1ptjj_209",Uz="_choose_button_1ptjj_218",Jz="_container_1ptjj_230",Kz="_ebook_progress_bar_1ptjj_255",Yz="_progress_1ptjj_262",Gz="_ebook_play_bar_1ptjj_57",Xz="_ebook_play_bar_pc_area_l_1ptjj_281",Zz="_read_mode_button_1ptjj_293",ew="_ebook_play_bar_pc_area_c_1ptjj_300",tw="_backward_1ptjj_307",nw="_forward_1ptjj_308",sw="_play_1ptjj_321",iw="_ebook_play_bar_pc_area_r_1ptjj_333",ow="_full_screen_button_1ptjj_340",rw="_word_button_1ptjj_348",cw="_mobile_1ptjj_367",aw="_ebook_page_arrows_1ptjj_386",uw="_left_arrow_1ptjj_386",lw="_right_arrow_1ptjj_387",dw="_ebook_body_pc_1ptjj_413",_w="_ebook_contents_1ptjj_418",mw="_pages_1ptjj_421",xw="_ebook_body_mobile_p_1ptjj_433",hw="_ebook_voca_list_1ptjj_444",yw="_voca_item_1ptjj_449",fw="_word_item_1ptjj_454",gw="_word_1ptjj_348",pw="_mean_1ptjj_463",bw="_ebook_vocabulary_note_1ptjj_468",jw="_ebook_vocabulary_note_container_1ptjj_476",Sw="_ebook_vocabulary_note_area_top_1ptjj_497",zw="_close_vocabulary_note_1ptjj_497",ww="_btn_delete_1ptjj_503",Qw="_btn_print_1ptjj_512",Cw="_book_info_1ptjj_520",vw="_book_code_1ptjj_520",$w="_book_title_1ptjj_523",Nw="_line_1ptjj_527",Tw="_ebook_vocabulary_note_screen_block_1ptjj_533",Aw="_chooseRating_1ptjj_542",kw="_btnStarOn_1ptjj_548",Iw="_btnStarOff_1ptjj_556",Bw="_ebookRating_1ptjj_565",Ew="_groupBookcover_1ptjj_603",Pw="_imgBookcover_1ptjj_611",Mw="_groupChoose_1ptjj_621",Lw="_txtQuestion_1ptjj_631",qw="_groupChooseRating_1ptjj_646",Rw="_groupConfirm_1ptjj_655",Ow="_btnConfirm_1ptjj_662",Fw="_blue_1ptjj_681",Hw="_gray_1ptjj_690",Dw="_groupComment_1ptjj_699",Ww="_icoExclamationMark_1ptjj_706",Vw="_txtComment_1ptjj_715",Uw="_movieContents_1ptjj_719",Jw="_btnDelete_1ptjj_739",I={ebook:vz,ebook_page:$z,text_wrapper:Nz,ebook_header:Tz,menu_button:Az,ebook_play_bar_drop_down_menu:kz,read_mode_option:Iz,read_mode_option_menu:Bz,menu_name:Ez,menu_item:Pz,on:Mz,light_box:Lz,ebook_play_mode_mobile:qz,slide_in_bottom:Rz,"slide-in-bottom":"_slide-in-bottom_1ptjj_1",slide_out_bottom:Oz,"slide-out-bottom":"_slide-out-bottom_1ptjj_1",label:Fz,select_box:Hz,select_button:Dz,radio:Wz,page_turning_mode:Vz,choose_button:Uz,container:Jz,ebook_progress_bar:Kz,progress:Yz,ebook_play_bar:Gz,ebook_play_bar_pc_area_l:Xz,read_mode_button:Zz,ebook_play_bar_pc_area_c:ew,backward:tw,forward:nw,play:sw,ebook_play_bar_pc_area_r:iw,full_screen_button:ow,word_button:rw,mobile:cw,ebook_page_arrows:aw,left_arrow:uw,right_arrow:lw,ebook_body_pc:dw,ebook_contents:_w,pages:mw,ebook_body_mobile_p:xw,ebook_voca_list:hw,voca_item:yw,word_item:fw,word:gw,mean:pw,ebook_vocabulary_note:bw,ebook_vocabulary_note_container:jw,ebook_vocabulary_note_area_top:Sw,close_vocabulary_note:zw,btn_delete:ww,btn_print:Qw,book_info:Cw,book_code:vw,book_title:$w,line:Nw,ebook_vocabulary_note_screen_block:Tw,chooseRating:Aw,btnStarOn:kw,btnStarOff:Iw,ebookRating:Bw,groupBookcover:Ew,imgBookcover:Pw,groupChoose:Mw,txtQuestion:Lw,groupChooseRating:qw,groupConfirm:Rw,btnConfirm:Ow,blue:Fw,gray:Hw,groupComment:Dw,icoExclamationMark:Ww,txtComment:Vw,movieContents:Uw,btnDelete:Jw};function Kw(t){const[i,n]=c.useState(!0),[s,a]=c.useState(1),[l,u]=c.useState({playPage:1,sequnce:0}),[r,x]=c.useState(0),[y,f]=c.useState(""),p=c.useRef(new Audio);p.current.autoplay=!0;const h=p.current,[g,m]=c.useState(0),[o,_]=c.useState(1);c.useEffect(()=>{if(console.log("change page number",s),t){const w=t.find(k=>k.Page===s&&k.SoundPath);u({playPage:w?s:s+1,sequnce:0})}},[s]),c.useEffect(()=>{console.log("ue ps",h);const w=()=>{console.log("audio canplaythrough"),h.play(),f("play")};h.addEventListener("canplaythrough",w);const k=()=>{m(h.currentTime)};h.addEventListener("timeupdate",k);const A=()=>{console.log("audio pause"),f("pause")};h.addEventListener("pause",A);const V=()=>{console.log("audio ended"),i&&(l.playPage%2===0?t.find(q=>q.Page===s+2)?a(s+2):(r===0?x(1):r<=1&&x(2),f("")):(console.log("pp",l.playPage),u({playPage:l.playPage+1,sequnce:0})))};return h.addEventListener("ended",V),d(l.playPage,l.sequnce),()=>{console.log("return handler"),h.removeEventListener("canplaythrough",w),h.removeEventListener("timeupdate",k),h.removeEventListener("pause",A),h.removeEventListener("ended",V),j()}},[l]),c.useEffect(()=>{h.playbackRate=o},[o]),c.useEffect(()=>{r===1&&a(1)},[r]);const d=(w,k)=>{const A=t.filter(V=>V.Page===w&&V.SoundPath!=="");A.length>0&&A.length>k-1?(console.log("play audio"),h.src=A[0].SoundPath,h.playbackRate=o,k>0&&(h.currentTime=A[k-1].StartTime/1e3)):(h.src="",h.currentTime=0)},j=()=>{h.pause(),h.src="",h.currentTime=0,f("")};return{pageNumber:s,playState:y,pageSeq:l,currentTime:g,readCnt:r,playAudio:d,stopAudio:j,pauseAudio:()=>{h.pause()},resumeAudio:()=>{y==="play"&&(f("play"),h.play())},changePlaySpeed:w=>{_(w)},changeDuration:(w,k)=>{u({playPage:w,sequnce:k})},changeVolume:w=>{h.volume=w},changePageNumber:w=>{w===1&&f(""),a(w)},changeAutoNextPage:w=>{n(w)}}}const Zi="/public/assets/icon_menu-e46b7a18.svg";function Yw({changeSideMenu:t}){return e.jsx("div",{className:I.ebook_header,children:e.jsx("div",{className:I.menu_button,onClick:()=>{t(!0)},children:e.jsx("img",{src:Zi,width:24,height:24,alt:""})})})}function Gw({children:t}){const i=(window.innerHeight-100)/750;return e.jsx("div",{className:I.ebook_body_pc,children:e.jsx("div",{className:I.ebook_contents,children:e.jsx("div",{style:{transform:`scale(${i})`},className:`${I.pages}`,children:t})})})}function Xw({pageNumber:t,sentence:i,sequence:n,clickSentence:s}){const a=u=>{const r=/id=\"t/g;let x=u.replace(r,`id="t_${t}_`);if(n!==999){const y=/ id=\"t/g;x=x.replace(y,` style='cursor:pointer;' id="t`)}return x},l=()=>{n!==999&&s(t,n)};return e.jsx("div",{dangerouslySetInnerHTML:{__html:a(i)},onClick:()=>l()})}function Zw({pageNumber:t,sentence:i,sequence:n,clickSentence:s}){const a=u=>{const r=/id=\"t/g;return u.replace(r,`style='cursor:pointer; background-color:#ffff00' id="t_${t}_`)},l=()=>{n!==999&&s(t,n)};return e.jsx("div",{dangerouslySetInnerHTML:{__html:a(i)},onClick:()=>l()})}function As({isTextShow:t,pageSeq:i,pageNumber:n,storyData:s,currentTime:a,isHighlight:l,clickSentence:u}){var j,S,b;const[r,x]=c.useState(""),[y,f]=c.useState(),[p,h]=c.useState(),g=((b=(S=(j=c.useContext(_e))==null?void 0:j.bookInfo)==null?void 0:S.BookLevel)==null?void 0:b.substring(0,1))||"K",[m,o]=c.useState(""),[_,d]=c.useState(n);return c.useEffect(()=>{},[t]),c.useEffect(()=>{var N,L;if(s){const C=(N=s.find(w=>w.Page===n&&w.Sequence===999))==null?void 0:N.Css;if(C){const w=/\#t/g,k=C.replace(w,`#t_${n}_`);x(k)}const B=(L=s.find(w=>w.Page===n&&w.Sequence===999))==null?void 0:L.ImagePath,E=s.filter(w=>w.Page===n);h(B),f(E),_<n?(d(n),o("slide-in-right"),setTimeout(()=>{o("")},100)):(d(n),o("slide-in-left"),setTimeout(()=>{o("")},100))}},[n]),e.jsx("div",{className:`${I.ebook_page} ${m}`,children:e.jsxs("div",{className:I.text_wrapper,style:{backgroundImage:`url(${p})`,width:g.toUpperCase()==="K"?"480px":"525px"},children:[e.jsx("div",{dangerouslySetInnerHTML:{__html:r}}),y&&t&&y.map(N=>i.playPage===n&&N.Sequence!==999&&a>=N.StartTime/1e3&&a<=N.EndTime/1e3&&l?e.jsx(Zw,{pageNumber:n,sequence:N.Sequence,sentence:N.Contents,clickSentence:u}):e.jsx(Xw,{pageNumber:n,sequence:N.Sequence,sentence:N.Contents,clickSentence:u}))]})})}const Ls="/public/assets/icon_chev_white_left-1ab06882.svg",qs="/public/assets/icon_chev_white_right-ff1d2e9e.svg";function eQ({pageWidth:t,pageScale:i,turnPageLeft:n,turnPageRight:s}){return e.jsxs("div",{className:I.ebook_page_arrows,children:[e.jsx("div",{className:I.left_arrow,children:e.jsx("button",{onClick:()=>{n()},children:e.jsx("img",{src:Ls,width:60,alt:""})})}),e.jsx("div",{className:I.right_arrow,children:e.jsx("button",{onClick:()=>{s()},children:e.jsx("img",{src:qs,width:60,alt:""})})})]})}const Rs="/public/assets/icon_chev_down-3920372e.svg";function tQ({changeTextShow:t,changeMuteAudio:i,changeHighlight:n}){const[s,a]=c.useState(!1),[l,u]=c.useState([{name:"Basic",selected:"on"},{name:"No Text",selected:""},{name:"No Audio",selected:""},{name:"No Highlight",selected:""}]),r=l.find(y=>y.selected==="on"),x=y=>{const f=[...l];switch(f.map(p=>{p.selected=""}),f[y].selected="on",y){case 0:t(!0),i(!1),n(!0);break;case 1:t(!1),i(!1),n(!0);break;case 2:t(!0),i(!0),n(!0);break;case 3:t(!0),i(!1),n(!1);break}u(f),a(!1)};return e.jsxs("div",{className:I.ebook_play_bar_drop_down_menu,children:[e.jsxs("div",{className:I.read_mode_option,onClick:()=>{a(!s)},children:[e.jsx("span",{children:r==null?void 0:r.name}),e.jsx("img",{src:Rs,width:15,alt:""})]}),s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:I.read_mode_option_menu,children:[e.jsx("div",{className:I.menu_name,children:"Read Mode"}),l.map((y,f)=>e.jsx("div",{className:`${I.menu_item} ${y.selected?I.on:""}`,onClick:()=>x(f),children:y.name}))]}),e.jsx("div",{className:I.light_box,onClick:()=>{a(!1)}})]})]})}function nQ({changePlaySpeed:t}){const[i,n]=c.useState(!1),[s,a]=c.useState([{rate:.8,selected:""},{rate:1,selected:"on"},{rate:1.2,selected:""},{rate:1.5,selected:""}]),l=s.find(r=>r.selected==="on"),u=r=>{const x=[...s];x.map(y=>{y.selected=""}),x[r].selected="on",t(x[r].rate),a(x),n(!1)};return e.jsxs("div",{className:I.ebook_play_bar_drop_down_menu,children:[e.jsxs("div",{className:I.read_mode_option,onClick:()=>{n(!i)},children:[e.jsxs("span",{children:[l==null?void 0:l.rate,"x"]}),e.jsx("img",{src:Rs,width:15,alt:""})]}),i&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:I.read_mode_option_menu,children:[e.jsx("div",{className:I.menu_name,children:"Read Mode"}),s.map((r,x)=>e.jsxs("div",{className:`${I.menu_item} ${r.selected?I.on:""}`,onClick:()=>u(x),children:[r.rate,"x"]}))]}),e.jsx("div",{className:I.light_box,onClick:()=>{n(!1)}})]})]})}function sQ({menuName:t,menuItems:i}){const[n,s]=c.useState(!1),[a,l]=c.useState(i),u=a.filter(r=>r.selected==="on");return e.jsxs("div",{className:I.ebook_play_bar_drop_down_menu,children:[e.jsxs("div",{className:I.read_mode_option,onClick:()=>{s(!n)},children:[e.jsx("span",{children:u[0].name}),e.jsx("img",{src:Rs,width:15,alt:""})]}),n&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:I.read_mode_option_menu,children:[e.jsx("div",{className:I.menu_name,children:t}),a.map((r,x)=>e.jsx("div",{className:`menu-item ${r.selected}`,onClick:()=>{const y=[...a];y.map(f=>{f.selected=""}),y[x].selected="on",l(y),s(!1)},children:r.name}))]}),e.jsx("div",{className:I.light_box,onClick:()=>{s(!1)}})]})]})}const eo="/public/assets/btn_play-ce293349.svg",to="/public/assets/btn_pause-1b0dd29c.svg",no="/public/assets/icon_word-4b133954.svg",iQ="/public/assets/icon_full_screen-e667f2e6.svg",oQ="/public/assets/icon_full_screen_out-18188977.svg";function rQ({progressWidth:t,pageSeq:i,playState:n,isFullScreen:s,turnPageLeft:a,turnPageRight:l,changeTextShow:u,changeMuteAudio:r,changeHighlight:x,changePlaySpeed:y,playAudio:f,pauseAudio:p,resumeAudio:h,toggleVocaList:g}){return c.useEffect(()=>{},[s]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:I.ebook_progress_bar,children:e.jsx("div",{className:I.progress,style:{width:`${t}%`}})}),e.jsxs("div",{className:I.ebook_play_bar,children:[e.jsxs("div",{className:I.ebook_play_bar_pc_area_l,children:[e.jsx(tQ,{changeTextShow:u,changeMuteAudio:r,changeHighlight:x}),e.jsx(nQ,{changePlaySpeed:y}),e.jsx(sQ,{menuName:"페이지 넘기기",menuItems:[{name:"Auto",selected:"on"},{name:"Manually",selected:""}]})]}),e.jsxs("div",{className:I.ebook_play_bar_pc_area_c,children:[e.jsx("div",{className:I.backward,onClick:()=>{a()},children:e.jsx("img",{src:Ls,width:40,alt:""})}),e.jsx("div",{className:I.play,onClick:()=>{switch(n){case"play":case"resume":p();break;case"":case"stop":f(i.playPage,i.sequnce);break;case"pause":h();break}},children:n!=="play"?e.jsx("img",{src:eo,width:40}):e.jsx("img",{src:to,width:40})}),e.jsx("div",{className:I.forward,onClick:()=>{l()},children:e.jsx("img",{src:qs,width:40,alt:""})})]}),e.jsxs("div",{className:I.ebook_play_bar_pc_area_r,children:[e.jsx("div",{className:I.word_button,onClick:()=>{g()},children:e.jsx("img",{src:no,width:28,height:28,alt:""})}),e.jsx("div",{className:I.full_screen_button,onClick:()=>{s?document.exitFullscreen():document.body.requestFullscreen()},children:s?e.jsx("img",{src:oQ,width:20,height:20,alt:""}):e.jsx("img",{src:iQ,width:20,height:20,alt:""})})]})]})]})}const cQ="/public/assets/check_board-04b361f3.svg",aQ="/public/assets/rec-236d3098.svg",uQ="/public/assets/movie_book-0bc631c4.svg";function so({isSideOpen:t,changeSideMenu:i,changeRatingShow:n,toggleMovieShow:s}){const{studyInfo:a,bookInfo:l,handler:u}=c.useContext(_e),[r,x]=c.useState("animate__fadeIn"),[y,f]=c.useState();c.useEffect(()=>{x("animate__fadeIn"),f("animate__slideInRight")},[t]);const p=()=>{x("animate__fadeOut"),f("animate__slideOutRight"),setTimeout(()=>{i(!1)},300)};return e.jsx(e.Fragment,{children:t&&e.jsxs("div",{className:`${se.study_side_menu} animate__animated ${r}`,children:[e.jsxs("div",{className:`${se.study_side_menu_container} animate__animated ${y}`,children:[e.jsxs("div",{className:se.study_side_menu_area_top,children:[e.jsx("div",{className:se.close_side_menu,children:e.jsx("div",{className:se.btn_delete,onClick:()=>{p()},children:e.jsx("img",{src:Ei,alt:""})})}),e.jsxs("div",{className:se.book_info,children:[e.jsx("div",{className:se.book_code,children:l.BookCode}),e.jsx("div",{className:se.book_title,children:l.Title})]}),e.jsx("div",{className:se.select_study_menu,children:e.jsxs("div",{className:`${se.select_study_menu_item} ${se.go_on}`,onClick:()=>{u.isPreference||a.isSubmitPreference?u.changeView("quiz"):(i(!1),n(!0))},children:[e.jsx("img",{src:cQ,alt:""}),"학습하기"]})}),(l.AnimationPath!==""||a.isAvailableSpeaking)&&e.jsx("div",{className:se.label,children:"보너스 학습"}),e.jsxs("div",{className:se.ebook_more_activity,children:[l.AnimationPath!==""&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:se.ebook_more_activity_item,onClick:()=>{i(!1),s(!0)},children:[e.jsx("img",{src:uQ,alt:""}),"무비 시청"]})}),a.isAvailableSpeaking&&e.jsx(e.Fragment,{children:e.jsxs("div",{className:se.ebook_more_activity_item,onClick:()=>{u.changeView("speaking")},children:[e.jsx("img",{src:aQ,alt:""}),"SPEAK (말하기 연습)"]})})]})]}),e.jsx("div",{className:se.study_side_menu_area_bottom,children:e.jsxs("div",{className:se.btn_exit,onClick:()=>{try{window.onExitStudy()}catch{location.replace("/")}},children:[e.jsx("img",{src:Pi,alt:""}),e.jsx("div",{className:"txt",children:"나가기"})]})})]}),e.jsx("div",{className:se.screen_block,onClick:()=>p()})]})})}const lQ="/public/assets/icon_speaker-32763dad.svg";function dQ({pauseStoryAudio:t,resumeStoryAudio:i}){const n=c.useRef(new Audio);n.current.autoplay=!0;const s=n.current;return c.useEffect(()=>{console.log("ue ps",s);const l=()=>{console.log("audio canplaythrough"),t(),s.play()};s.addEventListener("canplaythrough",l);const u=()=>{console.log("audio ended"),i()};return s.addEventListener("ended",u),()=>{console.log("return handler"),s.removeEventListener("canplaythrough",l),s.removeEventListener("ended",u)}},[]),{playAudio:l=>{s.src=l}}}const _Q=({pauseStoryAudio:t,resumeStoryAudio:i})=>{const{studyInfo:n}=c.useContext(_e),[s,a]=c.useState(),{playAudio:l}=dQ({pauseStoryAudio:t,resumeStoryAudio:i});return c.useEffect(()=>{s||(async()=>{const r={mode:n.mode,currentStep:2,studyId:n.studyId,studentHistoryId:n.studentHistoryId,bookType:n.bookType,studyTypeCode:n.bookType==="EB"?"001006":"001001",onFinishActivity:()=>{},isEnabledPractice:n.isPassedVocabularyPractice,changeVocaState:()=>{},theme:"theme-antarctica",lastStep:n.allSteps[n.allSteps.length-1],isReTestYn:n.isReTestYn};switch(n.mappedStepActivity[1]){case"Vocabulary1":a(await Hi(r));break;case"Vocabulary2":a(await Di(r));break;case"Vocabulary3":a(await Wi(r));break;case"Vocabulary4":a(await Vi(r));break}})()},[]),e.jsx("div",{className:I.ebook_voca_list,children:s==null?void 0:s.Quiz.map((u,r)=>{let x="";switch(s.MainMeanLanguage){case"korean":x=u.Question.Korean;case"chinese":x=u.Question.Chinese;case"japanese":x=u.Question.Japanese;case"vietnamese":x=u.Question.Vietnamese;case"indonesian":x=u.Question.Indonesian;case"english":x=u.Question.Britannica?u.Question.Britannica:""}return e.jsxs("div",{className:I.voca_item,children:[e.jsxs("div",{className:I.word_item,children:[e.jsx("div",{className:I.word,children:u.Question.Text}),e.jsx("img",{src:lQ,alt:"",onClick:()=>{l(u.Question.Sound)}})]}),e.jsx("div",{className:I.mean,children:x})]})})})},mQ="/public/assets/icon_delete_black-5f381612.svg",xQ="/public/assets/icon_printer-6fba39e5.svg";function io({isVocaOpen:t,toggleVocaList:i,pauseStoryAudio:n,resumeStoryAudio:s}){const{bookInfo:a}=c.useContext(_e),[l,u]=c.useState("animate__fadeIn"),[r,x]=c.useState("animate__slideInRight");c.useEffect(()=>{u("animate__fadeIn"),x("animate__slideInRight")},[t]);const y=()=>{u("animate__fadeOut"),x("animate__slideOutRight"),setTimeout(()=>{i()},300)};return e.jsx(e.Fragment,{children:t&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`${I.ebook_vocabulary_note} animate__animated ${l}`,children:e.jsx("div",{id:"ebook-vocabulary-note-container",className:`${I.ebook_vocabulary_note_container} animate__animated ${r}`,children:e.jsxs("div",{className:I.ebook_vocabulary_note_area_top,children:[e.jsxs("div",{className:I.close_vocabulary_note,children:[a.VocabularyPath&&e.jsx("div",{className:I.btn_print,onClick:()=>{window.open(a.VocabularyPath)},children:e.jsx("img",{src:xQ,alt:""})}),e.jsx("div",{className:I.btn_delete,onClick:()=>{y()},children:e.jsx("img",{src:mQ,alt:""})})]}),e.jsxs("div",{className:I.book_info,children:[e.jsx("div",{className:I.book_code,children:a.BookCode}),e.jsx("div",{className:I.book_title,children:a.Title})]}),e.jsx("div",{className:I.line}),e.jsx("div",{className:I.voca_list,children:e.jsx(_Q,{pauseStoryAudio:n,resumeStoryAudio:s})})]})})}),e.jsx("div",{className:I.ebook_vocabulary_note_screen_block,onClick:()=>{y()}})]})})}function hQ({isRatingShow:t,isMovieShow:i,storyData:n,imgSize:s,pageScale:a,changeRatingShow:l,toggleMovieShow:u}){const{pageNumber:r,playState:x,pageSeq:y,currentTime:f,playAudio:p,pauseAudio:h,resumeAudio:g,changePlaySpeed:m,changeDuration:o,changeVolume:_,changePageNumber:d}=Kw(n),[j,S]=c.useState(""),[b,N]=c.useState(!1),[L,C]=c.useState(!0),[B,E]=c.useState(!1),[w,k]=c.useState(!0),[A,V]=c.useState(!1),[F,q]=c.useState(!1),H=(r+1)/n[n.length-1].Page*100;c.useEffect(()=>{(t||i)&&h(),!t&&x==="pause"&&g()},[t,i]),c.useEffect(()=>{S("")},[r]),c.useEffect(()=>{if(n)switch(j){case"play":break;case"left":d(r-2);break;case"right":d(r+2);break}},[j]),c.useEffect(()=>{_(B?0:1)},[B]),c.useEffect(()=>{const T=()=>{document.fullscreenElement?q(!0):q(!1)};return document.body.addEventListener("fullscreenchange",T),()=>{document.body.removeEventListener("fullscreenchange",T)}},[document.fullscreenElement]);const $=T=>{N(T)},R=()=>{r>1&&j===""&&S("left")},ee=()=>{r+2<=n[n.length-1].Page&&j===""&&S("right")},Z=(T,M)=>{o(T,M)},U=T=>{C(T)},D=T=>{E(T)},v=T=>{k(T)},z=()=>{V(!A)};return e.jsxs(e.Fragment,{children:[e.jsx(Yw,{changeSideMenu:$}),e.jsxs(Gw,{children:[e.jsx(As,{isTextShow:L,pageSeq:y,pageNumber:r,storyData:n,currentTime:f,isHighlight:w,clickSentence:Z},"page-1"),e.jsx(As,{isTextShow:L,pageSeq:y,pageNumber:r+1,storyData:n,currentTime:f,isHighlight:w,clickSentence:Z},"page-2")]}),e.jsx(eQ,{pageWidth:s.width,pageScale:a,turnPageLeft:R,turnPageRight:ee}),e.jsx(rQ,{progressWidth:H,pageSeq:y,playState:x,isFullScreen:F,turnPageLeft:R,turnPageRight:ee,changeTextShow:U,changeMuteAudio:D,changeHighlight:v,changePlaySpeed:m,playAudio:p,pauseAudio:h,resumeAudio:g,toggleVocaList:z}),e.jsx(so,{isSideOpen:b,changeSideMenu:$,changeRatingShow:l,toggleMovieShow:u}),e.jsx(io,{isVocaOpen:A,toggleVocaList:z,pauseStoryAudio:h,resumeStoryAudio:g})]})}function yQ(t){const[i,n]=c.useState(!0),[s,a]=c.useState(1),[l,u]=c.useState({playPage:1,sequnce:0}),[r,x]=c.useState(0),[y,f]=c.useState(""),p=c.useRef(new Audio);p.current.autoplay=!0;const h=p.current,[g,m]=c.useState(0),[o,_]=c.useState(1);c.useEffect(()=>{console.log("change page number",s),t&&(t.find(k=>k.Page===s&&k.SoundPath)?u({playPage:s,sequnce:0}):setTimeout(()=>{a(s+1)},2e3))},[s]),c.useEffect(()=>{console.log("ue ps",h);const w=()=>{console.log("audio canplaythrough"),h.play(),f("play")};h.addEventListener("canplaythrough",w);const k=()=>{m(h.currentTime)};h.addEventListener("timeupdate",k);const A=()=>{console.log("audio pause"),f("pause")};h.addEventListener("pause",A);const V=()=>{console.log("audio ended"),i&&(t.find(q=>q.Page===s+1)?a(s+1):(r===0?x(1):r<=1&&x(2),f(""))),t[t.length-1].Page>=s+1?i&&(console.log("pp",l.playPage),a(s+1)):(r===0?x(1):r<=1&&x(2),f(""))};return h.addEventListener("ended",V),d(l.playPage,l.sequnce),()=>{console.log("return handler"),h.removeEventListener("canplaythrough",w),h.removeEventListener("timeupdate",k),h.removeEventListener("pause",A),h.removeEventListener("ended",V),j()}},[l]),c.useEffect(()=>{},[i]),c.useEffect(()=>{h.playbackRate=o},[o]),c.useEffect(()=>{r===1&&a(1)},[r]);const d=(w,k)=>{const A=t.filter(V=>V.Page===w&&V.SoundPath!=="");A.length>0&&A.length>k-1?(console.log("play audio"),h.src=A[0].SoundPath,h.playbackRate=o,k>0&&(h.currentTime=A[k-1].StartTime/1e3)):(h.src="",h.currentTime=0)},j=()=>{h.pause(),h.src="",h.currentTime=0,f("")};return{isAutoNextPage:i,pageNumber:s,playState:y,pageSeq:l,currentTime:g,playAudio:d,stopAudio:j,pauseAudio:()=>{h.pause()},resumeAudio:()=>{y==="play"&&(f("play"),h.play())},changePlaySpeed:w=>{_(w)},changeDuration:(w,k)=>{u({playPage:w,sequnce:k})},changeVolume:w=>{h.volume=w},changePageNumber:w=>{w===1&&f(""),a(w)},changeAutoNextPage:w=>{n(w)}}}function fQ({onTouchStartHandler:t,onTouchEndHandler:i,children:n}){var u,r,x;const a=(((x=(r=(u=c.useContext(_e))==null?void 0:u.bookInfo)==null?void 0:r.BookLevel)==null?void 0:x.substring(0,1))||"K")==="K"?480:525,l=window.innerWidth/a;return e.jsx("div",{className:I.ebook_body_mobile_p,onTouchStart:y=>t(y),onTouchEnd:y=>i(y),children:e.jsx("div",{style:{transform:`scale(${l})`},children:n})})}const gQ="/public/assets/icon_speed10-0ef1da58.svg";function Os({text:t}){return e.jsx("div",{className:I.label,children:t})}function oo({children:t}){return e.jsx("div",{className:I.select_box,children:t})}function pQ({readTypeList:t,changeReadTypeList:i,changeTextShow:n,changeMuteAudio:s,changeHighlight:a}){const l=u=>{const r=[...t];switch(r.map(x=>{x.selected=""}),r[u].selected="on",u){case 0:n(!0),s(!1),a(!0);break;case 1:n(!1),s(!1),a(!0);break;case 2:n(!0),s(!0),a(!0);break;case 3:n(!0),s(!1),a(!1);break}i(r)};return e.jsxs(e.Fragment,{children:[e.jsx(Os,{text:"읽기 모드"}),e.jsx(oo,{children:t.map((u,r)=>e.jsxs("div",{className:`${I.select_button} ${u.selected==="on"?I.on:""}`,onClick:()=>l(r),children:[e.jsx("div",{className:I.radio}),u.name]}))})]})}function bQ({isAutoNextPage:t,changeAutoNextPage:i}){return e.jsxs(e.Fragment,{children:[e.jsx(Os,{text:"책장 넘기기"}),e.jsxs("div",{className:I.page_turning_mode,children:[e.jsx("div",{className:t?I.choose_button:`${I.choose_button} ${I.on}`,onClick:()=>{i(!1)},children:"수동으로 넘기기"}),e.jsx("div",{className:t?`${I.choose_button} ${I.on}`:I.choose_button,onClick:()=>{i(!0)},children:"자동으로 넘기기"})]})]})}function jQ({speedList:t,changePlaySpeedList:i,changePlaySpeed:n}){t.find(a=>a.selected==="on");const s=a=>{const l=[...t];l.map(u=>{u.selected=""}),l[a].selected="on",n(l[a].rate),i(l)};return e.jsxs(e.Fragment,{children:[e.jsx(Os,{text:"읽기 속도"}),e.jsx(oo,{children:t.map((a,l)=>e.jsxs("div",{className:`${I.select_button} ${a.selected==="on"?I.on:""}`,onClick:()=>{s(l)},children:[e.jsx("div",{className:I.radio}),a.rate,"x"]}))})]})}function SQ({isBottomLeftMenuOpen:t,isAutoNextPage:i,changeTextShow:n,changeMuteAudio:s,changeHighlight:a,changePlaySpeed:l,changeAutoNextPage:u,toggleBottomLeft:r}){const[x,y]=c.useState("slide-in-bottom"),[f,p]=c.useState([{name:"Basic",selected:"on"},{name:"No Text",selected:""},{name:"No Audio",selected:""},{name:"No Highlight",selected:""}]),[h,g]=c.useState([{rate:.8,selected:""},{rate:1,selected:"on"},{rate:1.2,selected:""},{rate:1.5,selected:""}]),m=()=>{y("slide-out-bottom"),setTimeout(()=>{y("slide-in-bottom"),r()},500)},o=d=>{p(d)},_=d=>{g(d)};return e.jsx(e.Fragment,{children:t&&e.jsxs("div",{className:`${I.ebook_play_mode_mobile}
      ${x==="slide-in-bottom"?I.slide_in_bottom:I.slide_out_bottom}`,children:[e.jsxs("div",{className:I.container,children:[e.jsx(pQ,{readTypeList:f,changeReadTypeList:o,changeTextShow:n,changeHighlight:a,changeMuteAudio:s}),e.jsx(jQ,{speedList:h,changePlaySpeedList:_,changePlaySpeed:l}),e.jsx(bQ,{isAutoNextPage:i,changeAutoNextPage:u})]}),e.jsx("div",{className:I.light_box,onClick:()=>{m()}})]})})}function zQ({progressWidth:t,isAutoNextPage:i,pageSeq:n,playState:s,turnPageLeft:a,turnPageRight:l,changeTextShow:u,changeMuteAudio:r,changeHighlight:x,changePlaySpeed:y,changeAutoNextPage:f,playAudio:p,pauseAudio:h,resumeAudio:g,toggleVocaList:m,toggleHeader:o}){const[_,d]=c.useState(!1),j=()=>{d(!_)};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:I.ebook_progress_bar,children:e.jsx("div",{className:I.progress,style:{width:`${t}%`}})}),e.jsxs("div",{className:`${I.ebook_play_bar} ${I.mobile}`,children:[e.jsxs("div",{className:I.ebook_play_bar_pc_area_l,children:[e.jsx("div",{className:I.read_mode_button,onClick:()=>{j()},children:e.jsx("img",{src:gQ,width:30,height:30})}),e.jsx(SQ,{isBottomLeftMenuOpen:_,isAutoNextPage:i,changeTextShow:u,changeMuteAudio:r,changeHighlight:x,changePlaySpeed:y,changeAutoNextPage:f,toggleBottomLeft:j})]}),e.jsxs("div",{className:I.ebook_play_bar_pc_area_c,children:[e.jsx("div",{className:I.backward,onClick:()=>{a()},children:e.jsx("img",{src:Ls,width:40,alt:""})}),e.jsx("div",{className:I.play,onClick:()=>{switch(s){case"play":case"resume":h();break;case"stop":p(n.playPage,n.sequnce);break;case"pause":g();break}},children:s!=="play"?e.jsx("img",{src:eo,width:40}):e.jsx("img",{src:to,width:40})}),e.jsx("div",{className:I.forward,onClick:()=>{l()},children:e.jsx("img",{src:qs,width:40,alt:""})})]}),e.jsxs("div",{className:I.ebook_play_bar_pc_area_r,children:[e.jsx("div",{className:I.word_button,onTouchEnd:()=>{m()},children:e.jsx("img",{src:no,width:28,height:28,alt:""})}),e.jsx("div",{className:I.menu_button,onClick:()=>{o()},children:e.jsx("img",{src:Zi,width:24,height:24,alt:""})})]})]})]})}function wQ({isRatingShow:t,isMovieShow:i,storyData:n,changeRatingShow:s,toggleMovieShow:a}){const{isAutoNextPage:l,pageNumber:u,playState:r,pageSeq:x,currentTime:y,playAudio:f,pauseAudio:p,resumeAudio:h,changePlaySpeed:g,changeDuration:m,changeVolume:o,changePageNumber:_,changeAutoNextPage:d}=yQ(n),[j,S]=c.useState(!0),[b,N]=c.useState(!1),[L,C]=c.useState(!0),[B,E]=c.useState(!1),[w,k]=c.useState(!1),[A,V]=c.useState(0),[F,q]=c.useState(0),H=u/n[n.length-1].Page*100;c.useEffect(()=>{A-F>5?ee():A-F<0&&R()},[F]),c.useEffect(()=>{(t||i)&&p(),!t&&r==="pause"&&h()},[t,i]);const $=()=>{k(!w)},R=()=>{u>1&&setTimeout(()=>{_(u-1)},160)};c.useEffect(()=>{o(b?0:1)},[b]);const ee=()=>{u+1<=n[n.length-1].Page&&setTimeout(()=>{_(u+1)},160)},Z=P=>{const O=P.changedTouches[0].pageX;V(O)},U=P=>{const O=P.changedTouches[0].pageX;q(O)},D=(P,O)=>{m(P,O)},v=P=>{S(P)},z=P=>{N(P)},T=P=>{C(P)},M=()=>{E(!B)};return e.jsxs(e.Fragment,{children:[e.jsx(fQ,{onTouchStartHandler:Z,onTouchEndHandler:U,children:e.jsx(As,{isTextShow:j,pageSeq:x,pageNumber:u,storyData:n,currentTime:y,isHighlight:L,clickSentence:D})}),e.jsx(zQ,{progressWidth:H,isAutoNextPage:l,pageSeq:x,playState:r,turnPageLeft:R,turnPageRight:ee,changeTextShow:v,changeMuteAudio:z,changeHighlight:T,changePlaySpeed:g,changeAutoNextPage:d,playAudio:f,pauseAudio:p,resumeAudio:h,toggleVocaList:M,toggleHeader:$}),e.jsx(so,{isSideOpen:w,changeSideMenu:$,changeRatingShow:s,toggleMovieShow:a}),e.jsx(io,{isVocaOpen:B,toggleVocaList:M,pauseStoryAudio:p,resumeStoryAudio:h})]})}function ro({starCount:t,changeStarCount:i}){const n=[1,2,3,4,5];return e.jsx("div",{className:I.chooseRating,children:n.map((s,a)=>{const l=a+1;return e.jsx("div",{className:t>=l?I.btnStarOn:I.btnStarOff,onClick:()=>{i(l)}},a)})})}function QQ({changeRatingShow:t}){const{bookInfo:i,studyInfo:n,handler:s}=c.useContext(_e),[a,l]=c.useState(3),u=x=>{l(x)},r=async()=>{(await Ai(n.studyId,n.studentHistoryId,a*10)).success&&s.changeView("quiz")};return e.jsx("div",{className:`${I.ebookRating}`,children:e.jsxs("div",{className:`${I.container} animate__animated animate__zoomIn`,children:[e.jsx("div",{className:I.groupBookcover,children:e.jsx("img",{className:I.imgBookcover,src:`${i.SurfaceImage}`})}),e.jsxs("div",{className:I.groupChoose,children:[e.jsx("div",{className:I.txtQuestion,children:"How do you like this book?"}),e.jsx("div",{className:I.groupChooseRating,children:e.jsx(ro,{starCount:a,changeStarCount:u})}),e.jsxs("div",{className:I.groupConfirm,children:[e.jsx("button",{className:`${I.btnConfirm} ${I.gray}`,onClick:()=>{t(!1)},children:"다시읽기"}),e.jsx("button",{className:`${I.btnConfirm} ${I.blue}`,onClick:()=>{s.isPreference||n.isSubmitPreference?s.changeView("quiz"):r()},children:"학습하기"})]})]}),e.jsxs("div",{className:I.groupComment,children:[e.jsx("span",{className:I.icoExclamationMark}),e.jsxs("span",{className:I.txtComment,children:["모든 학습을 완료하고 ",e.jsx("b",{children:"평균 70점을 넘어야 포인트를 획득"}),"할 수 있습니다."]})]})]})})}function CQ({toggleMovieShow:t}){const{bookInfo:i}=c.useContext(_e);return e.jsx("div",{className:I.movieContents,children:e.jsxs("div",{className:I.container,children:[JSON.parse(JSON.stringify(i.AnimationPath))===""||!i.AnimationPath?"No Movie Book":e.jsx("video",{width:"100%",height:"100%",controls:!0,children:e.jsx("source",{src:JSON.parse(JSON.stringify(i.AnimationPath)),type:"video/mp4"})}),e.jsx("div",{className:I.btnDelete,onClick:()=>t(!1)})]})})}const Qn=Q();function Ni(){const{bookInfo:t,studyInfo:i}=c.useContext(_e),[n,s]=c.useState(),[a,l]=c.useState(!1),[u,r]=c.useState(!1),{imgSize:x,preloadImage:y}=Cz(),[f,p]=c.useState(window.innerHeight),[h,g]=c.useState(1);c.useEffect(()=>{n||(async()=>{const d=await co(i.studyId,i.studentHistoryId);d&&(console.log(d),s(d),y(d))})()},[n]),c.useEffect(()=>{console.log(Qn);const _=()=>{p(window.innerHeight),g(Qn?screen.width/x.width:window.innerHeight/x.height*.9)};return _(),window.addEventListener("resize",_),()=>{window.removeEventListener("resize",_)}},[Qn,x,f]);const m=_=>{l(_)},o=_=>{r(_)};return n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:I.ebook,style:{backgroundImage:`url('${t.BackgroundImage}')`,height:f},children:Qn?e.jsx(wQ,{isRatingShow:a,isMovieShow:u,storyData:n,changeRatingShow:m,toggleMovieShow:o}):e.jsx(hQ,{isRatingShow:a,isMovieShow:u,storyData:n,imgSize:x,pageScale:h,changeRatingShow:m,toggleMovieShow:o})}),a&&e.jsx(QQ,{changeRatingShow:m}),u&&e.jsx(CQ,{toggleMovieShow:o})]}):e.jsx(e.Fragment,{children:"Loading..."})}const vQ=Q();function $Q(){const{studyInfo:t}=c.useContext(_e),[i,n]=c.useState(window.innerWidth),[s,a]=c.useState(window.innerHeight);return c.useEffect(()=>{const l=()=>{n(window.innerWidth),a(window.innerHeight)};return l(),window.addEventListener("resize",l),()=>{window.removeEventListener("resize",l)}},[vQ,s]),e.jsx("iframe",{src:`./static/speak/index.html?studyId=${t.studyId}&studentHistoryId=${t.studentHistoryId}&token=${t.token}`,style:{border:"none",width:i,height:s},sandbox:"allow-scripts allow-same-origin allow-popups allow-modals"})}const NQ=()=>{const{studyInfo:t,handler:i}=c.useContext(_e);c.useEffect(()=>{console.log(i.viewStudy)},[i.viewStudy]);let n;switch(i.viewStudy){case"story":n=e.jsx(Ni,{});break;case"speaking":n=e.jsx($Q,{});break;case"quiz":n=e.jsx(Xi,{});break;default:n=e.jsx(Ni,{})}return n};function TQ(){const{bookInfo:t,studyInfo:i,handler:n}=c.useContext(_e),[s,a]=c.useState(3),l=r=>{a(r)},u=async()=>{(await Ai(i.studyId,i.studentHistoryId,s*10)).success&&n.changeView("quiz")};return e.jsx("div",{className:`${I.ebookRating}`,children:e.jsxs("div",{className:`${I.container} animate__animated animate__zoomIn`,children:[e.jsx("div",{className:I.groupBookcover,children:e.jsx("img",{className:I.imgBookcover,src:`${t.SurfaceImage}`})}),e.jsxs("div",{className:I.groupChoose,children:[e.jsx("div",{className:I.txtQuestion,children:"How do you like this book?"}),e.jsx("div",{className:I.groupChooseRating,children:e.jsx(ro,{starCount:s,changeStarCount:l})}),e.jsx("div",{className:I.groupConfirm,children:e.jsx("button",{className:`${I.btnConfirm} ${I.blue}`,onClick:()=>{n.isPreference||i.isSubmitPreference?n.changeView("quiz"):u()},children:"학습하기"})})]}),e.jsxs("div",{className:I.groupComment,children:[e.jsx("span",{className:I.icoExclamationMark}),e.jsxs("span",{className:I.txtComment,children:["모든 학습을 완료하고 ",e.jsx("b",{children:"평균 70점을 넘어야 포인트를 획득"}),"할 수 있습니다."]})]})]})})}const AQ=t=>{const{studyInfo:i,handler:n}=c.useContext(_e);let s;return n.isPreference||i.isSubmitPreference?s=e.jsx(Xi,{}):s=e.jsx(TQ,{}),s},VQ=()=>{const{studyInfo:t}=c.useContext(_e);let i="error";t.bookType==="EB"?i="ebook":t.bookType==="PB"&&(i="pbook");const n=i,[s,a]=c.useState(!1),l=()=>{a(!0)};let u;return n==="ebook"?u=e.jsx(NQ,{}):n==="pbook"&&(u=e.jsx(AQ,{})),e.jsx("div",{children:!t.isSuper&&t.isReview&&!s?e.jsx(kQ,{onUpdateReviewInform:l}):u})};function kQ({onUpdateReviewInform:t}){return e.jsxs("div",{style:{backgroundColor:"skyblue",height:"40vh",textAlign:"center",paddingTop:"45vh"},children:[e.jsx("span",{children:"리뷰 모드 팝업"}),e.jsx("div",{children:e.jsx("button",{onClick:()=>t(),children:"확인"})})]})}export{VQ as default};
